summary,type
PrintingStepMonitor	jbehave reports import to hudson xunit error conversion error error to convert a file not found hi i know about some similar tasks jbehave but i think this does not resolve my problem in my test project see attachment i added a story ist produkt in bestand story with givenstories the report xml for that story is currupted because end tags are missing scenario story that failure takes place with version beta and beta i think it is realy possible that i doing something wrong with the configuration src test java jbehave config traderembedderrunner if it is tell me pleace how i change it my hudson config jbehave hudson plugin beta xunit thanks for your help best regards sven sch fer,Bug
build xml may not work due to user rights and can change users ant home lib hi the shipped build xml of jbehave has targets setup and copy dependencies the second depends on the first but under certain circumstances the setup task may fail which will make the copy dependencies fail for example if someone has a globally installed ant version in case of ubuntu apt get install ant desktop jbehave lib ant buildfile home zsolt desktop jbehave lib build xml setup copy copying file to usr share ant lib build failed home zsolt desktop jbehave lib build xml failed to copy home zsolt desktop jbehave lib maven ant tasks jar to usr share ant lib maven ant tasks jar due to java io filenotfoundexception usr share ant lib maven ant tasks jar permission denied additionally i do n't really like that the setup tasks changes the content of my ant home lib folder because i might have the latest version currently of maven ant tasks for some reasons but the build xml of jbehave removes it and replaces it with an older version after removing the dependency between the setup and copy dependencies tasks i was able to download the libraries of jbehave cheers zsolt,Bug
stack traces should be compressible in printed output reflection has lines that do n't need to be in a stack for a qa engineer to debug with groovy has different fragments of stack to lines each that do n't need to be in a stack for a qa engineer to debug with the compression behaviour off by default should be configurable via a boolean flag in the storyreporterbuilder ,Improvement
show as pending in reports view scenarios and stories that contain pending steps or no steps as suggested by jonathan woods on user list it would be useful if i stories with no steps were reported as pending and their constituent scenarios too ii stories with any pending steps were reported as pending and their constituent scenarios too iii a run with any pending stories was itself reported as pending even if it was also regarded as successful when i say ' reported as ' i mean in the kind of end result you can see at target jbehave view reports html in jbehave trader example i tried adding a new story alongside the existing test stories and of course it was reported but as successful only nothing to indicate there 's no implementation as suggested in i above this kind of behaviour would serve as a flag to keep the implementer honest and maintain the flow of top down development you 've not implemented x if you 've not implemented something x depends on it would help keep story development and implementation in synch if i make a modification to a story or create a whole new story and jbehave can tell me everywhere that implementation is pending that 's great ,Improvement
springstoryreporterbuilder does not expose all properties in storyreporterbuilder here is a patch to start to fix it i was unsure on other properties ,Improvement
initialisation errors in remotewebdriverprovider are not being reported errors in initialize method in remotewebdriverprovider e g due to auth failure in saucewebdriverprovider are not being reported added remotewebdriverprovidertest to verify behaviour the missing url should lead to a runningstoriesfailed exception in the embedder ,Bug
storymaps could link back to story source or colored htmlified story output refer ca nt click the story name to go anywhere ,Improvement
crossreference should allow output of json or xml data per completed story and to write to only format instead of writing the cross reference xml and json at the end of the suite write it once per story completion of course this should be configurable with the default as is at the end of the suite secondarily have a configuration option that allows a choice of xml or json or both rather than doing both as at present ,Improvement
add crossreference report as contributed by the dallas geeknight folks a xref json and xml data report that can be consumed by different views ,New Feature
error in webdriverprovider initialize method ignored due to npe in storyrunner noformat new webdriverprovider public void initialize throw new runtimeexception or error or something noformat does not get reported it 's consumed because of a later npe the npe is in storyrunner concerning member variable ' reporter ' which is not set before use in this situation ,Bug
allow configuration of storytimeoutinsecs via usingembedder annotation currently story timeout is configurable via embeddercontrols as per other embeddercontrols properties the storytimeoutinsecs should be configurable via usingembedder annotation ,Improvement
add story timing info to crossreference add timing fields ' started ' and ' duration ' milliseconds ,Improvement
provide property based embeddercontrols an extension of embeddercontrols that allows values to be set via system properties ,Improvement
 beforescenario not called per ' examples ' permutation could beforescenario be enhanced beforescenario before examples permutations too or could we have a new annotation beforeexamples there is some feeling that this used to work in jb refer bug zip attached paul on behalf of bill,Bug
screenshot should be taken on every example failure if a scenario has an example table assume a scenario has a example table with examples lets say the scenario fails for nd and rd example set the screenshot is taken only after the execution for the last example set and in the above case its of no use as the scenario passed with the last example set the screenshot should be taken everytime the scenario failes with a particular example set ,Improvement
pending step method generation fails with and steps when i run over a scenario with ' and ' steps pending method generation fails the same scenario without the ' and ' steps generates methods without any problem and is jolly useful the failure happens in and in snapshot commit c f the failure results from an npe jbehave knows the story has failed but the run times out and then exits with ' pass ' from the junit pov is that the expected behaviour btw failing scenario scenario when i log in with good credentials after having been redirected to the login page from my intended page i am redirected to my intended page given i am not logged in and i have been redirected from my intended page to the login page when i log in with good credentials then i am redirected to my intended page and i am logged in console output scenario when i log in with good credentials after having been redirected to the login page from my intended page i am redirected to my intended page given i am not logged in pending and i have been redirected from my intended page to the login page pending when i log in with good credentials pending then i am redirected to my intended page pending and i am logged in pending failed to run story package name here login i can log in with correct credentials story java lang nullpointerexception at org jbehave core steps pendingstepmethodgenerator stepstartswithword pendingstepmethodgenerator java at org jbehave core steps pendingstepmethodgenerator findsteptype pendingstepmethodgenerator java at org jbehave core steps pendingstepmethodgenerator generatemethod pendingstepmethodgenerator java at org jbehave core embedder storyrunner generatependingstepmethods storyrunner java at org jbehave core embedder storyrunner runscenariosteps storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder embedder enqueuedstory call embedder java at org jbehave core embedder embedder enqueuedstory call embedder java at java util concurrent futuretask sync innerrun futuretask java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor worker runtask threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java story package name here login i can log in with correct credentials story has timed out after seconds generating reports view to ' users jonathanwoods documents workspaces main mobile target jbehave ' using formats ' stats console txt html xml ' and view properties ' decoratenonhtml true ' reports view generated with stories of which pending containing scenarios of which failed and pending ,Bug
jbehave i n some german translations in keyword de properties are wrong i 'm using jbehave for the first time in a project for a german customer and i would of course like to write the user stories in german i had a short look into the keyword de properties and would like to make some corrections suggestions scenario scenario should be scenario szenario spelled with ' z ' instead of ' c ' givenstories vorgegebenegeschichten should be givenstories gegebenestories instead of vorgegebene simply use gegebene and i would not even translate story stories because it 's already a germanized term meaning it has been accepted in the german language especially within the business community given vorgegeben should be given gegeben as mentioned before when wann should be when wenn wann is simply wrong in this case even though a correct translation of the word when but only if it is related to time a temporal term you have to use the conditional wenn which you could also translate into english as if notperformed nicht erf u dcllt should be notperformed nicht ausgef u dchrt to perform is ausf hren in german hence nicht ausgef hrt would be the correct translation erf llen erf llt actually means fullfilled that 's it i attached the corrected properties file would be nice if you or someone from the jbehave team could include it in the next release if possible i know this will break compatibility with older releases but since of the main keywords when is translated completely wrong i can hardly imagine that someone used the german translations yet actually it should even be replaced patched in older releases ,Bug
ca n't run stories as embeddables from test directory using maven plugin when i tried to use it the plugin could n't find my java file i suspect that this is because the classloader obtained under maven with a story that uses new loadfromclasspath this getclass getclassloader as a storyloader does n't include the test class directory even though the running class is in the test class directory the same code works correctly under the eclipse debugger including the test class directory in the classpath everything else works correctly in maven unit tests etc the configuration configuration sourcedirectory project build sourcedirectory sourcedirectory testsourcedirectory project build testsourcedirectory testsourcedirectory includes include processorteststory java include includes metafilters metafilter author metafilter metafilter skip metafilter metafilters systemproperties property name java awt headless name value true value property systemproperties ignorefailureinstories true ignorefailureinstories ignorefailureinview false ignorefailureinview configuration ed,Bug
 composite step is executing successfully when of its sub steps is pending we believe that these should behave in the same manner as other pending steps the pending step should be marked in the output and subsequent steps should not be performed ,Bug
generic parameter converter for enum classes it would be nice if you could generically convert enum fields automatically without having to create ad hoc asparameterconverters for each ,Improvement
improve state management of storyrunner we need to improve the state management of the storyrunner currently after every set of steps run the state is reset and the scenario before after steps are run separately from the normal steps causing wierd behaviours when there are failure in the before steps but not in the normal steps examples of such a behaviour are the trader failing before after story and failing before stories story a better and more intuitive state management should be in place keeping state in the run context the state should be reset by default before each scenario to ensure backward compat but will be shared between the before after steps and the normal steps we should also have the option to not reset it before each scenario to allow for failures in the beforestory stories steps to propagate to the scenario steps in the same run context once a failing state in a given run context the steps that follow will not be performed as customary with normal steps ,Improvement
failing scenarios are reported as successfull we noticed that methods annotated with afterscenario uponoutcome failure were not being triggered properly after a scenario failed upon further inspection we see that the failure is reported by the failing step it is then ignored by the after methods which report success the following scenario is run although it should be skipped the report at the bottom correctly states that the story failed sample output from of the trader examples running story org jbehave examples trader stories skip scenarios after failure story org jbehave examples trader stories skip scenarios after failure story before story scenario a scenario with failed step before scenario given i do nothing then i fail failed junit framework assertionfailederror i failed after any scenario after successful scenario scenario a scenario that is not executed because if followed a failed scenario before scenario given i do nothing after any scenario after successful scenario browser has been put to rest after story failed to run story org jbehave examples trader stories skip scenarios after failure story junit framework assertionfailederror i failed ,Bug
webdriverprovider takescreenshot should return a boolean to say if the screenshot has been taken as not all webdrivers support taking screenshots ie instances of takesscreenshot it 's useful for the takescreenshot method to return a boolean value to inform when the underlying webdriver supports screenshots ,Improvement
the option to leave a browser window open at the end of a run for perstorywebdriversteps and others it would be nice to obey and option command line or other to not close the browser frame on failure developers like to run single stories at a time and want to be able to debug when a failure happens a failing screen shot is thing but having the actual browser open is better still ,New Feature
 afterscenario should execute in reverse order to beforescenario consider webdriver situations where the order below is nearly always going to be the case new perstorieswebdriversteps new perstoriescontextview new webdriverscreenshotonfailure if we change from perstorieswebdriversteps to perscenariowebdriversteps then we have a problem perscenariowebdriversteps could conceivable drop the reference to webdriver after closing it and cause webdriverscreenshotonfailure to fail when it 's needing to leap into action the reproduction involved making steps fail and making the perstorieswebdriversteps to perscenariowebdriversteps change ,Bug
use of string toupper lowercase should be locale aware in turkish there are letters in order to symbolize english 's i they are i and i with dot lower case of i is i without dot and lower case of i with dot is i users from different nations may encounter with this kind of problems which come to surface when using string toupper lowercase the solution is to use string toupper lowercase locale while defaulting to locale getdefault if none specified string tolowercase is currently used in storyreporterbuilder formatnames boolean should use the locale specified in the localizedkeywords to retrieve the name lower case if not specified it defaults to locale getdefault underscoredcamelcaseresolver should provide a constructor to inject a non default locale string touppercase is currently used in propertywebdriverprovider should provide a protected method usinglocale which can be overridden use the desired locale ,Improvement
multi threading is not aware of runcontext givenstory multi threading is not aware of runcontext givenstory in case of a story with a givenstory it will throw failed to run story org jbehave examples trader stories trader sells all stocks story java lang runtimeexception delayed methods already invoked at org jbehave core reporters concurrentstoryreporter invokedelayed concurrentstoryreporter java the storyrunner should invoke the delayed methods according the givenstory flag of the runcontext ,Bug
add jbehave spring namespace support for easier configuration i have implemented an initial version it is a clone of master branch of jbehave project my implementation is on git github com maggandalf jbehave core git configuring embedder for working with spring shall be jbehave embedder id embedder jbehave classpathloader target classes jbehave classpathloader jbehave output txt jbehave output jbehave output html jbehave output jbehave output console jbehave output jbehave embedder ,New Feature
metafilters not properly read from the configuration the meta filters configuration of the maven mojo is not properly being read and passed as null to the embedder solution is use string in place of list string as generics are at times not properly handled in maven ,Bug
signal that next step is of different type consider code given something and something else then it happened or given something then it happened and when something public void something when something else public void somethingelse then it happened public void ithappened code i 'd like to be able to know in something whether the next step is of a different type or not code when something public void something named lastofsteptype boolean lastofsteptype code this is particularly useful for ui interactions webdriver etc given i am have a hat in the cart when i purchase with credit card and i specify an alternate delivery address then i should see a warning about different addresses i might want when i purchase with credit card as a standalone or with refining and clauses in the last of the when lines that 's pertinent i may execute the whole set when in this context feels like a continuation of sorts ,New Feature
examplestable and examplestablefactory should be interfaces to be able to use different formats for the examplestable the factory should be an interface the examplestable should also be an interface this way examples could be stored in xls or csv files by providing different factories ie in a story examples lotsofexamples xls,Improvement
allow to report stepdocs as embeddables currently we can report stepdocs by specifying the complete embedder instance fully configured and with candidatesteps another even more common use case is to want to report the stepdocs for the candidate steps that are defined for given embeddable instances such as junitstory or junitstories ,Improvement
specify a mvn repository for weld se i 've just tried to test the last release and i had to add a repository in my settings xml for dependendy dependency groupid org jboss weld se groupid artifactid weld se artifactid version final version dependency in pom xml of the module jbehave weld,Improvement
the sourcedirectory property of the jbehave maven plugin is read only in maven modifying the sourcedirectory and testsourcedirectory properties works as expected under maven but a error occurs under maven error can not override read only parameter sourcedirectory in goal jbehave run stories as paths upgrading to maven is currently not a option as this was discovered by a ci build running in hudson and it does not support maven as a project type ,Bug
screenshots for failing scenarios are taken but not correlated with the story html output hyperlink this could well be an issue in core around exceptions being thrown wrapped by uuidexceptionwrapper apply the attached patch to etsy it makes everything fail run regular build no saucelabs mvn clean install open navigator or reports page and click through to the html page for the failing story click the screenshot icon see that it s otherwise check the screenshots directory and observer that it has only screenshot instead of for each failed story ,Bug
support for weld context and dependency injection framework provide support for cdi context and dependency injection using the weld reference implementation,New Feature
add unoverridableembedder an extension of embedder that does not allow the override of the embedder methods specifically configuration and candidatesteps and forces the use of the modifier methods useconfiguration and usecandidatesteps ,Improvement
navigator view not generated in the case of a scenario step failing with no failures means target jbehave view navigator html generated with failures means target jbehave view navigator html generated is missing for some strange reason this is unlike reports html it is easy to reproduce comment out the hack fix override of run in etsystories also make of the steps fail before running the suite ,Bug
rename run with annotated embedder goal to run stories with annotated embedder the goal name is inconsistent with the other goal names for backward compat we can keep the previous goal name ,Improvement
givenstories should be able to be loaded relative to the story depending on them it should be possible to have given stories included relative to the story including them as this makes it easier to re organise the stories without changing the paths ,Improvement
table properties may override keywords i would like to specify table header and value separators in the table properties jbehave allows me to specify the header value separators for a story and i must use these values in all scenarios for the story it would be useful to specify a different separator just for a single scenario like you can do with the trim option for example valueseparator headerseparator the following email thread triggered this feature request ,New Feature
parametrised scenarios should use same mechanism as unparametrised instead of using a special construct for parametrised scenarios the same mechanism could be re used if the parametrisation work as a kind of macro ie before the step is parsed for example given my color mixing application when selecting color color and selecting color color then the resulting color should be result examples color color result red green yellow blue green cyan in this case i would implement the following in java given my color mixing application public void initapplication when selecting color color public void selectcolor string color then the resulting color should be result public void checkresult string result the point here is that i want only when alias which both works with and without parametrisation another benefit of this would be the possibility to parametrise which step is executed and not only the parameters altough i 'm not sure that this is a good idea it is certainly powerful for example given my color mixing application when operation color color and operation color color then the resulting color should be result examples operation operation color color result selecting adding red green yellow selecting selecting blue green cyan when adding color color public void addcolor string color using the ant style is just an idea to keep compability with the old behaviour but instead this new behaviour could replace the old with for parameters ,Improvement
hudson ca n't issue dmeta filter directives because of the spaces and quotes in the values side of the name value thing passed to d dmeta filter suite foo is going to cause hudson to try to redo the quotes like so dmeta filter suite foo the fix will be add underscore as a space replacement for meta filters dmeta filter suite foo,Bug
afterstories xml and beforestories xml being corrupt or length will break the hudson plugin afterstories xml can be bytes on occasion beforestories xml can have invalid xml on occasion ,Bug
firefox window not closing by default when failure occurs steps to reproduce for etsy corrupt cartcontents goovy line like so aim at an xpath like so findelement by xpath a rel ' removeeeeeeeeeee' click run the build note that there is a firefox window open at the end of the run this did not happen before the beta core and web releases ,Bug
test run with eclipse but no with maven i want to integrate jbehave with maven and have a lot of troubles i attach a sample with an example the story pass if i run as junit test in eclipse but when i try with maven fail is a classloader problem the exception is org springframework beans factory beandefinitionstoreexception ioexception pars ing xml document from class path resource applicationcontext xml nested excep tion is java io filenotfoundexception class path resource applicationcontext x ml can not be opened because it does not exist but to fix this i must pass all dependencies to the plugin i hope there is a solution to this thanks ,Bug
storymaps view could have more information refer column called author would be better titled has author for that column rather than ' x ' in the cells it would be better with the variance ' mauro ' in this case ,Improvement
if story is ' excluded ' because of meta filtering we need a way to totally exclude it such that there are not monitor or storyreporter calls for it i 'm opening browsers in saucelabs the closing them a few seconds later pointlessly ,New Feature
allow parameters to be specified as meta properties as suggested by paul parameters may be specified as meta properties noformat meta theme parameters scenario meta variant named given i have specified the theme and a variant then the theme is parameters with variant named noformat the named meta parameters would be matched by usual named mechanism also used in story or scenario parametrisation code given i have specified the theme public void givenihavespecifiedthetheme named theme string theme this theme theme code ,New Feature
maven goal run stories with annotated embedder runner does n't exist in the documentation reference a goal named run stories with annotated embedder runner that not exist fix with run with annotated embedder,Bug
examplestablefactory should load resources from classpath by default resources in classpath are much more common than url resources so it is more convenient to have loadfromclasspath as the default resourceloader ,Improvement
candidatesteps instances should be created by storyrunner context allowing for multi threaded stateful steps logic in multi threaded mode the steps instances need to be instantiated per thread a way to do this is to pass the injectablestepsfactory to the storyrunner run context and let the context instantiate the candidate steps per thread ,New Feature
failures in beforestories and afterstories steps cause npe beforestories and afterstories steps are not tied to any specific story the storyrunner reporter requires to be set to a conventional story path name e g beforestories and afterstories so the output of the failure messages can be captured and does not cause a npe ,Bug
provide pending annotation to mark methods that have not yet been implemented as suggested by jonathan woods a pending annotation can be used to mark not yet implemented methods either auto generated or not ,New Feature
null meta filters should be ignored in maven plugin when specifying the meta filters via the maven plugin null entries are sometimes passed in which should be ignored ,Improvement
failing steps could be assigned a unique failure context that could to a name screenshots and b be used in html reports this affects ' core ' and ' web ' say an element is not found in a webpage and webdriver throws whatever exception it needs presuming that fails a step then jbehave could set a failure context lets say that a guid later when the failingscreenshotthing picks up the fact that a step failed it could use the failure context in the name of the screen shot jpeg later in the rendering of the reports the html at least could link to the jpeg maybe instead of guid this could be the object identity of the stepresult or failed instance ,Improvement
steppattern to encapsulate both annotated and resolved patterns and report to the stepmonitor currently only the resolved regex pattern is reported to the stepmonitor e g stepmatchespattern string step boolean matches string pattern method method object stepsinstance where is step is matching steps were coded in english to make it easier for people to understand the resolved regex pattern is matching s steps s were s coded s in s s to s make s it s easier s for s people s to s understand it 's also useful to report the annotated pattern matching steps were coded in language to make it easier for people to understand a new steppattern model class should encapsultate both annotated and resolved patterns and the method should thus read stepmatchespattern string step boolean matches steppattern pattern method method object stepsinstance ,Improvement
provide paranamerconfiguration an instance of configuration that uses a cachingparanamer by default ,Improvement
maven jbehave plugin goal jbehave run stories as embeddables does n't found my junitstories test classes i 'm testing a web site with jbehave web selenium beta and i i 'd rather run my tests with jbehave maven plugin instead of running them with maven surefire plugin due to some issues of this last plugin with jbehave hudson plugin please see this issue for more information but jbehave maven plugin does n't recognize my junitstories test classes that seems to be always the case for plugin configurations given in jbehave issue please the attached file for maven plugins configuration details ,Bug
archetypes to boostrap creation of projects archetypes are a useful way to help projects bootstrap their testing setup maven natively supports the concept of archetypes which are templates used to generate new projects the archetype resources are velocity templates packaged as a jar maven provides a meta inf maven archetype descriptor xml but other tools can still use the archetype resources ,New Feature
booleanconverter and booleanlistconverter need to provide a booleanconverter and booleanlistconverter,Improvement
multithreaded story execution capability embeddercontrols usethreads int or equivalent annotation property controls the number of threads that will be used for the multi thread execution each story and all its scenarios will run in a single thread while multiple stories can run concurrently ,New Feature
test run with eclipse but no with maven i want to integrate jbehave with maven and have a lot of trouble i attach a sample with an example the story pass if i run as junit test in eclipse but when i try with maven fail is a classloader problem the exception is org springframework beans factory beandefinitionstoreexception ioexception pars ing xml document from class path resource applicationcontext xml nested excep tion is java io filenotfoundexception class path resource applicationcontext x ml can not be opened because it does not exist but to fix this i must pass all dependencies to the plugin i hope there is a solution to this thanks ,Bug
withrelativedirectory appears to be broken i 'm working in a non maven environment i attempted to set the output directory for reports as follows public static class myreportbuilder extends storyreporterbuilder public myreportbuilder super this withrelativedirectory build publish story reports this withformats console html xml upon running the junits i get the following org jbehave core reporters fileprintstreamfactory printstreamcreationfailed failed to create print stream for file home derek workspace smsmanagergit target build publish story reports beforestories html at org jbehave core reporters fileprintstreamfactory createprintstream fileprintstreamfactory java at org jbehave core reporters format createstoryreporter format java at org jbehave core reporters storyreporterbuilder reporterfor storyreporterbuilder java at org jbehave core reporters storyreporterbuilder build storyreporterbuilder java at org jbehave core configuration configuration storyreporter configuration java at org jbehave core embedder storyrunner runbeforeorafterstories storyrunner java at org jbehave core embedder embedder runstoriesaspaths embedder java at au com sensis wireless smsmanager integration bdd stories annotatedstoryembedder run annotatedstoryembedder java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org junit runners model frameworkmethod runreflectivecall frameworkmethod java at org junit internal runners model reflectivecallable run reflectivecallable java at org junit runners model frameworkmethod invokeexplosively frameworkmethod java at org junit internal runners statements invokemethod evaluate invokemethod java at org junit internal runners statements runbefores evaluate runbefores java at org junit internal runners statements runafters evaluate runafters java at org junit runners blockjunit classrunner runchild blockjunit classrunner java at org junit runners blockjunit classrunner runchild blockjunit classrunner java at org junit runners parentrunner runchildren parentrunner java at org junit runners parentrunner access parentrunner java at org junit runners parentrunner evaluate parentrunner java at org junit internal runners statements runbefores evaluate runbefores java at org junit internal runners statements runafters evaluate runafters java at org junit runners parentrunner run parentrunner java at org eclipse jdt internal junit runner junit testreference run junit testreference java at org eclipse jdt internal junit runner testexecution run testexecution java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner run remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner main remotetestrunner java caused by java io filenotfoundexception home derek workspace smsmanagergit target build publish story reports beforestories html no such file or directory at java io fileoutputstream open native method at java io fileoutputstream init fileoutputstream java at org jbehave core reporters fileprintstreamfactory fileprintstream init fileprintstreamfactory java at org jbehave core reporters fileprintstreamfactory createprintstream fileprintstreamfactory java more commenting out the withrelativedirectory method and everything works just fine ,Bug
xml scenario reporter does n't always include a closing story xml tag when running the trader example the story org jbehave examples trader stories failure followed by given stories story generates an invalid xml file by not including a final closing story tag attached is the generated invalid xml file ,Bug
scenario with nested or recursive example table we have a ui functionality that repeats on many pages say it is a jspf component that is reusable with configurable variation but it is important to test this on all pages since the functionality is slightly different on each of these pages h how we have to code this today scenario food widget in home page given i am on home page when i enter food item in the menu field then i see related food items in the dropdown examples food item related food items pizza cheese chicken bacon fruit salad mangoes strawberry grapes rice brown white fried the exact same test will repeat on a different page like below scenario food widget in orderfood page given i am on orderfood page when i enter food item in the menu field then i see related food items in the dropdown examples food item related food items pizza cheese chicken bacon fruit salad mangoes strawberry grapes rice brown white fried h problem statement we want to run a particular scenario with ' examples ' over another parametrized value e g ' page ' here h proposed solution foreach meta tag at scenario level that has processing implications scenario meta foreach page home orderfood checkstatus cancelorder given i am on the page page when i enter food item in the menu field then i see related food items in the dropdown examples food item related food items pizza cheese chicken bacon fruit salad mangoes strawberry grapes rice brown white fried ,New Feature
ability to enqueue ad hoc stories asynchronously add method to embedder to allow to enqueue stories asynchronously allowing the exposure of the multi threading outside of the embedder methods such as runstoriesaspaths ,New Feature
methods annotated with afterstories are not called if a step is causing a runtimeexception the afterstory beforestory annotations works in this case so i would expect the same for the afterstories annotation here is the setup code code storypathresolver storypathresolver new underscoredcamelcaseresolver story class storyclass this getclass properties viewproperties new properties viewproperties put decoratenonhtml true url codelocation codelocations codelocationfromclass storyclass configuration configuration new mostusefulconfiguration usestorycontrols new storycontrols dodryrun false doskipscenariosafterfailure false usestoryloader new loadfromclasspath storyclass getclassloader usestoryreporterbuilder new storyreporterbuilder withcodelocation codelocation withdefaultformats withviewresources viewproperties withformats storyreporterbuilder format console storyreporterbuilder format txt storyreporterbuilder format html storyreporterbuilder format xml withfailuretrace true usestorypathresolver storypathresolver usestepmonitor new silentstepmonitor useconfiguration configuration configuredembedder embeddercontrols dogenerateviewafterstories true addsteps new instancestepsfactory configuration this new commonsteps new userprofilechecks new capconnectionwrapper new seleniumwrapper createcandidatesteps code ,Bug
output pending scenarios as well as broken when option to break build on pending is selected given i have chosen to break the build on pending scenarios given i have several scenarios some of which are pending when i run the build then i should see the pending scenarios in the output,New Feature
better support for web scenarios as a web developer qa i want to be able to integrate web testing frameworks such as selenium and webdriver we should probably provide a webscenario that developers can extend or perhaps it should be a decorator of a given scenario and make it easier to set up their web based behaviours ,New Feature
html based scenario reporting html based scenario reporting should generate reporter events in html format aggregate and render reports in html as well as other formats in a collective view for story results allow styling via css of all rendered reports,New Feature
allow steps dependencies to be composable via picocontainer in acceptance integration tests is often common to have a lightweight container pico spring guice etc to configure the tests with a container supported steps instance should be composable either via constructor or setter dependency injection with components configured in the container each container support will be contained in a separate optional module we start with pico support with other containers to follow ,New Feature
candidate step should support generic parameter conversion it is quite common to have step parameters which are csv of strings or numbers the candidate step should support them as it does with strings and numbers more in general it should generic and injectable parameter converters that allow users to convert objects from a string representations that make sense in the scenario domain ,Improvement
can not find the persistence xml file running the sceanario from either eclipse or intellij the persistence createentitymanagerfactory party test finds the persistence xml file just fine and everything works however running it via the maven plugin and it ca n't find the file at all i suspect this is a classpath issue since the persistence xml file is in a meta inf directory and not in the normal classpath i could be wrong though ,Bug
support loading of stories from odt format as a ba i want to be able to write my story in a odt format,New Feature
support comments in plain text scenarios it would be nice to have the ability to add comments in the plain test scenarios if we add any comments the parser thinks they are the continuation of the previous line to have comment support so that all lines preceded by or or whatever get ignored that would be a nice feature ,New Feature
ensure utility methods should be independent of unit testing framework refactor ensure method to only depend on hamcrest and not on the unit testing framework assertions can be done using hamcrest 's matcherassert ,Improvement
scenario keyword should include any separation char e g atm the pattern parser assumes that the keyword scenario is followed by a it is better that any separation char to be part of the keyword configured in keywords scenario so it can be configured and is not hardcorded in the pattern parser ,Improvement
support multiple test frameworks currently we support junit x as the test framework to run scenarios via the test annotation we could easily extend support to multiple frameworks including junit and testng the cleanest approach would be to rename abstract scenario to junitscenario and pull up a scenario interface since junit x jar includes the classes support for junit would simply require extending testcase and having a run method that starts with test ,Improvement
should not require a space before a new line currently i have a space after the ' when ' line in multiline steps eg given a grid that looks like there 's a space after this line should be able to work without the space ,Bug
issue dddd,Bug
incorrect uploaded filename on windows ie uploading an archive with ie fails because the uploaded file name contains the full path this is due to the different behaviour to commons upload fileitem depending on the browser the uploaded file name needs to be stripped of any path prefix if present ,Bug
should be able to have multiple scenarios in a story should be able to detect multiple scenarios in a story file split on the first given ,New Feature
auto generate method stubs for pending steps with no parameters auto generate method stubs with no parameters the steps such as given there is a flight and there is a customer when the customer books the flight then the customer is shown on the manifest would generate java methods like this given there is a flight pending public void giventhereisaflight given there is a customer note ' given ' even though story line is ' and ' pending public void giventhereisacustomer when the customer books the flight pending public void whenthecustomerbookstheflight then the customer is shown on the flight manifest pending public void thenthecustomerisshownontheflightmanifest if pending annotated methods are already matched the methods should not be re generated ,Improvement
i n keywords as proposed by emerson macedo on dev list it would be useful to have keywords for different languages pre configured an i nkeywords that reads keywords from i n resource bundles for different locales should do the trick we can provide i n bundles for the most common locales in our core jar very small overhead in terms of size and users can add or override them as needed the localisation should be done when instantiating the keywords class so it only happens once ,Improvement
need really great javadoc for all injectable configurable classes thanks to michael for pointing this out,Improvement
only output broken scenarios given i have many scenarios some of which are broken given i choose not to output working scenarios when i run the build then i should only see the output from broken scenarios,New Feature
allow browsing content of uploaded archive at the moment only the presence of the uploaded archive file is displayed in the data files view it would be useful to browse the content of an uploaded archive this would also allow user to verify if the unzipping unarchiving has been successful ,New Feature
allow both relative and full path views for file contents useful when the relative path view may fail for some reason ,Improvement
add selenium stepsconfiguration and stepmonitor add a selenium extension of stepsconfiguration that uses a seleniumstepsmonitor allowing to decorate a given stepsmonitor to provide link to current scenario in selenium context on performing step public void performing string step string context seleniumcontext getcurrentscenario br step selenium setcontext context delegate performing step ,Improvement
make default converter classes publicly accessible and allow configuration of number format make the default converters in parameterconverters public so they can be accessed and possibly overridden make the number format in numberlistconverter configurable and defaulting to numberformat getinstance ,Improvement
givenscenarios as someone writing scenarios i want to be able to use another scenario as a given so that i do n't have to write big long scenarios not sure how this would work at the moment we can get around it on the code side i 'm guessing we 're looking for something like given the glider where the glider is a scenario file what would we do if the glider had scenarios in it throw an exception maybe ,New Feature
i n keywords resource bundle not found by ant task resourcebundle needs to use the caller 's classloader when used with ant ,Bug
improve regex based scenario parsing provide an alternative implementation of scenario parser that does not suffer from regex stack overflow issue ,Improvement
add support for bigdecimal and biginteger parameters posted by gerard meszaros on wiki we had trouble using numbers with decimal points in our specs because we were dealing with money we tried declaring parameters as bigdecimal but could not get this to work it should be possible to do this out of the box with no extra effort as it is a pretty common need biginteger should also be supported ,Improvement
custom converters as a developer i want to provide converters for my scenarios so that i can convert from a string to anything that can be represented as a string eg a grid an image etc ,New Feature
scenario 's in the default package cause nullpointerexception i 'm playing around with jbehave and encountered the folloing nullpointerexception testcase testscenario heyheymymy caused an error null java lang nullpointerexception at org jbehave scenario parser underscoredcamelcaseresolver resolve underscoredcamelcaseresolver java at org jbehave scenario parser classpathscenariodefiner loadinputstreamfor classpathscenariodefiner java at org jbehave scenario parser classpathscenariodefiner loadscenariodefinitionsfor classpathscenariodefiner java at org jbehave scenario abstractscenario runscenario abstractscenario java at org jbehave scenario junitscenario runscenario junitscenario java at org jbehave scenario junitscenario testscenario junitscenario java i 've enclosed a patch for you consideration ,Bug
file paths need to be normalised to use ' ' file contents display and viewing fails on windows because paths use ' ' for path separator normalising paths to use ' ' in place of ' ' will make behaviour cross platform ,Bug
improve documentation posted by gerard meszaros on wiki there seems to be a large gap between the minute tutorial and the detailed technical documentation javadoc this gap created a lot of frustration each of the following issues may for all we know have good solutions in the product we just could n't find them the minute tutorial seemed to leave out a bunch of important stuff we could n't get the example to actually compile and run until we discovered this the installation information was non existant incomlete there was no mention of the need to have hamcrest all jar installed so we could n't code the equalto in the ensurethat the use of static imports to allow these methods be referenced without class names on front should be highlighted in the example the link to the examples which we are encouraged to review is broken when running scenarios with pending steps the tests still run green the documentation does say this can be changed but we were unsuccessful at doing it it seems to be rather involved and or voodoo it would be good to have a very clear description of why it considers pending steps as green and how to cause the pending steps to fail the tests in various environments e g eclipse java ,Improvement
aliases for steps we would like to be able to introduce aliases for steps eg given a width x height grid aliases a grid of width by height a width by height grid ,New Feature
story narratives given a story file with several scenarios given the story has a narrative when i output the scenarios then i should see the narrative,New Feature
allow output patterns to be overridden and localised in printstreamscenarioreporter cristiano gavi o requested on list it would be useful to have printstreamscenarioreporter to allow overriding of the event output patterns also useful is the ability to allow full i n of reporter messages e g pending not performed failed ,Improvement
support multiple candidatesteps instances in stepdoc generation make stepdocgenerator contract more generic to support a vararg of candidatesteps instances in line with other jbehave services also add stepdocs for beforescenario and afterscenario steps ,Improvement
unit test runners should decorate exceptions a bit more clearly somewhere deep down in the runscenario logic you could benefit from a try catch throwable wrap rethrow the wrapping exception could add textual information on the step that is failing catch throwable because you 're not just catching assertionerrors you 're catching selenium timeouts ,Improvement
pending steps optionally break the build given a scenario with pending steps given i choose to break the build on pending steps when i run the scenario then my build should break,New Feature
unarchived files are empty regression introduced when moving to commons compress the test only verified the existence of the file not its content as well as it should ,Bug
support annotated named parameters in steps methods currently steps are matched on the basis of their natural order non sequential parameter matching is a pre requisite to support scenario templates see jbehave ,Improvement
convert ant build to use ivy for dependencies we currently have a lib directory with various subdirectories containing a number of dependent jars as we add more adapters spring pico test ng this is going to get more complex ivy has a similar dependency resolution model to maven by migrating to ivy we can simplify the build and remove the dependent third party jars from the repository ,Improvement
story titles given a story with several scenarios given the story has a title when i run the story then i should see the title in the output,New Feature
table examples include antony and other fitnesse concordion users would like something along these lines given a user fred bloggs with username fbloggs and password pa word when fbloggs logs in with password pa word then the page should say welcome fred bloggs other examples include name username password attempted message jane brown jbrown f bble f bble welcome jane brown terri smith tsmith w bble w bble incorrect username or password terri smith tsmith w bble w bble welcome terri smith fred bloggs fbloggs pa word password incorrect username or password where the table headings are the same as the parameters in the various steps reckon this could be done either by using paranamer or by catching the parameter names in the steps which we do n't do at the moment should n't be too hard will look at it over the weekend ,New Feature
allow running of multiple textual stories using a single java entry point in order to avoid the need to define a java class for each textual story as a story runner i want to be able to run multiple textual stories from the same java entry point provided all stories use the same storyconfiguration and the same candidatesteps ,New Feature
scenario class lookup fails on windows the lookup of scenario class names via the includes pattern such as ' scenarios java ' fails on windows because the paths retrieved use ' ' as package separators in place of ' ' will most likely require the need to normalise paths to use ' ' ,Bug
resourcefinder a common requirement is to look resources in scenario steps either from classpath or from filesystem a utility class that abstracts i o lower level code is useful in keeping with dry principle ,New Feature
build is n't running the scenarios ryan has sent me a patch for this ,Bug
steps class ca n't depend on a library with scope test scope in pom xml in my steps implementation i use an external library in my pom xml this is dependency is declared with scope test scope jbehave maven plugin is not able to find this library please run the attached project as mvn clean integration test dlib scope compile info running scenario binil scenarios myscenario info build successful mvn clean integration test dlib scope test info jbehave run scenarios execution run scenarios listed info error build error info info failed to instantiate scenario ' binil scenarios myscenario ' embedded error the scenario ' binil scenarios myscenario ' could not be instantiated with class loader org jbehave scenario scenarioclassloader urls users binil work jbehave bug report target test classes users binil work jbehave bug report target classes org apache log j logger this forces me to declare the dependency in my specific case jetty and dbunit as scope compile scope in my pom xml which means all users of my project needs to get this library as a transitive dependency i would like to avoid that ,Bug
candidate steps should be aware of the method annotation type when matching textual steps candidate steps should be aware of annotations given when and then and distinguish pattern steps arising from different annotations at present there is no such distinction and can lead to very confusing behaviour example given foo named name public void givenfoo string name when foo named name is created public void createfoo if i have a scenario like this scenario do stuff given xyz when foo named bar is created then the when can match the givenfoo method which gets passed bar is created as parameter this unexpected behaviour due to the implict uniqueness required of the matching pattern across all annotations causes randomness in test execution sometimes it works sometimes it does n't it would be better if the different annotations where treated differently in the matching of patterns so that when i write given when then in the scenarios they will match corresponding given when then methods ,Improvement
bug recognising step with content starting with given when then and when i have a scenario where my steps contains words starting with given when then and the scenario parser just ignores them eg then the page should display name anderson anderson starts with and so it does n't recognise i 've made a couple of changes on the patternscenarioparser to fix it and i am sending to you cheers alexandre martins ,Bug
add monitoring to archivingfilemanager a pluggable filemonitor interface with printstream based and silent impls to allow monitoring of runtime events ,Improvement
generate stepdoc from annotated methods of candidatesteps instance given a candidatesteps instance we want generate the list of annotated candidate steps available to scenario writers with list of steps patterns and aliases ,New Feature
single without name are allowed the regexp in dollarsteppatternbuilder allows for empty markers in the match w w z should the marker not at least have or n chars of length ,Bug
data file view urls need to escape non valid characters when using the default java io tmpdir as upload directory on certain platforms the directory path may contain invalid url characters that need to be escaped ,Bug
allow scenarios to run in batch mode currently scenario fail in fail fast mode unless the ignorefailure flag is enabled a batch mode can often be useful to enable long scenario builds to run through and to be have a summary batch failure at the end of the execution batch mode becomes more useful if coupled with ignorefailure when the user want to generate a full report of scenarios run including any failures ,Improvement
allow viewing of unarchived file contents currently the archive content can be listed as file paths in some case it may be useful to view the actual contents of the unarchived files ,New Feature
newline escape has the wrong order of n r candidatestep value replaceall n r n system getproperty line separator must be value replaceall n n r system getproperty line separator ,Bug
maven plugin ca n't identify scenario classes in src test java i have the jbehave maven plugin configured with test scope in the plugin was able to pick up the scenario classes from src test java but in it fails to please try running the attached maven project with different djbehave version settings to reproduce the error mvn djbehave version clean integration test info jbehave run scenarios execution run scenarios listed info running scenario binil scenarios myscenario mvn djbehave version clean integration test info jbehave run scenarios execution run scenarios listed info error build error info info failed to instantiate scenario ' binil scenarios myscenario ' embedded error the scenario ' binil scenarios myscenario ' could not be instantiated with class loader org jbehave scenario scenarioclassloader urls users binil work jbehave bug report target classes ,Bug
url based storyloader as a story developer i want to load stories via urls not necessarily in the classpath this can be used e g to retrieve stories from wikis ,New Feature
does n't find scenarios with numbers in the file name cells with neighbours are born cellswith neighboursareborn throws scenarionotfoundexception cells with neighbours are born works ok but should be able to do either ,Bug
improve javadocs while jbehave code is quite self explanatory a more exhaustive javadoc would be beneficial to the end user especially of the non default features and configuration options ,Improvement
data archive file content should be displayed using relative paths the data archive file content should be shown using relative paths to be more readable on some systems e g windows the path of the java io tmpdir can be quite long ,Improvement
allow scenarioclassloader to instantiate scenarios using default constructor currently all scenario classes need a constructor with a classloader parameter required by cli runner with maven and ant while using core only it is typically not required so scenarioclassloader newscenario should support a varargs of parameter types which also allow for no parameter types to instantiate using the default constructor it is then up to the caller to use the appropriate parameter types ,Improvement
jbehave configuration classes i 'm starting to find that there are multiple different things i might want to do and the dependency injection mechanism is n't really working as well as i 'd like for this it would be nice to produce a configuration that 's easy to set up and use that for everything we could then have different ways of configuring jbehave eg environment driven settable null so you have to specify everything yourself etc going to have a play with this driving it using the broken scenarios only btw every time i get a broken scenario or error output story i 'm driving it by actually breaking a story you wo n't see these broken stories checked into the build but it 's easy enough to replicate yourself ,New Feature
storyrunner methods should use behaviourlistener instead of outputstream storyrunner methods should not be coupled to outputstreams use behaviourlistener instead the methods using outputstream should be deprecated in favour of behaviourlistener with plaintextscenariolistener as the default impl refactor requires methods to be added to behaviourlistener interface void printreport boolean hasbehaviourfailures ,Improvement
refactor storyrunner to depend on storyloader storyrunner should use storyloader to load stories ,Improvement
only parentheses are escaped in dollarsteppatternbuilder dollarsteppatternbuilder escapes only of all regexp characters leading to failing patterns when applied later or to patterns matching stuff that is not intented other regexp chars that should be escaped ,Bug
need to be able to set order of steps for matching we have run into some difficulty declaring steps that have similar wording such that the matching was incorrect for some of our scenarios for example we have a line from of scenarios that looks like this and the table testtable with test id of foo has exactly test id of bar we want this line to match on the following step given the tablename with wherecolumnname of wherecolumnvalue has exactly selectcolumnname of selectcolumnvalue but instead the match is always occuring on this step given the tablename with wherecolumnname of wherecolumnvalue has selectcolumnname of selectcolumnvalue where selectcolumnname gets interpreted as exactly test id can we have an annotation that indicates the order by which the matching occurs that way the first step in our example would always get compared first to our example input line instead of step for example something like this order given the tablename with wherecolumnname of wherecolumnvalue has exactly selectcolumnname of selectcolumnvalue order given the tablename with wherecolumnname of wherecolumnvalue has selectcolumnname of selectcolumnvalue ,Improvement
i would like to add priority to my scenarios i would like to be able to add priority to my textual scenarios and should be available to the storyreporter this priority is used to tell in what order the different scenarios should be implemented e g if in storyreporter public void beforescenario string title is changed to public void beforescenario string title int priority the priority can be used to create a visual report e g in html the priority can also be used to raise warnings if a high priority scenario is pending while there is activity on scenarios with less priority ,New Feature
extract candidatesteps interface extract candidatesteps interface from steps class so to allow composition over inheritance ,Improvement
support named parameters in steps methods via paranamer named parameters are supported but what about real parameter names via paranamer jbehave delivered the annotation based equiv ,New Feature
add ant task integration add ant integration layer to run scenarios via ant tasks ,New Feature
use commons compress for zipfilearchiver,Improvement
 beforescenario and afterscenario as a developer i want to be able to reset my state after each scenario in a multi scenario story so that i can make my scenarios independent ,New Feature
sort out the website for jbehave examples full documentation download links etc ,New Feature
should be able to title scenarios given a scenario title before a scenario when i run the scenario then i want to see the same title appear in the output,New Feature
file upload failures in web runner should be more informative failures to upload files in web runner should be more informative e g the cause of the failure should be shown common failure cause is that the use tries to upload an archive whose unzipped directory structure already exists on the filesystem some os do not allow overwrite by default and the upload action will be shown as failed even though the archive has been uploaded but not unzipped ,Improvement
behaviourrunner constructs should use writer instead of outputstream as in jbehave deprecating constructors with outputstream in favour of writer which is ultimately passed to the listener when running the behaviour verification add default constructor which uses new printwriter system out and context classloader ,Improvement
support ' and ' after given when or then should be able to do given a context and another context when an event and another event then an outcome and another outcome ,New Feature
undoable steps sometimes when we set up a context or cause an event to happen it 's nice to clean up any changes so that we do n't affect other tests running no idea how to make the undoable work but does n't stop me wanting it ,New Feature
eclipse ca n't find the test to run when it 's in jbehave 's jar this works fine when we have the source available is there a way of including the source for scenario in the jar to get eclipse to notice that there really is a test ,Improvement
add unpack view resources goal to maven plugin a goal to unpack the resources to the view directory the main advantage over the maven dependency plugin is the ability to derived the view directory location from the configured storyreporterbuilder accessible via the embedder the resources are configured as normal project artifacts and can be filtered based on the resource dependency type and artifactids via properties resourcetype and resourceartifacids which default to zip and jbehave core jbehave site resources resource content can optionally be filtered based on the resourceincludes excludes properties ,Improvement
creation of a new parser to support the tracking of line numbers in error reporting attached is a patch for jbehave the main change is the addition of a new parser its based on eclipse jface which means we can track line numbers in error reporting it can also be re used for syntax highlighting in an eclipse editor jface requires some eclipse libraries so these are new dependencies which still work even though we 're not running in an osgi container the parser is also very fast compared to the current regex based parser the longest running test was s for the previous parser and now its just s in scenarioparserbehaviour we 've written some tests for the default configuration of junitscenario they fail with the current parser but pass with the new which is able to throw a new parseexception for each type of problem we 've added test to candidatestepbehaviour java that currently fails doug tried fixing it by changing the examplestable to be backed by a linkedhashmap which means that the arguments are automatically in the correct order but this did not work for other examples and could n't figure out how to make it work so the test is currently broken we 'd need help to fix this further proposed changes would improve the detection of problems such as not having enough columns in the examples section to cover all the required variables having more columns than required in the examples section checking the order of statements e g ensure a when comes after a given allowing boolean 's for parameters the first are quite difficult as it involves a good knowledge of the candidatestep class ,Improvement
add beforestories afterstories annotations it is sometimes useful to invoke setup teardown methods only once before and after a collection of stories e g to setup and teardown an external service the annotations before afterstories would complement annotations before afterstory run before and after each story and before afterscenario run before and after each scenario ,New Feature
add inherit property for array valued annotation property to control inheritance behaviour as explained in jbehave it 's useful to control inheritance behaviour by default inheritance behaviour is true meaning annotationfinder goes up the inheritance tree and collects array values for a given annotation property this inheritance behaviour can be inhibited by setting the property inherit propertyname false,New Feature
storyreporterbuilder method names should be more consistent adopt with convention for all builder methods that specify the build specification ,Improvement
spaces in path breaks loadfromrelativefile loadfromrelativefile function loadstoryastextfails to unescape urls passed into the constructor that have escaped characters like for a space as a result the story files can not be found test case snippet follows add it to storyloaderbehaviour java also need to add folder foldername has spaces to jbehave core src test java org jbehave core io stories and copy mypendingstory txt into it also including revised code snippet for loadstoryastext function i did n't immediately see a way to do it without either checked exceptions or deprecated functions ex urldecoder decode string not sure if invalidstoryresource was the right exception to convert to code title storyloaderbehaviour java test public void shouldloadstoryfromrelativefilepathswithspace throws malformedurlexception urisyntaxexception given string storypath mypendingstory txt string storyastext given my step java net url url codelocations codelocationfromclass mypendingstory class java io file folderwithspacesinname new java io file url touri getpath org jbehave core io stories foldername has spaces java net url urlthathasescapedspaces folderwithspacesinname touri tourl assertthat folderwithspacesinname exists is true when storyloader loader new loadfromrelativefile urlthathasescapedspaces then assertthat loader loadstoryastext storypath equalto storyastext code code title loadfromrelativefile java public string loadstoryastext string storypath list string traversalpaths new arraylist string string locationpath try locationpath new file urldecoder decode location getfile utf getabsolutepath catch unsupportedencodingexception e throw new invalidstoryresource storypath e for storyfilepath traversal traversals string filepath locationpath replace traversal toremove traversal relativepath storypath file file new file filepath if file exists return loadcontent filepath else traversalpaths add filepath throw new storyresourcenotfound storypath traversalpaths code ,Bug
refactor numberconverter to use injectable numberformat refactor numberconverter to parse numbers using injectable numberformat instead of number classes ' valueof methods locale specific formats are supported via numberformat getinstance locale while defaulting to numberformat getinstance also refactor numberlistconverter to use numberconverter with provided numberformat again defaulting to numberformat getinstance ,Improvement
hudson plugin to import jbehave reports as a developer i want to see a hudson build test result showing failed scenarios so that i can see what broke my build as a developer i want scenarios containing pending steps and no failed steps to appear in build test result not as a fail or pass so that i can see what is missing from a story as a manager i want to see individual scenarios in the build graph so that i can monitor progress of stories as a manager i want to see hudson build trend graph containing failed pending and successful scenarios so that i can monitor the stability of my build,New Feature
html report numbers could be more tabular guice stories simple guice example scenarios failed steps successful pending not performed failed ignorable i n stories fr trader is alerted of status scenarios failed steps successful pending not performed failed ignorable i n stories it trader is alerted of status scenarios failed steps successful pending not performed failed ignorable the output formats as a string there are some numbers is parens these should really be td numbers td there should also be totals at the bottom of the set and column headings at the top ,Improvement
count scenarios in a story separately from those in the givenstories poststorystatisticscollector should be counting scenarios in a story considering whether it 's a givenstory or not it should be displaying the number of scenarios executed in the story not including int the count those executed in the givenstories ,Improvement
 beforescenario failures prevent the story reporting to complete failures in beforescenario methods should be treated as normal step failures and allow the scenario to run while not performing the steps and to complete the story reporting this also allows the stats to be collected and reported ,Bug
groovy bindings for steps adriano bonat thoughtworker suggests that invoking step methods written in groovy would be cool ,Improvement
consolidate configuration objects merge story and steps configurations into single configuration object that now use the builder pattern the embedder controls should be accessible from the main configuration object in java but should be overridable by the controls specified in the upstream entry points such as maven or ant ,Improvement
story reporter in the xml format does not include the story narrative in the story title xml attribute xml report builder produces a report with a empty title attribute of the story elment if the executed story contains a narrative e g story title if the executed story does not contain a narrative then a empty title attribute is still produced i would expect a story narrative to be contained in the title attribute if the story provides or no title attribute should be provided if the story contains no narrative attached testcase has only been tested on the x versions,Bug
springstepsfactory should ignore beans with undefined type and that fail instantiation if you use abstract beans the annotation processor blows up i 've included a patch its basically a try catch around the getbean step test data enhanced to recreate problem ,Bug
allow examplestable to be loaded from external resources at times it may be convenient to load the content of an examples table from an external resource be it from classpath or url the default resource loader will be the url based as it does not require any additional configuration unlike the classpath based that requires the class from which to derive the classloader the examplestableconverter should be able to handle both cases textual table input or resource path input via the use of an examplestablefactory the regexstoryparser should also allow the use of the examplestablefactory ,Improvement
allow scenarios following a failed scenarios to be skipped in a single story allow option to skip scenarios following a failed scenario in a single story ,Improvement
allow filtering of stories and scenarios based on meta info once we have meta info available in our stories and scenarios jbehave we can use this info to filter what is being run ,New Feature
storyfinder should be responsible for finding story paths and runnable stories storyfinder should be a facade for finding in different guises it should allow the finding of textual story paths from a base search dir using include exclude patterns it should allow for prefixing all the paths founds with a given prefix in other to easily created url based paths all story paths should be normalised paths with ' ' as separator it should allow the finding of java sources and creation of corresponding runnablestory instances using a given embedderclassloader ,Improvement
improve tabular story report feedback from colleagues ' first use of tabular story report introduced in jbehave the layout is too dispersive too much white space and table runs away out of page unnecessary or misleading repetitions of column headers such as successful and failed more difficult to spot failures only numbers are colour coded suggestions include have a top level multi column row with headers scenarios and steps use logos with hovering text for successful failed pending etc colour code in red the story name in case of failure,Improvement
move step creation concern from steps to stepcreator move step creation concern from steps to stepcreator refactor candidatesteps interface methods to make clearer their intended use ,Improvement
 afterstory method is not invoked is step parametrisation fails i 've attached a stripped down example to demonstrate the problem notice that in the failure case the parameter in the table is lower cased causing it to mis match the parameter in the scenario which is camel cased my original email for context of the testers accidentally checked in a partial change list causing jbehave to throw runningstoriesfailedexception and storyresourcenotfound exceptions in and of itself this is n't a big deal however we are calling webdriver close in afterstory this closes the browser window in the case of a runtimeexception i does n't look like afterstory is called which leaves the browser running since our tests need to share a profile and only instance of the profile may be run at a time this causes future tests to hang until the browser is closed manually in a continuous integration environment this is non trivial my question in the case that jbehave throws a runtimeexception is there a way to trap it so that we can close down the browser mauro 's response otoh all exceptions in fact throwables should be caught could you create a sample project reproducing problem and attached it a jira issue please try against latest beta which has just been cut ,Bug
throw exception if parameterconverters can not convert to the desired type currently if parameterconverters ca n't convert to the desired type it just returns the parameter as a string this then falls over in some unrelated code later in the process when it ca n't call the step because of mismatching parameter types to aid in debugging this it should throw an exception detailing the type that it ca n't convert to so it can be caught early ,Improvement
allow processing of system properties before stories are run some systems used to implement steps may use system properties to control or override their behaviour e g webdriver system properties to override the default location of the browsers while system properties may be set at command line via d parameters it is useful to be able to set them via the embedder and set them before the stories are run the system properties should also be configurable via ant or maven ,Improvement
rename runnablestory to embeddable and remove redundant methods the name runnablestory has become outdated and does not reflect the fact that we can run multiple stories or even have access to other embedder functionality embeddable is a more generic name that 's better suited the methods that should remain in embeddable are void useembedder embedder void run the other methods that were previously in runnablestory can live in abstract implementations such as configurableembedder which junitstory extends and allows the configuration of the embedder for execution of a single story ,Improvement
add support for webdriver api add support for the webdriver api new feature of selenium the support for the webdriver api will complement the support for the selenium api featured in both selenium and ,New Feature
failure to execute all scenarios within a story given a story with scenarios the nd of which has givenstores if the first scenario fails the second scenario will not execute fully execution will finish when it 's first givenstory finishes ,Bug
fix rendering of newlines in examplestable as parameter in html when outputting example tables as parameters in html the newlines between rows are ignored ,Improvement
remove dependency on javassist by using standard jdk annotation functionality use of javassist is typically done for access to non runtime retention annotations or for annotation parsing over a large set of classes when you do n't want to load the class we do n't have those use cases and thus can eliminate the javassist dependency in annotationfinder new version of annotationfinder is attached that seems to work i was n't sure if getannotation should look at interfaces and or superclasses not needed if we appropriate add the inherited to our annotations jbehave core pom xml also changed to remove the dependency ,Improvement
add story mapping with swimlane view in order to get visibility of themes epics as a release planner i want to be able to map stories by meta filters using story maps allows us to group stories of cross cutting concerns using filters on meta info jbehave a swimlane view with lane per filter would allow a clear and concise view ,New Feature
allow leading and trailing spaces to be preserved in example table cells in jbehave core all leading and trailing spaces are removed from example table cells for example when accessed through the examplestable api the following table code a b c x y z code becomes code a b c x y z code leading trailing spaces were not removed for jbehave core versions older than so it might be a regression cause when this was fixed at least for me it would be nice to be able to use example tables containing cells with leading trailing spaces ,Improvement
allow system property to ignore failures in maven please add the ability to specify a system property for the mojo to ignore failures in our environment we have a qa department who require the final artifact installer even though jbehave and junit tests fail if our continuous build environment does n't complete the build because of a test failure then these people can not test the product why not just change the pom xml because our development department depends on it failing why not just create a profile we have many projects and the administration in getting profiles created is much more effort than just using a system property normally i would just send a patch but corporate life eats my time like the cookie monster ,Improvement
ensure examplestable preserves ordering of columns currently the exampletable does not guarantee order of the columns since the row is returned as a hashmap in some cases the preserving the order of the textual table may be useful in the implementation of the step using linkedhashmap would preserve the ordering at a small cost of performance ,Improvement
support htmlunit webdriver in propertywebdriverprovider add browser enum html to support htmlunitwebdriver via value html for property browser ,Improvement
jbehave eclipse plugin if i will be included in jbehave contributors team i 'll be happy to transfer copyright to the jbehave project you can find the initial plugin sources in the attached zip i will answer to any question about plugin development specificatons ,New Feature
allow pluggable strategy to resolve file paths from story location fileprintstreamfactory should allow a pluggable strategy to resolve file paths for directory and name of files for each story location ,Improvement
separate step matching from step creation in candidatestep candidatestep is becoming too big and would benefit from a separation of concern between step matching and creation stepcreator interface should be renamed to stepcollector to better express its function delegate the step creation concern to a stepcreator class ,Improvement
rename failure handling strategies and implement as standalone classes errorstrategy and errorpendingstrategy are somewhat ambiguous better to name them failurestrategy and pendingstepstrategy their implementations should be refactored to be standalone classes rather than anonymous classes as it allow for more control on the part of the user to override and extend the strategy ,Improvement
ensure same instance of embedderclassloader is used to find and run stories from ant or maven i 'm getting the following stacktrace when using the serviceloader infrastructure in my jbehave steps while running under the maven plugin i think this is caused by using different class loaders to find the stories and then to execute them it starts working if i patch createclassloader in abstractembeddermojo to cache the created classloader and to reuse that every time java lang classcastexception at java lang class cast class java at java util serviceloader lazyiterator next serviceloader java at java util serviceloader next serviceloader java at com salerio idm service adaptorsmodule configure adaptorsmodule java at com google inject abstractmodule configure abstractmodule java at com google inject spi elements recordingbinder install elements java at com google inject spi elements getelements elements java at com google inject injectorshell builder build injectorshell java at com google inject injectorbuilder build injectorbuilder java at com google inject guice createinjector guice java at com google inject guice createinjector guice java at functional basefixture initializeinjector basefixture java at functional basefixture initialize basefixture java at bdd fixedincomesteps init fixedincomesteps java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org jbehave core steps stepcreator beforeorafter run stepcreator java at org jbehave core steps stepcreator perform stepcreator java at org jbehave core embedder storyrunner finesofar run storyrunner java at org jbehave core embedder storyrunner runsteps storyrunner java at org jbehave core embedder storyrunner runstorysteps storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder embedder runstoriesaspaths embedder java at bdd mystories run mystories java at org jbehave core embedder embedder runstorieswithannotatedembedderrunner embedder java at org jbehave mojo runstorieswithannotatedembedderrunner execute runstorieswithannotatedembedderrunner java at org apache maven plugin defaultpluginmanager executemojo defaultpluginmanager java at org apache maven lifecycle defaultlifecycleexecutor executegoals defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalwithlifecycle defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoal defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalandhandlefailures defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executetasksegments defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor execute defaultlifecycleexecutor java at org apache maven defaultmaven doexecute defaultmaven java at org apache maven defaultmaven execute defaultmaven java at org apache maven cli mavencli main mavencli java at org apache maven cli compat compatiblemain main compatiblemain java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org codehaus classworlds launcher launchenhanced launcher java at org codehaus classworlds launcher launch launcher java at org codehaus classworlds launcher mainwithexitcode launcher java at org codehaus classworlds launcher main launcher java ,Bug
collect successful scenarios stat and render in story reports currently only the number of run scenarios and failed scenarios are collected collecting also the number of successful makes it easier to highlight in green just the number of successful ones now we are highlighting the total number of scenarios in green when there are failures and this is confusing ,Improvement
add selenium webdriversteps to capture save screenshot upon failing scenario add instances of selenium webdriversteps to capture save screenshot upon scenario failure the different names reflects the difference in the selenium and webdriver apis ,Improvement
method useviewgenerator in configuration does not honour the builder pattern need to make the method return configuration,Improvement
upgrade to use syntaxhighlighter for reports amongst other things it does not use flash and ie would stop winging ,Improvement
allow story controls to be configurable via annotations the storycontrols configuration element should be configurable via annotations configure or usingguice pico spring ,Improvement
givenstories and examples keywords should only be parsed after newline in line with the requirement of steps keywords appear at beginning of line the givenstories and examples keywords should be treated similarly this would allow the corresponding portions of the scenario to be commented out by on demand ,Improvement
contextview for communicating the current context selenium api has a nice feature selenium setcontext string which shows up in the selenium server window this feature is not available to webdriver no separate server window running anymore by having a contextview abstraction we can then provide alternative impls such as a swing based panel ,New Feature
allow comments in tables we 'd like to be able to include comments in tables to make scenarios clearer but jbehave refuses to read in the lines after the comment in this example leading to rows being created in the resulting examplestable given the documents a b c i 'd like to have a comment here i 've tried a small test with and of jbehave but they do n't fix the problem ,Improvement
mark start end of all parameter values in step creation mark parameter values with start and end tags in all steps not just the ones whose value come from the examples tables this allow the markup of the parameters in the reporting e g to highlight with different color in html reports ,Improvement
define commom jaxb interfaces for systems to provide features and its stories and scenarios to a jbehave runner there are many systems where stories could be writed stored and mantained some example are confluence using its excelent versioning handle rational rsa sparxsystems enterprise architect both as scenarios inside usecases features uml elements way todo that integration would be jbehave to provide commom classes annotated with javax xml bind annotation xml where developers could create jaxb services that will get data from whatevers system and serve features its stories and related scenarios objects for jbehave as xml ou json ,New Feature
spring security example contribution attached is a zip of a spring security example which uses jbehave with spring security spring test and junit not the jbehave ant or maven plugins this code is meant to go along with the jbehave presentation found at i brian repko transfer copyright to jbehave team for this code ,New Feature
propertywebdriverprovider should allow users to configure each webdriver instance via a factory method allow each webdriver instance to be user configured by extending a separate method e g createfirefoxdriver ,Improvement
rename embeddedstory flag to givenstory in storyrunner storyrunner supports running givenstories so the name of the boolean flag should be renamed to givenstory to avoid confusion with storyembedder ,Improvement
add to storyfinder method to find paths by url code location and single include exclude patterns a very common use case is to look up paths using a url code location moreover the single include exclude pattern is also by far the most used ,Improvement
cache container for ioc di integration usingspring applies to pico and guice i would assume versus the use of spring test contextconfiguration does not cache the container and thus recreates it on every run use of contextconfiguration caches the container with a key made up of the location string array you can find this code in spring test in the testcontext class in the getapplicationcontext method enhancement would be to add a method to all the usingxyz annotations related to containers to cache the containers always based on locations ,Improvement
indented scenarios in stories was possible in jb but after upgrade failed in jb a client had indented jb scenarios tabs and or spaces in the scenario files when upgraded to jb and everything else was working for the renamed story files the scenarios were not being executed it seems regex made no match we had breakpoints in place so we could see the beforescenario being invoked but none of the steps when we removed the left whitespace it worked ,Bug
ide console no longer any different to ide w r t console output i 've noticed recently a problem with ide console it or more particularly the ideonlyconsoleoutput class is being ignored if you do a maven run from the command line for a project that uses a normal on jb junit tool chain you can see it put in a strategic throw or loop sys out for the current threads stack trace you do n't have the prerequisite packages in the stack i 've checked yet it still dump to console maybe there is a system out somewhere that is ignore this configuration choice ,Bug
convert story name in report to human readable form another good suggestion from feedback convert trader sells stocks story trader sells stocks,Improvement
allow different storynameresolvers to be used in report generation the current storynameresolver trims everything before the last full stop this is n't always required as sometimes you have full stops in the file name allow a custom storynameresolver to be used instead of the built in underscoredtocapitalized to fix this ,Improvement
find steps page use jbehave core 's stepfinder to allow a simple textarea to cut paste a textual step and to find the matching step patterns and optionally show the corresponding methods in the steps instance it should also show the list of steps instances configured in the application amongst which the steps are searched if no textual step is provided all patterns available should be shown ,New Feature
migrate web runner to use wicket as web application framework wicket shares the same philosophy as waffle embeddable pure java no xml and has a wide community support from users ' point of view the only change would be extend a wicket application class to specify configuration and steps instances instead of a waffle registrar a doc page should help in migrating from registrar to application class ,New Feature
add groovy support starting from adriano bonat 's contribution via github add a jbehave groovy module with extensions of core for groovy specific support similarly to ioc framework extensions guice pico spring initially it will contain a groovystepsfactory to create steps instances from groovy scripts it should also provide support for usinggroovy annotation to specify the groovyclassloader and the groovyresourcefinder ,New Feature
parametrised givenstories givenstories could be parametrised using the same mechanism of the examplestable and the named parameters if a givenstory path has an anchor with a number e g givenstories path to precondition story then the number is assumed to be the row of the examplestable containing the required parameters if present ,New Feature
provide table row values as converted parameters currently examplestable provides the row values as map string string in most cases users will need to convert these values we should provide the row values converted as specified types using the same parameterconverters defined for the step conversion we should also allow for provision of defaults both accessing single value and as a table structure ,New Feature
update maven goals to be compatible with maven maven requires explicit annotation requiresdependencyresolution to resolve dependencies in abstractembeddermojo ,Improvement
there is no and annotation the grammer definition details the availability of a and notation however no annotation exists this may seem trivial but in real terms it is fundamental blocker to writing clear scenarios ,Bug
embedder should be responsible for instantiation of embeddable instances making the embedder instantiate the embeddable instances from the class names using the embedderclassloader rather than the ant or maven entry points allow us to avoid unnecessary instantiation of classes when skip mode is enabled it also minimise further any code logic in the ant maven layers limited to the collection of class names and other configurable parameters ,Improvement
allow before and after scenario steps to be skipped if running a givenstory behaviour now controlled by storycontrols doskipbeforeandafterscenariostepsifgivenstory boolean ,Improvement
add configurable sorting strategies for stories in reports allow stories to be sorted by different configurable strategies alphabetical by success failure criteria by number of scenarios or steps,Improvement
change terminology of report rendering to view generation to avoid confusion change terminology reporting rendering to stories view generation the concept of a collective stories view of the report outputs seems to be less prone to misinterpretation ,Improvement
support composition of steps in order to be more effective in communication and in scenario development as a scenario writer i want to compose steps using existing steps example noformat given customer has previously bought a product noformat could be a composition of noformat given customer is logged in when they put a product in their cart and go to checkout and pay using their registered card and go to the home page noformat need to think about what options are available for the definition of the composition options include annotations step concatenation etc ,New Feature
browser not closing when done by afterstories perstorieswebdriversteps has a before and after stories if there 's a webdriver thrown exception a derivative of runtimee then the afterstores annotated method is not called and as such the browser frame is not closed ,Bug
rename stepresult methods for consistency and clarity some methods in stepresult are not consistent with the reporter methods rename translatedtext string withparametervalues string ensure the parametrisedstep method falls back on the original step if no parametrised step is provided ,Improvement
 given when and then could make the pattern optional in that case the java method that it pertains to could provide the matching expression code given public void auserwithalargebankbalance code would be equiv to code given a user with a large bank balance public void auserwithalargebankbalance code or maybe we could endorse ruby naming conventions for extra capitalization clarity code given public void a user with a large bank balance code obviously this is no good for cases where there are parameters though that could be solved too later with yet more work guilherme silveira 's idea ,Improvement
add getter setter for filepathresolver in springstoryreporterbuilder as noted by pete suggitt the getter setter for filepathresolver is missing from springstoryreporterbuilder ,Improvement
configuration option for non greedy matchers for steps the biggest sore point for my team are the greedy reg ex matchers for step prose this was somewhat solved in another ticket which added a priority field to the annotation however this does not scale well with a large amount of steps it 's unmanageable and a bit ugly to have to worry about a global priority number this problem would be best fixed if the reg ex matcher was simply non greedy a usable solution i think would be to provide a configuration option in the stepsconfiguration to enable this on a side note you may want to consider moving to a feature rich templating language like velocity ,Improvement
allow step level dependencies currently jbehave does not support step level dependencies it may be useful to enable this feature so that steps can be created referencing directly other steps the functionality was suggested in the following thread on the user list ,New Feature
support android webdriver in propertywebdriverprovider add android to the browser property of propertywebdriverprovider the android web driver is a remote web driver implementation and requires a url of the web driver application running on the android device or emulator i have a basic android web driver implementation i have been using while moving my tests over to jbehave i have attached my code in case it may be of any use ,Improvement
springstepsfactory should not try to instantiate abstract beans spring allows the declaration of abstract beans these should be identified via their bean type and not instantiated ,Improvement
add support for meta filtering in story running upgrade to as default core dependency support specification of meta filters in the run story page if meta filters not set it should use the x compatible storyrunner method so users are not forced to upgrade to until they need to that meta filtering is a only features should also be notified on the run story page ,Improvement
default report location determined by location of jbehave jar storyreporterbuilder has an instance field outputlocationclass which is by default defined to be the storyreporterbuilder class object this is then passed into a storylocation object as part of a fileprintstreamfactory constructor storylocation uses the class object to convert to a url thus we are using the location of jar as the default reporting location storylocation should just take a url in its constructor not a class storyreporterbuilder should have either use the outputdirectory touri tourl as the url to pass in or setup a default of new file current working directory in order to pass into storylocation outputlocationclass should be removed ,Bug
make parameterconverters to use builder style paradigm and add dateconverter refactor parameterconverters to be added as builder new parameterconverters addconverter new dateconverter new simpledateformat dd mm yyyy add dateconverter as default converter with injectable dateformat ,Improvement
empty example table row values cause exception given the following example table c c c jbehave fails to parse the table it reports the following error c c c failed java lang indexoutofboundsexception index size the stack trace reads caused by java lang indexoutofboundsexception index size at java util arraylist rangecheck arraylist java at java util arraylist remove arraylist java at org jbehave core model examplestable columnsfor examplestable java at org jbehave core model examplestable parse examplestable java at org jbehave core model examplestable init examplestable java at org jbehave core steps parameterconverters examplestableconverter convertvalue parameterconverters java at org jbehave core steps parameterconverters convert parameterconverters java at org jbehave core steps stepcreator convertparameters stepcreator java at org jbehave core steps stepcreator access stepcreator java at org jbehave core steps stepcreator parametrisestep stepcreator java at org jbehave core steps stepcreator perform stepcreator java at org jbehave core embedder storyrunner finesofar run storyrunner java at org jbehave core embedder storyrunner runsteps storyrunner java at org jbehave core embedder storyrunner runscenariosteps storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder embedder runstoriesaspaths embedder java more parsing the table works fine if the last row contains at least space in of the cells so c c c and c c c works fine ,Bug
storyparser should look for starting keywords only after a newline in some languages e g italian portuguese and spanish the and keyword is translated as a single letter e or y which makes it possible to find in some textual acronym if the acronym ends in that letter the parser will consider it a new step a comprehensive solution would be to require that regexstoryparser identifies the second occurrence of a keyword in scenario text only if preceded by a newline this solution would also allow users to easily comment out steps prefixing the starting work on same line with keyword ,Improvement
improve reporting of failure printstreamstoryreporter and subclasses have the reporterrors flag that prints the failure stack trace this is adequate but a rather crude approach in most use cases we need to report the failure more meaningfully be it an outcome failure or a system failure issues to improve show failure message after step and stack trace after entire scenario only if failure trace flag is set provide an outcomes table that allows to verify multiple outcomes and report them upon failure also ensure that the failure trace reporting is easily configurable via the storyreporterbuilder ,Improvement
bigdecimal parameter conversion fails for numbers with or more significant digits this is because double tostring makes makes a exponential type representation like e ,Bug
 beforescenario executed after lifecycle before step in we 've noticed a change in the order things are executed in beforescenario was executed before lifecycle steps defined in the before section of the story file in beforescenario is performed after the lifecycle step this is output from a demo using jbehave quote performing beforestories demoasteps performing beforestory demoasteps lifecycle step that is executed before scenario in demoa performing beforescenario demoasteps given step that is executed inside demoa scenario a step that is executed inside demoa scenario an outcome checked inside demoa scenario lifecycle step that is executed after each scenario regardless of outcome in demoa lifecycle step that is executed after each successful scenario in demoa performing afterscenario demoasteps performing afterstory demoasteps performing afterstories demoasteps quote we believe this to be in error the symmetry of annotation surrounding lifecycle is lost you end up doing extra before steps since you ca n't rely on your class being reset in beforescenario if the change is intentional please elaborate on the reason for the change attached are the files used no complete project sorry you can easily reproduce the behaviour by adding printouts in the methods of your own favourite project ,Bug
add json output format json format is quite popular today it would be nice to have default json output format,New Feature
jbehave maven plugin failed to run multiple junitstories i have a test project with testrunner classes extending junitstories and the maven build failed with java util concurrent rejectedexecutionexception after some investigation i found the abstractembeddermojo runstoriesasembeddables creates the an embedder and then loads both of the test runners in this embedder then the embedder calls runasembeddables and in this method it calls embeddable useembedder this it means both of the testrunners are ran by this embedder as a result when the embedder completes the first test runnber 's runstoriesaspaths method it calls shutdownexecutorservice and then the second test runner got the rejectedexecutionexception when running stoies ,Bug
steps are marked as pending after the first and step when i have complex scenarios with the use of more then and step jbehave only executes the first and and the others are marked as pending ,Bug
add support for simplified chinese locale add support for simplified chinese locale add i n keywords zh cn properties with zh cn keywords map,Improvement
duration calculation contains a de facto round down storymanager 's runningstory class returns the elapsed duration by the method getdurationinmillis this method multiplies by the class ' own duration getdurationinsecs value the before mentioned method in the same time divides its own durationinmillis value by this divide results tecnically in a round down for example if the original value was the final result will be only sine and this ends up in incorrect duration values of story files as well as wrong total value the storyduration should be extended with a direct getter method what retruns the durationinmillis without modification so the runningstory could use it again without modification ,Bug
make examplestableproperties api public make examplestableproperties api public as it can be used by transformers to perform manipulations with examplestable in a proper way,Improvement
summary report highlights problem with missing stats files we started to get some false positive results from our tests in our framework jbehave and selenium and java the firefox report shows them as having failed the summary report shows them as not having run no stats file the lack of stats file occurs about in every tests so out of our current scripts there are about missing stats files what happens then is that if a failure coincides with a missing stats file then a false positive is given and potentially the build passes despite or more test failures ,Bug
changing the value separator of jbehave i faced a problem while using examplestable of jbehave the default value separator is but my example table has got a character screenshot below ,Bug
provide default constructor for parameterconverters to ensure backward compatibility with reinstate a default constructor removed by jbehave ,Bug
adding new parameter converter for json support adding new feature for json conversion called jsonconverter to be able to use json strings files as a test data which will be automatically converted to java objects dtos when pass this data from story file like examplestableparametersconverter which automatically converts example tables files with example tables to java objects dtos via asparameters annotation when pass it from story file jsonconverter usage example new annotation was aaded like asparameters called asjson jbehave story noformat then actual data should be as datafolder datafile json data or then actual data should be as variable value variable value data noformat java definition noformat then actual data should be as expectedjson data public void checkjsondata final jsondto expectedjson assert expectedjson equals to actual json of jsondto class type noformat java dto noformat asjson public class jsondto private string variable private string variable ,New Feature
add lifecycle scope currently lifecycle steps are implicitly meant to be executed before and after each scenario adding a new lifecycle scope would allow to support the execution of before after steps both at scenario and story level syntax lifecycle scope story scenario before after ,New Feature
maven plugin slf j does n't play nicely together it seems the slf j 's staticloggerbinder does n't play nicely with jbehave 's embedderclassloader when running a business logic that creates a logger without the embedder cl loggerfactory getlogger will provide logback logger assuming it exists on the classpath doing the same with the maven plugin will produce org slf j impl simplelogger instead even trying to force the binding to logback by implementing a static staticloggerbinder as it is suggested in fails it seems the issue was discussed years ago at but no follow up was done attached a simplified project that reproduces the issue ,Bug
support guava directexecutorservice jbehave starting from version depends on google guava library in version samethreadexecutors class in jbehave core uses a guava method moreexecutors samethreadexecutor that is deprecated in version and is removed in newer versions according to the moreexecutors samethreadexecutor javadoc quote deprecated use directexecutor if you only require an executor and newdirectexecutorservice if you need a listeningexecutorservice this method will be removed in august quote the class moreexecutors samethreadexecutor should use newest moreexecutors newdirectexecutorservice instead of the deprecated method ,Improvement
examplestable is not parsed properly when inlined separators are used if examplestable specifies inlined separators and does n't contain default header separator code ignorableseparator headerseparator valueseparator commentseparator n header value code parsing fails with error like code org jbehave core io storyresourcenotfound story path ' ignorableseparator headerseparator valueseparator commentseparator header value ' not found by class loader sun misc launcher appclassloader d c at org jbehave core io loadfromclasspath resourceasstream loadfromclasspath java at org jbehave core io loadfromclasspath loadresourceastext loadfromclasspath java at org jbehave core model examplestablefactory createexamplestable examplestablefactory java at code the root cause is a wrong detection of examplestable code java protected boolean istable string input return input contains keywords examplestableheaderseparator code it does n't take into account possible custom separators,Bug
allow all outcomestable value formats to be configurable currently only date formats are configurable allow configurable formats for all value types dates numbers booleans,Improvement
possibility to substitute steps in templates i added following functionality currently only in the scenario usable we can define templates which will be substituted in the scenario with the keyword giventemplate somelabel this is useful if we have many steps which are the same and therefore would be duplicated and we can not use the parameterized values to fully cover all necessary steps the substitution will take place even before the story parsing is fully completed this means after the story parsing we will have a scenario without knowing that there has been a template more concrete example template do something in the beginning given a step when we do something then something happens scenario giventemplate do something in the beginning when we have done something then we can continue with this which would be resolved to scenario given a step when we do something then something happens when we have done something then we can continue with this this would be a very useful functionality for us feel free to comment and provide ideas for improvement ,New Feature
scenario metadata will not populated in jbehave report we have about scenarios automated using jbehave and we have written a failure scenarios rerun mechanism by fetching scenario meta tags from the jbehave report we were using and there was n't any issue with that but after upgraded to the x we found that meta info is not populating to the report jbehave jbehave the above bugs are already reported for this issue but those in medium priority and open state since this feature is highly important and also we can not downgrade due to usage of latest features reporting this issue in highest priority ,Bug
project created from jbehave needle archetype version does n't compile project created from jbehave needle archetype version does n't compile steps to reprduce code mvn archetype generate b darchetypegroupid org jbehave darchetypeartifactid jbehave needle archetype darchetypeversion dgroupid com company dartifactid someproject dversion snapshot dpackage com company project cd someproject mvn compile error failed to execute goal org apache maven plugins maven compiler plugin compile default compile on project someproject compilation failure compilation failure error tmp someproject src main java com company project mystories java error package de akquinet jbosscc needle injection does not exist error error tmp someproject src main java com company project mystories java error package de holisticon toolbox needle provider does not exist code ,Bug
springstepsfactory handles step instance creation incorrectly causing tests to fail springstepsfactory handles the steps instance creation incorrectly as in the code code java public object createinstanceoftype class type for string name context getbeandefinitionnames class beantype beantype name if type equals beantype return context getbean name throw new stepsinstancenotfound type this code it 's iterating through all the bean definitions and then it tries to figure out the bean type magically to support proxied aop bean instances code java private class beantype string name class type context gettype name if classutils iscglibproxyclass type return aopproxyutils ultimatetargetclass context getbean name return type code unfortunately in case you defined a special bean scope which has some preconditions for example calling a method which is binding some stuff onto the current thread the context getbean name call simply fails as it 's missing in this code there is really no need to do this magic but have a simple implementation for creating the step instance disregarding whether it 's a proxy or not code java public object createinstanceoftype class type try return context getbean type catch nosuchbeandefinitionexception e logger error bean not found for type type e throw new stepsinstancenotfound type this code in this case we wo n't run into the issue mentioned above that we are creating beans where we must not do anything like that also consider a prototype scoped bean the code above creates instances of those classes which is also an incorrect behavior ,Bug
html reports do not display the values in the correct fields of the table for example tables if a field does not contain any values the succeeding field value will take place of this field in the stories html file eg field field field a c in the html file you will find c displayed against field ,Bug
normal scenarios must reset example context normal scenarios must reset example context objects this prevents re usage from steps with default retention level example when using normal scenarios how to reproduce create a feature with normal scenarios store something in context using default retention level example feature as a user i want to perform an action so that i can achieve a business goal scenario scenario description given a system state when i do something and store something in context then system is in a different state scenario second scenario description given a system state when i do something and store something in context then system is in a different state this is related to jbehave ,Bug
provide single configuration point for tabletransformers now there is an ability to set custom tabletransformers for different components but there is no way to set tabletransformers for all components at once the goal of this ticket is to provide single configuration point of tabletransformers that will be used while parsing both scenario and step level examplestable ,Improvement
collision at examplestable values and named parameters with the same name bdd scenario code scenario collision at examplestable values and named parameters with the same name when i do something using ' x ' then i check something using ' param ' examples param y code step implementation code java when i do something using ' param ' public void dosomething named param string param step implementation code exception code java lang classcastexception java util linkedlist can not be cast to java lang string at com at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org jbehave core steps stepcreator parametrisedstep perform stepcreator java at org jbehave core embedder performabletree finesofar run performabletree java at org jbehave core embedder performabletree performablesteps perform performabletree java at org jbehave core embedder performabletree abstractperformablescenario performrestartablesteps performabletree java at org jbehave core embedder performabletree exampleperformablescenario perform performabletree java at org jbehave core embedder performabletree performablescenario perform performabletree java at org jbehave core embedder performabletree performablestory performscenarios performabletree java at org jbehave core embedder performabletree performablestory perform performabletree java at org jbehave core embedder performabletree performcancellable performabletree java at org jbehave core embedder performabletree perform performabletree java at org jbehave core embedder storymanager enqueuedstory call storymanager java at org jbehave core embedder storymanager enqueuedstory call storymanager java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor runworker threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java code the issue happens due to the same naming named param and param this issue does n't allow to use within scenario steps with named parameters and examplestable that have the same parameter names ,Bug
fix broken jbehave core example the build fails with errors errors the error is caused by invalid initialization of examplestableproperties code java lang nullpointerexception at java lang string startswith string java at java lang string startswith string java at org jbehave core model tabletransformers fromlandscape ignorerow tabletransformers java at org jbehave core model tabletransformers fromlandscape transform tabletransformers java at org jbehave core model tabletransformers transform tabletransformers java at org jbehave examples core steps tablesteps thenthetransformedtableis tablesteps java reflection invoke at org jbehave core steps stepcreator parametrisedstep perform stepcreator java at org jbehave core embedder performabletree finesofar run performabletree java code the error is caused by race condition in tradersteps when multiple threads change value of shared variable the issue reproduces from time to time code java lang assertionerror expected on but was off at org hamcrest matcherassert assertthat matcherassert java at org hamcrest matcherassert assertthat matcherassert java at org jbehave examples core steps tradersteps thealertstatusiscurrently tradersteps java reflection invoke at org jbehave core steps stepcreator parametrisedstep perform stepcreator java at org jbehave core embedder performabletree finesofar run performabletree java code code java lang assertionerror expected off but was on at org hamcrest matcherassert assertthat matcherassert java at org hamcrest matcherassert assertthat matcherassert java at org jbehave examples core steps tradersteps thealertstatusis tradersteps java reflection invoke at org jbehave core steps stepcreator parametrisedstep perform stepcreator java at org jbehave core embedder performabletree finesofar run performabletree java code ,Bug
jbehave needle archetype does n't compile in version missing dependencies jbehave needle archetype does n't compile in version there are missing some dependencies there steps to reproduce code mvn archetype generate dgroupid org test dartifactid jbehave needle test darchetypegroupid org jbehave darchetypeartifactid jbehave needle archetype darchetypeversion dinteractivemode false cd jbehave needle test mvn compile error failed to execute goal org apache maven plugins maven compiler plugin compile default compile on project jbehave needle test compilation failure compilation failure error tmp jbehave needle test src main java org test mystories java error package de akquinet jbosscc needle injection does not exist error error tmp jbehave needle test src main java org test mystories java error package de holisticon toolbox needle provider does not exist error error tmp jbehave needle test src main java org test mystories java error no suitable constructor found for examplestablefactory localizedkeywords loadfromclasspath parameterconverters code ,Bug
regexstoryparser does n't parse correctly with german keywords and nested givenstories within a scenario hey i recently recognized that the regexstoryparser does n't parse correctly with german keywords and nested givenstories within a scenario jbehave core i think it works well with the english keywords because given is part of givenstories with the german keywords it 's geben and vorgegebenestories if you have a scenario e g quote szenario musterszenario vorgegebenestories some example path vorbedingung story gegeben ist ein musterschritt quote then you will get as scenariotitle quote musterszenario vorgegebenestories some example path vorbedingung story quote and the givenstories wo n't be recognized as workaround i am currently using a custom localizedkeywords where i changed vorgegebenestories to gegebenestories i think the error is happening in line in regexstoryparser java code private pattern findingscenariotitle string startingwords concatenatewithor n keywords startingwords return compile keywords scenario s keywords meta startingwords dotall code i would suggest to include givenstories to the keywords startingwords alternatively would work changing the keywords kind regards fabian,Bug
example code custom reports ftl is incompatible with x x the templateableviewgenerator java class has been heavily modified in the jbehave v x x the datamodel has been extended with new keys as well as an old has been replaced v code java public void generatereportsview file outputdirectory list string formats properties viewproperties this viewproperties mergewithdefault viewproperties string outputname templateresource viewdirectory reports html string reportstemplate templateresource reports list string mergedformats mergeformatswithdefaults formats reports createreports readreportfiles outputdirectory outputname mergedformats map string object datamodel newdatamodel adddateandencoding datamodel datamodel put timeformatter new timeformatter datamodel put reportstable new reportstable reports nameresolver write outputdirectory outputname reportstemplate datamodel generateviewsindex outputdirectory code v code java public void generatereportsview file outputdirectory list string formats properties viewproperties this viewproperties mergewithdefault viewproperties string outputname templateresource viewdirectory reports html string reportstemplate templateresource reports list string mergedformats mergeformatswithdefaults formats reports createreports readreportfiles outputdirectory outputname mergedformats reports viewas viewtype valueof viewproperties getproperty reportsviewtype reports viewtype list name map string object datamodel newdatamodel adddateandencoding datamodel datamodel put timeformatter new timeformatter datamodel put reports reports datamodel put storydurations storydurations outputdirectory write outputdirectory outputname reportstemplate datamodel generateviewsindex outputdirectory code the reportstable has been replaced by reports therefore the corresponding ftl repostrs must be updated accordingly as well during migration from x x to x x the following error message occures color red severe error executing freemarker template freemarker template error the following has evaluated to null or missing reportstable in template ftl custom summary ftl at line column color to fix this issue the above mentioned key must be replaced in the custom ftl ,Bug
composite steps fail to execute we are set up using jbehave and selenium we are experiencing an intermittent problem where the composite steps fail to run but the framework seems to think they have and tries to run the next step which fails the composite steps that fail are our login steps so all tests using those fail in a batch this never happens to just test the failure happens about of the time we have tried adding logging into the steps but this never outputs any logging indicating that the framework does not run those steps at all but thinks it has what other information would be useful for you ,Bug
boolean outcome values are not handled properly in html output boolean outcome values should be detected via is boolean so that the freemarker c built in can be applied ,Bug
examplestable does n't preserve column order while replacing named parameters examplestable does n't preserve column order while replacing named parameters this issue is caused by using hashmap at generation new data with replaced named parameters linkedhashmap should be used instead ,Bug
eclipse installation instructions do not work following the jbehave instructions on creating a test project does not work even with an internet connection the wm jbehave dependency is not found this appears to be because it is not in the central maven repo i have flagged this as medium because although it is unlikely to affect existing users it prevents new users accessing the tool ,Bug
examplestableproperties should provide default values for separators instantiation of examplestableproperties should ensure values for separators are always set ,Improvement
surefire can not recognise jbehave maven plugin failures since using maven surefire plugin jbehave maven plugin i have a jbehave story with scenarios if the st scenario fails and the nd succeeds surefire fails to recognise the failure and reports success if the nd scenario fails and the st succeeds surefire correctly reports the failure previously using jbehave maven plugin surefire recognised a failure in both cases i tested jbehave maven plugin which also has this issue i 've also tried of the maven surefire plugin without success ,Bug
ordering of running stories are there are any official way how to set up ordering of running stories i know that it 's not bdd way but still we have some initial stories and some close stories on project now it 's in folders aaa init and zzz stop and i do n't like that way ,New Feature
add support for russian locale add support for russian locale add i n keywords ru properties with russian keywords map,Improvement
parent story meta is not passed to given stories steps to reproduce run org jbehave examples core stories givenstoriesparametrisedbymeta check log code running story org jbehave examples core stories given stories parametrised by meta story a story using givenstories at story level parametrised by meta properties org jbehave examples core stories given stories parametrised by meta story meta assetclass fx symbol stk theme parametrisation threshold before story givenstories org jbehave examples core stories parametrised story org jbehave examples core stories parametrised story meta theme parametrisation before given story scenario before any scenario before normal scenario with theme parametrisation given the asset class assetclass given a stock of symbol and a threshold pending after any scenario after normal scenario with any outcome after normal scenario with failed outcome with theme ' parametrisation ' after given story scenario a scenario that is executed after the given stories parametrised by meta before any scenario before normal scenario with theme parametrisation when the stock is traded at price failed java lang nullpointerexception then the alert status is on not performed after any scenario after normal scenario with any outcome after normal scenario with failed outcome with theme ' parametrisation ' java lang nullpointerexception at org jbehave examples core steps tradersteps thestockistraded tradersteps java reflection invoke at org jbehave core steps stepcreator parametrisedstep perform stepcreator java at org jbehave core embedder performabletree finesofar run performabletree java browser has been put to rest after story with theme ' parametrisation ' code actual result meta from parent story is not passed to given story expected meta from parent story is passed to given story failed build ,Bug
metafilter not using specified embeddermonitor overview metafilter is always using the printstreamembeddermonitor even when the embedder is using a different monitor this is causing logging messages to be output from the metafilter to standard output even though a different behavior has been set in the embedder for cases where there are many stories and scenarios which are being filtered then this can cause a great deal of logging messages in standard output that are expected to be directed elsewhere or suppressed cause the cause of this issue is the fact that when the embedder instantiates the metafilters it does not pass the monitor that has been set on the embedder itself the default monitor when noen is passed in the constructor for metafilter is the printstreamembeddermonitor which is why it is always being used fix modify the method mapstoriesaspaths in the embedder class to use new metafilter filter this monitor thus passing the monitor assigned to the embedder on to each of the metafilters which are created in the majority of cases this where the default monitor is used with the embedder the behavior will be the same as it is now since the default monitor is the same for embedder as it is for metafilter but when a specific monitor is specified for the embedder then it will also be used with the metafilter instances ,Bug
changing the value separator in jbehave in my story file when i use default value separator its spliting data,Bug
comma in the end of givenstories declaration leads to empty givenstory users may mistakenly put comma in the end of givenstories declaration code givenstories path to precondition story scenario code this leads to creation of givenstory with empty path that will cause issues at story executions ,Bug
junitreportingrunner nullpointerexception if scenarios are in story i have a sample story suchen ndern inlandzahlung varianten story see attachment this sample story includes different stories as given stories containing scenarios for example suchen ndern es chf bank story if i start the junitstories the execution fails after the first scenario in the first story with a nullpointerexception what can i do to work around this bug thanks for looking at this issue thomas code of the junitstories runwith color red junitreportingrunner class color public class efinancestories extends junitstories junitreportingrunner recommandedcontrols configuredembedder stack trace of the failure szenario finden und ndern eine standardzahlung es chf bank ab detailanzeige beispiele gegeben login mit benutzer standarduser wenn ich die standard inlandzahlung f r es chf bank erfasse und ich die details der inlandzahlung f r es chf bank anzeige und ich dann die zahlung zu folgenden werten ndere betrag betrag dann erhalte ich die meldung ge ndert erfasste transaktion wieder l schen wenn ich die inlandzahlung f r es chf bank mit folgenden werten l sche betrag von betrag bis betrag betrag dann erhalte ich die meldung auftrag wurde gel scht betrag failed to run story e finance stories inlandzahlung einzelauftrag suchen ndern suchen ndern inlandzahlung varianten story java lang nullpointerexception at de codecentric jbehave junit monitoring junitscenarioreporter example junitscenarioreporter java at org jbehave core reporters delegatingstoryreporter example delegatingstoryreporter java at org jbehave core reporters concurrentstoryreporter example concurrentstoryreporter java at org jbehave core embedder storyrunner runscenariosparametrisedbyexamples storyrunner java at org jbehave core embedder storyrunner runcancellable storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner rungivenstories storyrunner java at org jbehave core embedder storyrunner runcancellable storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storymanager enqueuedstory call storymanager java at org jbehave core embedder storymanager enqueuedstory call storymanager java at java util concurrent futuretask run futuretask java at com google common util concurrent moreexecutors directexecutorservice execute moreexecutors java at java util concurrent abstractexecutorservice submit abstractexecutorservice java at com google common util concurrent abstractlisteningexecutorservice submit abstractlisteningexecutorservice java at com google common util concurrent abstractlisteningexecutorservice submit abstractlisteningexecutorservice java at org jbehave core embedder storymanager submit storymanager java at org jbehave core embedder storymanager runningstory storymanager java at org jbehave core embedder storymanager filterrunning storymanager java at org jbehave core embedder storymanager runningstoriesaspaths storymanager java at org jbehave core embedder storymanager runstories storymanager java at org jbehave core embedder embedder runstoriesaspaths embedder java at de codecentric jbehave junit monitoring junitreportingrunner evaluate junitreportingrunner java at org junit runners parentrunner run parentrunner java at org eclipse jdt internal junit runner junit testreference run junit testreference java at org eclipse jdt internal junit runner testexecution run testexecution java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner run remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner main remotetestrunner java afterstories ,Bug
allow hyphen character in meta filters when using jbehave with gherkin syntax it is very useful to be able to use meta filters that contains a hyphen character for instance the following jbehave to gherkin converter changes jbehave 's ' author somebody ' meta into ' author somebody ' jbehave feature request is very similar however it is not working now although was implemented in version ,Improvement
context managed by jbehave create a context managed by jbehave the context is managed only and only by jbehave it is not directly accessible by the user of the framework the context is cleared after the execution of every scenario if the scenario is parametrised it is cleared after the execution of every example the context is handled properly when stories are executed concurrently the context should favour immutability for example when possible make stored collections immutable input parameters a method implementing step accepts as input parameters not only the ones taken from the step but also parameters stored in the context if an input parameter coming from the context is null or does not exist when the method is invoked an error is raised output parameters if the method implementing step returns a value the framework stores this value into the context if the returned value already exists in the context an error is raised if the returned value is a collection an immutable version of it when possible is stored in the context as an example the parameters can be identified by name using the value of an annotation the following step accepts a parameter from the step ' fromstep ' and also a parameter from the context stored with the name ' inputname ' the method also returns a string that is stored in the context with the name ' outcomename ' code given some step that receives fromstep contextoutcome outcomename public string somestep string fromstep contextparam inputname string fromcontext return some data code ,New Feature
failinguponpendingstep is not called if step is marked as pending because of parameter matching failure for the following step description given a status license has wrong id alias license has wrong id public void foo named status status s when called by alias mapping jbehave marks the step as pending and ignores failinguponpendingstep strategy the reason why jbehave marks step as pending is because it fails to map parameters org jbehave core steps stepcreator parameternotfound parameter not found for position ' ' amongst ' ' at org jbehave core steps stepcreator matchedparameter stepcreator java at org jbehave core steps stepcreator parameterforposition stepcreator java at org jbehave core steps stepcreator parametervaluesforstep stepcreator java at org jbehave core steps stepcreator access stepcreator java at org jbehave core steps stepcreator parametrisedstep parametrisestep stepcreator java at org jbehave core steps stepcreator parametrisedstep perform stepcreator java at org jbehave core embedder performabletree finesofar run performabletree java at org jbehave core embedder performabletree performablesteps perform performabletree java at org jbehave core embedder performabletree abstractperformablescenario performrestartablesteps performabletree java at org jbehave core embedder performabletree normalperformablescenario perform performabletree java at org jbehave core embedder performabletree performablescenario perform performabletree java at org jbehave core embedder performabletree performablestory performscenarios performabletree java at org jbehave core embedder performabletree performablestory perform performabletree java at org jbehave core embedder performabletree performcancellable performabletree java at org jbehave core embedder performabletree perform performabletree java at org jbehave core embedder storymanager enqueuedstory call storymanager java at org jbehave core embedder storymanager enqueuedstory call storymanager java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor runworker threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java version tests ,Bug
when and then annotations normalise whitespace when matching story to java method whitespace should be normalized deleting leading and trailing spaces and collapsing other consecutive whitespace to a single space when leading space when trailing space when many spaces between text using patterns e g you the user click s the button can become error prone when whitespace is significant you may need a way to disable the new feature in the event that users stories relied on whitespace to differentiate thank you hank,Improvement
performabletree is adding empty performablescenario instances causing a npe performabletree is adding performablescenario instances that do not contain any exampleperformablescenario instance causing later a npe when trying to perform them since they are handled like a normalperformablescenario npe is thrown at performabletree class line this regression was introduced by jbehave jbehave version maven project demonstrates this ,Bug
story description does n't get escaped in xml template jbehave xml output ftl template is missing xml escaping for story descriptions,Bug
istable does not consider parametric types extending examplestable a bit of context first we have created a custom examplestable implementation that has a generic argument and it lets us do the following code given the following users exist username realname dateofbirth dojoe john doe code and then have it like this in java code class user private string username private string realname private localdate dateofbirth given public void giventhefollowingusersexist smarttable user users for user user users code so we spare some boilerplate by inferring column names from the field names of the type parameter user in this case and standardize our tables on our entity model this is implemented as a parameterconverter and we 're using it quite happily already however there 's a bit of code in stepcreator that 's preventing us from having our custom table nicely formatted in html even though it extends examplestable code private boolean istable type type return type instanceof class class type isassignablefrom examplestable class code i 'm proposing a simple change so that table detection works with parameterizedtypes as well ,Improvement
an example table creates a javaw task and does n't purge it i am using an example table in my jbehave story and i notice that after each run a new java process is created and has not been purged in my windows task manager i can see a javaw task with a memory of mo because these tasks are not purged the os becomes rapidly very slow i have to kill these tasks by hand the problem does n't happear if i do n't use example tables in my story i 've created a very short story to reproduce this problem easily scenario prerequisites given an empty schema database schema examples schema core i am using the version beta of the jbehave core ,Bug
jenkins snippet generator does not generate correct groovy script ca n't use jbehave with pipelines i 'm using jenkins and the jbehave jenkins plugin snapshot built from master to set up a pipeline job for a series of jbehave tests the results of these need to be aggregated in the pipeline script but this does n't appear to be supported the snippet generator outputs the following step class ' xunitpublisher ' testtimemargin ' ' thresholdmode thresholds class ' failedthreshold ' failurenewthreshold '' failurethreshold ' ' unstablenewthreshold '' unstablethreshold ' ' class ' skippedthreshold ' failurenewthreshold '' failurethreshold '' unstablenewthreshold '' unstablethreshold ' ' tools object of type org jbehave jenkins jbehaveplugintype the offending bit is the tool section where there does n't appear to be an object that matches the jbehaveplugintype that can be used here this basically means i ca n't use jbehave in pipelines which is a big problem can this be fixed ,Bug
add ancestordelegatingresolver a storynameresolver that iterates through a configurable number of path ancestors and applies for each the specified delegate resolver defaulting to underscoredtocapitalized ,New Feature
implementation of parameter converters hello jbehave 's team i noticed the examples you have on the documentation for parameter converters and also your code implement the accept method of the parameterconverter interface in a way that does n't seem to make too much sense like this code java return trader class isassignablefrom class type code instead of doing it like this code java return class type isassignablefrom trader class code the reason for implementing it as the latter in the example would be to be able to receive a supertype of trader such as object in a step method in the other hand i do n't see a reason for implementing it as it is right now if you want exact matching then you are better off using the equals method but i might be missing something so please correct me if i 'm wrong thanks rodrigo,Bug
unable to cast value from examplestable to primitive types code boolean replacenamedparameters true int trades table getrowasparameters replacenamedparameters valueas trades int class code fails with exception code caused by java lang classcastexception can not cast java lang integer to int at java lang class cast class java at org jbehave core steps convertedparameters convert convertedparameters java classes at org jbehave core steps convertedparameters valueas convertedparameters java classes code ,Bug
white space not preserved in html report for failed outcomes when an outcome fails due to excess white space in the expected string the html report does not display the excess white space making it difficult to see where the difference lies proposed changes to jbehave core css add code css white space pre wrap code to code css outcomes table code and code css parameter table th td code code css outcomes table border px solid margin top px margin left px white space pre wrap parameter table th td text align center padding left px padding right px border left px solid white space pre wrap code ,Bug
examplestablefactory should use configured resourceloader please take a look at examplestablefactory constructors some of them define default resource loaders code new loadfromclasspath code if user defines own resource loader for stories default resource loader in examplestablefactory could be unexpected behavior ,Bug
jbehave batch execution crashes when there is a nullpointerexception or runtimeexception jbehave version test suite background currently we have around scenarios written in about story files most of the scenarios may have about steps maven used as the build tool issue we throw all exceptions occur in steps definitions to the jbehave runner where runner can identify the test as a failure or an error when there are multiple runtimeexception or nullpointerexception throwing from scenarios when executing a story jbehave will crashes and stops executing the batch all the stories after that will not execute note please find he attached log file containing different logs we observe this issue in different situations ,Bug
allow filtering on meta by row in parametrised example scenarios currently it is not possible to filter on single parametrised example scenarios but only on the entire example scenario moreover when using gherkin grammar if meta is used at scenario level as specified by then whole scenario would be executed since gherkin meta does not have a value project has been created with more details ,Improvement
deafult meta matcher behaviour for multiple tags i kind of want to start discussion regarding behaviour of default meta matcher i was using defult syntax for filtering and i encounterd some problems given code java environment dev risk code code java environment all risk code i bumpted on a situation that when i use risk environment dev both stories was found i found that deafultmetamatcher contains a logic that results in kind of or operator between metas in filterstring i have itroduced to my code new metamatcher that is having more like and operator between metas so i am not creating an issue plus there is,Improvement
unable to use parametrised steps and parametrised examplestable within scenario current example in documentation code given that larry has done trades trades then the traders activity is name trades larry trades moe curly examples trades code sample implementation code given that larry has done tr trades public void thetraderactivityis named tr int tr system out println tr then the traders activity is table public void thetraderactivityis examplestable table boolean replacenamedparameters true int trades table getrowasparameters replacenamedparameters valueas trades int class system out println trades code it fails at the first step with exception code caused by java text parseexception unparseable number trades at java text numberformat parse numberformat java at org jbehave core steps parameterconverters numberconverter convertvalue parameterconverters java classes code changing scenario to code given that larry has done trades trades then the traders activity is name trades larry trades moe curly examples trades code it fails at the second step with exception code java text parseexception unparseable number at java text numberformat parse numberformat java at org jbehave core steps parameterconverters numberconverter convertvalue parameterconverters java classes code changing scenario to code given that larry has done trades trades then the traders activity is name trades larry trades moe curly examples trades code it fails with exception code caused by java lang classcastexception can not cast java lang integer to int at java lang class cast class java at org jbehave core steps convertedparameters convert convertedparameters java classes code but it 's an another bug so my proposal to make syntax consistent use the following scenario format for example code given that larry has done trades trades then the traders activity is name trades larry trades moe curly examples trades code fix the exception thrown in this scenario,Bug
regexstoryparser do not parse meta information correctly when life cycle keyword is present by the grammar it should be possible to use the lifecycle keyword after meta keyword code the story describes a feature via description narrative and a set of scenarios story description meta narrative givenstories lifecycle scenario code if the lifecycle keyword is used after meta keyword then the meta information are not correctly parsed panel meta story story lifecycle before given a step before each scenario and another before step after given a step after each scenario and another after step scenario given a scenario panel value for the story will be panel story lifecycle before given a step before each scenario and another before step after given a step after each scenario and another after step panel here is a junit test code test public void shouldparsestorywithmetaandlifecycle string wholestory meta story story nl lifecycle nl before nl nl given a step before each scenario nl and another before step nl after nl nl given a step after each scenario nl and another after step nl scenario nl given a scenario story story parser parsestory wholestory storypath meta storymeta story getmeta assertthat storymeta getproperty story equalto story list string beforesteps story getlifecycle getbeforesteps assertthat beforesteps get equalto given a step before each scenario assertthat beforesteps get equalto and another before step list string aftersteps story getlifecycle getaftersteps assertthat aftersteps get equalto given a step after each scenario assertthat aftersteps get equalto and another after step scenario scenario story getscenarios get list string steps scenario getsteps assertthat steps get equalto given a scenario code the problem is on the line in regexstoryparser code string narrativeorgivenstories concatenatewithor keywords narrative keywords givenstories code lifecycle keyword is not included ,Bug
named parameters do not work in conjunction with parameter converters in version when using the named annotation in conjunction with a parameter converter in this case comma separated string list converter the parameter injection fails the workaround is to fallback to order based parameter injection ,Bug
npe when executing a scenario with examples table prerequisites jbehave core i have the following scenario code meta group general tests scenario meta regression testtier testtype ui layout phone tablet desktop given i am on the main application page examples pagelink pagelink code metafilter that i use code groovy layout phone skip code it should filter out all scenarios that do n't have layout phone this metafilter is added with usemetafilters list string metafilters method npe is thrown code main info org eclipse jetty util log logging initialized ms main info com jjconsumer dte bdd log loggingembeddermonitor meta properties narrative narrative inorderto asa iwantto sothat description group general tests path test story excluded by filter ' groovy layout phone skip ' main info com jjconsumer dte bdd log loggingembeddermonitor meta properties excluded by filter ' groovy layout phone skip ' main info com jjconsumer dte bdd log loggingstoryreporter beforestories main info com jjconsumer dte bdd log loggingembeddermonitor meta properties narrative narrative inorderto asa iwantto sothat description group general tests path test story excluded by filter ' groovy layout phone skip ' pool thread info com jjconsumer dte bdd log loggingstoryreporter test story pool thread info com jjconsumer dte bdd log loggingstoryreporter meta pool thread info com jjconsumer dte bdd log loggingstoryreporter group general tests pool thread info com jjconsumer dte bdd log loggingstoryreporter scenario pool thread info com jjconsumer dte bdd log loggingembeddermonitor failed to run story test story pool thread info com jjconsumer dte bdd log loggingembeddermonitor java lang nullpointerexception pool thread info com jjconsumer dte bdd log loggingembeddermonitor at org jbehave core embedder performabletree performablescenario perform performabletree java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at org jbehave core embedder performabletree performablestory performscenarios performabletree java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at org jbehave core embedder performabletree performablestory perform performabletree java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at org jbehave core embedder performabletree performcancellable performabletree java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at org jbehave core embedder performabletree perform performabletree java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at org jbehave core embedder storymanager enqueuedstory call storymanager java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at org jbehave core embedder storymanager enqueuedstory call storymanager java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at java util concurrent futuretask run futuretask java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at java util concurrent threadpoolexecutor runworker threadpoolexecutor java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at java util concurrent threadpoolexecutor worker run threadpoolexecutor java pool thread info com jjconsumer dte bdd log loggingembeddermonitor at java lang thread run thread java code the reason of this is in this part of the code inside performabletree class code if isparameterisedbyexamples scenario examplestable table scenario getexamplestable for map string string scenarioparameters table getrows meta examplescenariometa parametermeta context scenarioparameters boolean examplescenarioallowed context filter allow examplescenariometa if examplescenarioallowed exampleperformablescenario examplescenario examplescenario context lifecycle scenario storyandscenariometa scenarioparameters performablescenario addexamplescenario examplescenario else plain old scenario performablescenario usenormalscenario normalscenario code examplescenarioallowed false for this scenario so performablescenario does n't have neither examplestory nor normalscenario ,Bug
consecutive parameters in string using ordered parameters breaks non deterministically using a string like some text limit status some text where the parameters are consecutive separated only by a string sometimes breaks when running the step but does n't break every time it breaks such that the second parameter is concatenated to the first parameter for example if the string passed to the step is some text open some text then the limit parameter is open instead of given that the method signature is somemethod string limit string status when running the test multiple times it only breaks sometimes ,Bug
in afterstories log string reports view generated with x stories showes wrong number problem in this place org jbehave core reporters templateableviewgenerator code for report report reports getreports map string integer stats report getstats if stats containskey scenarios if stats get scenarios storycount code stats map contains not only reports ' files but additionally already calculated total reports stats which will count as more story example reports view generated with stories of which pending containing scenarios of which pending when actually was run only stories with scenarios so it should be stories in log string ,Bug
custom storyreporter 's not being executed in the same thread they were created thread used to create storyreporter is not the same than used later to execute it more information can be found at maven example project reproducing this issue ,Bug
in an example table values are not trimmed if there is a custom separator we 've found this bug while executing a jbehave story with an example table written like this given an example table valueseparator label code label code during the execution this step was runned with success but at the end we had this error message exception in thread main org jbehave core embedder embedder runningstoriesfailed failures in running stories it seems that an exception is thrown somewhere but the process resumes we 've found several workarounds delete the space before code delete the space after code not define a custom separator and use the default separator everywhere so the bug is if we use a custom separator and if the values of the example have spaces at both sides an error is thrown we use the jbehave core regards,Bug
run story level given stories only if story contains scenarios story level given stories should be added to run only if story contains scenarios,Improvement
scenario not being restarted after a restartingscenariofailure exception is thrown since jbehave scenario execution is not restarted after a restartingscenariofailure exception meanwhile story is properly restarted after a restartingstoryfailure exception i 've created a maven project that reproduces this issue jbehave is working fine although storydurations props file is not created also reproduced at given maven project ,Bug
numberconverter does not allow negative bigdecimal values after calling canonicalize method the value ends with negative signs throwing a numberformatexception while creating bigdecimal instance this is related to,Bug
afterstory not reported for afterstories when multithreaded when specifying a thread count larger than the afterstory notification is not sent to storyreporters for the afterstories meta story this affects among others serenity which is generating the reports in this step i created a sample project based on the jbehave examples if issues mvn test dthreadcount then there is no afterstory line following beforestory afterstories in the single threaded case it is there ,Bug
getrowasparameters returns wrond data when rows have similar names getrowasparameters rownumber true returns incorrect data in case previous row already has value matching current example then do smth with following tables field value tablenumber key tablenumber keyfortable examples key keyfortable actual result tablenumber ' ' tablenumber ' keyfortable ' because it replaced ' key ' in string ' keyfortable ' with actual data of ' key ' ,Bug
story meta not properly parsed when lifecycle is present if lifecycle is present it should be not taken into account as meta ,Bug
templateableviewgenerator does n't close storydurations filereader the templateableviewgenerator creates a filereader for reading the storydurations props file but fails to close it afterwards ,Bug
noclassdeffound latest jbehave plugin in jenkins the following error noformat failed to scout org jbehave jenkins jbehaveplugintype descriptorimpl java lang instantiationexception java lang noclassdeffounderror com thalesgroup dtkit metrics hudson api descriptor testtypedescriptor at net java sezpoz indexitem element indexitem java at hudson extensionfinder sezpoz scout extensionfinder java at hudson classicpluginstrategy findcomponents classicpluginstrategy java at hudson extensionlist load extensionlist java at hudson extensionlist ensureloaded extensionlist java at hudson extensionlist iterator extensionlist java at hudson classicpluginstrategy findcomponents classicpluginstrategy java at hudson extensionlist load extensionlist java at hudson extensionlist ensureloaded extensionlist java at hudson extensionlist getcomponents extensionlist java at hudson descriptorextensionlist load descriptorextensionlist java at hudson extensionlist ensureloaded extensionlist java at hudson extensionlist iterator extensionlist java at org jenkinsci plugins xunit aliasinitializer addaliases aliasinitializer java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke unknown source at sun reflect delegatingmethodaccessorimpl invoke unknown source at java lang reflect method invoke unknown source at hudson init taskmethodfinder invoke taskmethodfinder java at hudson init taskmethodfinder taskimpl run taskmethodfinder java at org jvnet hudson reactor reactor runtask reactor java at jenkins model jenkins runtask jenkins java at org jvnet hudson reactor reactor run reactor java at org jvnet hudson reactor reactor node run reactor java at java util concurrent threadpoolexecutor runworker unknown source at java util concurrent threadpoolexecutor worker run unknown source at java lang thread run unknown source caused by java lang noclassdeffounderror com thalesgroup dtkit metrics hudson api descriptor testtypedescriptor noformat is reported in the jbehave plugin of jenkins other users are encountering this issue which does not work currently the plugin is currently built with hudson which is not compatible with jenkins anymore i created to fix this issue ,Bug
allow next steps to be ignored skipped under certain circumstances it is very useful to avoid of the execution of the steps following a given step without failing the tests this is very similar to testng 's skipexception concept following the same approach than restartingscenariofailure and restartingstoryfailure when ignoringstepsfailure is thrown the step where it was thrown and following ones will be considered as ignorable ,Improvement
ca n't run multiple stories with maven plugin i 'm using the maven plugin to run stories and am noticing that i ca n't run more than story without the build failing with a rejectedexecutionexception when debugging in eclipse with mvndebug and attaching to the local debug port i can attach a breakpoint in the shutdownnow method for the executor service used by the storymanager class this method is called by the shutdownexecutorservice method in embedder which in turn gets called when of my story classes which extends junitstory completes however the storymanager does not get recreated at this point meaning i 'm left with a terminated thread pool so when the next story comes up it gets rejected since no threads are running or can be created in that pool downgrading to fixes this issue for me i would consider this a blocking issue as most people using junitstory likely have more than of them and this will cause builds to fail for no reason of the application developers ,Bug
race condition in storymanager prevents it waiting for all tasks to be done in waituntilalldoneorfailed method in storymanager class inside while loop we are iterating a hashmap runningstories in a for each loop since we are using a hashmap order is not guaranteed over time and thus there 's a chance to exit prematurely the while loop if there is no in progress task i e all tasks are either done or not started or marked as that last task is done this exists the while loop without waiting for all task to finish ,Bug
allow having stories in classpath with encoding different than utf projects may have different encodings sources and resources and change them to utf may not be an option this change allows clients of code java loadfromclasspath code to define their stories encoding without having to subclass while maintaining utf as default ,Improvement
upgrade to apache commons lang v from v java end of life is oct i propose to start jbehave migration to java to make this process smooth i suggest to update jbehave dependencies to the latest available ones and compatible with java now jbehave uses code xml groupid commons lang groupid artifactid commons lang artifactid version version code i propose to upgrade it to apache commons lang the next version requires java ,Improvement
underscoredtocapitalized incorrectly resolves names with the extension in the name correct behavior given story files such as com sample story test story story which is translated to the report com sample story test story story when the underscoredtocapitalized resolver attempts to resolve the name then the result is test story current behavior com sample story test story story is resolved to sample ,Bug
support partial named parameter replacement in parameterized steps given i have an implemented step code java given i do something with parameter parameter public void dosomething named parameter string parameter code and i have a scenario code scenario do something given i do something with parameter foo parameterpart bar examples parameterpart middle code then parameterpart should be properly replaced by value from the examples and foo middle bar value should be passed as parameter to the step implementation,Improvement
multi threading issue with fluentselenium fluentwebdriverpage should not do it 's own threadlocal stuff as it ca n't be cleared per story or per thread in the same way that delegatingwebdriverprovider can ,Bug
total report did n't count correcty for scenario with given scenario problem in this place org jbehave core reporters poststorystatisticscollector code boolean write false if givenstory this givenstories if has stepsfailed add scenariosfailed write true code steps to reproduce story with scenarios both givenstory and first scenario failed when second scenario 's givenstory finished it will find scenariosfailed in data object from previous scenario and close output file with stats actual result all next results wo nt write in story 's file and total report will be incorrect but html file show real log because execution will be continue ,Bug
running jbehave as junit test gives error i am trying to run a jbehave user story using following code package com joe steps import gherkin formatter format import java util arrays import java util list import org jbehave core configuration configuration import org jbehave core configuration mostusefulconfiguration import org jbehave core io loadfromclasspath import org jbehave core junit junitstories import org jbehave core reporters storyreporterbuilder import org jbehave core steps candidatesteps import org jbehave core steps instancestepsfactory import org junit test public class icantoggleacell extends junitstories override public configuration configuration return new mostusefulconfiguration usestoryloader new loadfromclasspath getclass getclassloader usestoryreporterbuilder new storyreporterbuilder override public list candidatesteps candidatesteps return new instancestepsfactory configuration this createcandidatesteps override protected list string storypaths return arrays aslist com joe features debugplugin story override test public void run throws throwable super run when i try to run it as junit test it gives following error ' java lang noclassdeffounderror org apache commons collections transformer at org jbehave core configuration configuration init configuration java at org jbehave core configuration mostusefulconfiguration init mostusefulconfiguration java at org jbehave core embedder embedder init embedder java at org jbehave core embedder embedder init embedder java at org jbehave core configurableembedder init configurableembedder java at org jbehave core junit junitstories init junitstories java at com joe steps icantoggleacell init icantoggleacell java at sun reflect nativeconstructoraccessorimpl newinstance native method at sun reflect nativeconstructoraccessorimpl newinstance unknown source at sun reflect delegatingconstructoraccessorimpl newinstance unknown source at java lang reflect constructor newinstance unknown source at org junit runners blockjunit classrunner createtest blockjunit classrunner java at org junit runners blockjunit classrunner runreflectivecall blockjunit classrunner java at org junit internal runners model reflectivecallable run reflectivecallable java at org junit runners blockjunit classrunner methodblock blockjunit classrunner java at org junit runners blockjunit classrunner runchild blockjunit classrunner java at org junit runners blockjunit classrunner runchild blockjunit classrunner java at org junit runners parentrunner run parentrunner java at org junit runners parentrunner schedule parentrunner java at org junit runners parentrunner runchildren parentrunner java at org junit runners parentrunner access parentrunner java at org junit runners parentrunner evaluate parentrunner java at org junit runners parentrunner run parentrunner java at org eclipse jdt internal junit runner junit testreference run junit testreference java at org eclipse jdt internal junit runner testexecution run testexecution java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner run remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner main remotetestrunner java caused by java lang classnotfoundexception org apache commons collections transformer at java net urlclassloader findclass unknown source at java lang classloader loadclass unknown source at sun misc launcher appclassloader loadclass unknown source at java lang classloader loadclass unknown source more,Bug
parameters surrounded by quotes are not correct in reports when parameters surrounded by quotes not marked like param because parameters will marked if surrounded by spaces only i think not always parameter surrounded by spaces problem actual not only for quotes problem here ,Bug
allow custom implementations of metamatcher i would like to be able to setup custom metamatcher implementations so that i can override defaultmetamatcher or groovymetamatcher ,Improvement
finding steps documentation has a typo ' reportmatchingstepocs ' a block of code in the finding steps documentation has a typo it reads code java embedder reportmatchingstepocs given a step that i 'm looking to match code instead of code java embedder reportmatchingstepdocs given a step that i 'm looking to match code ,Bug
 and step fails when used in composite steps hey guys i m using jbehave with java v i have noticed that if we use and in a composite step then it tries to match it with an and annotation for example consider the following scenario code java given i execute step public void execute step one given i execute step public void execute step given i execute step and composite steps given i execute step and i execute step public void execute step one and two code would fail because it tries to match the composite and i execute step with an and annotation if i change the composite to given i execute step it works could someone confirm that this is an issue in the latest version i will try to fix it if it is as i understand an and should match with the previous step i e if an and follows a given then it should match with a given if it follows a when then it should match a when thanks ben,Bug
example table parameters to take preference over meta parameters imaging the following scenario author rjimgal scenario it is possible to list books by author given an author author when user searches by author then there are books listed examples meta author shakespeare cervantes meta properties are added or updated to existing examplestable parameters this leads into ' rjimgal ' feed into ' given an author author ' step i think examples table value should take preference over meta value this makes even more sense for gherkin where meta does not have any value associated and thus an empty string would be used instead ,Improvement
gherkin tags parsed incorrectly the following gherkin text is incorrectly transformed by gherkinstoryparser see attached junit test noformat featuretag feature a short tagged feature narrative a narrative is a must background something that has to be performed before each scenario noformat the result of the transformation is noformat a short tagged feature narrative a narrative is a mustmeta featuretag lifecycle something that has to be performed before each scenario before noformat as a result the featuretag meta tag has a value starting with lifecycle something it should be empty string ,Bug
jbehave testng selenium grid generate jbehave index html report file for each seperate selenium node when using single jbehave story file i have a jbehave project in which need to integrate with testng and selenium grid which using this this and this code in github sorry since i ca nt past the entire code so only showing the reference i have done the jbehave testng selenium grid but my problem is when using single story file to execute in different selenium node the jbehave report index html file is shown for any node only i want to have separate report for each node in a single or more jbehave report index html file i should not run with story files and all how can i show separate report for each and every selenium node in a single jbehave report html file i know the jbehave use freemarker for their report generation but i have no clue on how to override this and show report for each selenium nodes i have also raised this in stackoverflow which there is no response for it it will be nice if there is feature in jbehave for this like an java code for to optimism that will take the name of the node and present it in the report thanks in advance ,New Feature
hhgh ncg,Bug
use local nexus for deploying releases and snapshots releases and snapshots should use local nexus instance this will allow to work around,New Feature
normalperformablescenario parent givenstory context not restored after running given stories jbehave core src main java org jbehave core embedder performabletree java in the perform of the normalperformablescenario class when a story has given stories context givenstory is set to perform the given stories but is not set back to the original value if not mistaken this could be fixed by adding the following bold public static class normalperformablescenario extends abstractperformablescenario private scenario scenario public normalperformablescenario scenario scenario this scenario scenario public void perform runcontext context throws interruptedexception if context configuration storycontrols resetstatebeforescenario context resetstate beforesteps perform context if givenstories size final boolean parentgivenstory context givenstory context reporter givenstories scenario getgivenstories for performablestory story givenstories context givenstory story givenstory story perform context context givenstory parentgivenstory performrestartablesteps context aftersteps perform context ,Bug
running jbehave story with givenstories produces jbehave report that lists all stories not run v running jbehave story with givenstories produces jbehave report that lists all stories not run v steps specify and run jbehave story in project that has a givenstories step specified jbehave story runs successfully expected behavior jbehave report shows specified jbehave story ran successfully actual behavior jbehave report shows specified jbehave story ran successfully jbehave report lists every jbehave story in the project with a in the excluded column running a jbehave story that does n't have given stories produces expected behaviour givenstories seems to trigger the bug ,Bug
storyreporter being executed times hi i 'm implementing my own reporter by extending storyreporter the thing is each override method being executed times after another before the the execution moves to next method in the execution flow for example beforestory executions beforescenario executions afterscenario executions the running file looks like color d public abstract class genericscenario extends junitstories set system time property in order to be appended to the log file static simpledateformat dateformat new simpledateformat dd mmm yyyy hh mm ss system setproperty systemdate dateformat format new date public genericscenario embedder embedder configuredembedder embedder embeddercontrols usestorytimeouts propertiessingelton getinstance getproperty timeout embedder usetimeoutparsers new myparser embedder configuration useparameterconverters configuration parameterconverters addconverters new parameterconverters enumconverter adding skip support configuredembedder usemetafilters arrays aslist skip public class myparser implements storytimeouts timeoutparser public boolean isvalid string timeout return timeout matches d sec public long asseconds string timeout return long parselong stringutils substringbefore timeout sec override public configuration configuration return new mostusefulconfiguration usestoryloader new loadfromclasspath this getclass usestoryreporterbuilder storyreporter withdefaultformats withformats format txt format console withreporters new mystoryreporter usestorycontrols new storycontrols doskipscenariosafterfailure true storyreporterbuilder storyreporter new storyreporterbuilder the builder is configured to build with the storyreporterbuilder format stats as default format to change the default formats the user can override the method override public storyreporterbuilder withdefaultformats return withformats format console override public injectablestepsfactory stepsfactory return new instancestepsfactory configuration new classes override protected abstract list string storypaths color any idea how to overcome the issue i 've uploaded a simple example project where you reproduce the issue pls see that the before after stories is being executed several times same has happens with the rest methods i 'm implementing color d processing system properties using controls embeddercontrols batch false skip false generateviewafterstories true ignorefailureinstories false ignorefailureinview false verbosefailures false verbosefiltering false storytimeouts threads failonstorytimeout false beforestories before beforestories before beforestories before beforestories after after after afterstories before afterstories before afterstories before afterstories after after after generating reports view to ' users ie desktop jbehaveexample target jbehave ' using formats ' console txt console mystoryreporter console txt console mystoryreporter console txt console mystoryreporter ' and view properties ' navigator ftl jbehave navigator ftl views ftl jbehave views ftl reports ftl jbehave reports ftl nondecorated ftl jbehave report non decorated ftl decorated ftl jbehave report decorated ftl maps ftl jbehave maps ftl ' disconnected from the target vm address ' ' transport ' socket ' reports view generated with stories of which pending containing scenarios of which pending process finished with exit code color thanks,Bug
usingsteps packages overrides instances code java runwith annotatedpathrunner class usingpaths searchin src test resources excludes story exclude includes story usingsteps packages com example candidatesteps instances com example jbehavehooks class usingembedder storytimeouts generateviewafterstories false configure parameterconverters booleanparameterconverter class public class jbehaverunner code with this in place before and after hooks defined in jbehavehooks will not be run the issue lies in annotationbuilder buildstepsfactory code java list class object stepsclasses finder getannotatedclasses usingsteps class object class instances if stepsclasses isempty for class object stepsclass stepsclasses stepsinstances add instanceof object class stepsclass factory new instancestepsfactory configuration stepsinstances list string packages finder getannotatedvalues usingsteps class string class packages if packages isempty string matchingnames finder getannotatedvalue usingsteps class string class matchingnames string notmatchingnames finder getannotatedvalue usingsteps class string class notmatchingnames factory new scanningstepsfactory configuration packages toarray new string packages size matchingnames matchingnames notmatchingnames notmatchingnames code as you can see the var factory is overwritten if packages is defined in the annotation usingsteps ,Bug
there are are unpredictable amount of stories executed for the same story finder with the same include property for large amount of story files jbehave test runner execute different amount of stories for the large amount of stories we have now test runner could run and other unpredictable amount of tests test runner is configured to be single threaded stories are loaded from classpath consider original and fixed storymanager class which executes all stories returned by story finder ,Bug
numberconverter should not ignore all non digit characters for bigdecimal type numberconverter allow values like ' helloworld ' to be converter into as bigdecimal this can lead into wrong data without user noticing there are some non digit characters like dot ' ' and comma ' ' that we should allow in order to ease reading of big numbers like or depending on the locale project demonstrates how ' x a ' is converted into bigdecimal while could expect numberconverter to support hex inputs ,Bug
meta of examples does n't inherit scenario meta if scenario contains meta and example table examples does n't contain meta and meta filters are applied to this scenario all examples are excluded because meta is empty but they should be included if scenario meta matches,Bug
allow parameter conversion in example table to support generic type methods of the parameterconverter interface can accept type object not just class so i think the examplestable does n't need to restrict ability of the converters it would be better if it is supported ,Improvement
parameter value is not propagated from examples table to nested steps of composed step given some parameterized step and another step composed of the first step code given some state with param public void somestep string param given some another state with param composite steps given some state with param public void composedstep string param code when jbehave will execute scenario which takes parameter value for composed step from examples table code scenario given another state with p examples p code then somestep string param will be called with wrong value p but at the same time composedstep string param will be called with correct value ,Bug
distinguish ignored steps and comments all comments from bdd stories are reported as ignored steps but only comments starting with given when then and or any other corresponding localized keywords should be considered as ignored steps ,Improvement
doskipscenariosafterfailure do not catch failure in beforestory steps to reproduce bug editing project configuration set doskipscenariosafterfailure true run story that has a failure in beforestory h wxpected output scenarios will not run since before story has failed h actual output scenarios run anyway even if beforestory has failed,Bug
givenstories at story level are reported to storyreporter chaotically in multi threaded mode steps to reproduce create some stories like code java givenstories precondition story scenario scenario when i do something code run them using multiple threads actual result givenstory flag is passed to methods beforestory and afterstory in some random order multiple threads change and share value expected result multiple threads should use local givenstory flag,Bug
custom stepmonitor does n't work in version x i created a custom stepmonitor quote private stepmonitor stp new nullstepmonitor public void performing string step boolean dryrun system err println debug monitor step step quote and i use it in my configuration quote return new mostusefulconfiguration usestepmonitor stp quote on version it works as expected the result is quote scenario a scenario with some pending steps debug monitor step given i am a pending step given i am a pending step debug monitor step and i am still pending step and i am still pending step debug monitor step when a good soul will implement me when a good soul will implement me debug monitor step then i shall be happy then i shall be happy quote but on version it does n't work i have got quote scenario a scenario with some pending steps given i am a pending step and i am still pending step when a good soul will implement me then i shall be happy quote here is simple example on github master branch is for version and branch jbehave is for version,Bug
scenario metadata overwrite overview a bug was introduced with the release which effects scenario level metadata if scenario level metadata is passed into steps as named parameters then the wrong values are sometimes used for example the scenario metadata is passed into the scenario step details it appears that the performablestory is constructed a property map is passed into each performablescenario where it is flushed out with story and scenario level metadata and then stored with the performablescenario for named parameter matching when the scenario is run however all performablescenarios are sharing the same namedparameter map passed in from the performablestory therefore when each scenario is parsed and the performablescenario created the map is updated which effects all the scenarios impact test suites that were written against x and use scenario level metadata within their steps fail or report incorrect results when upgrading to jbehave x fix the performablescenarios need to create and store a separate copy of the namedparameter map to that this overwriting does not occur ,Bug
ide hangs with attatched story file when we try to edit something in attached story file ide gets stuck and need to restart to reproduce open this file and scroll down to eof then try to put a space then ide is getting stuck and can not do anything need to kill the process by task manager i used both intelijidea and eclipse mars and can reproduced the same issue i have set of files like this only difference i can see in these files are no of lines lines is there any limitation that jbehave can handled i 've installed below jbehave plugins on my ide jbehave plugin jbehave support jbehave support extention i spend number of days to resolve this issue but could n't find a solution for this i m stuck on my project works can you guys please advice me on this,Bug
broken project false positive for many examples hi jbehave team i 'm currently worried that many of the examples might be broken but still report as successful when executed from the command line using maven commands such as mvn psonatype s settings xml clean install djbehave version pexamples i noticed the next line was commented a long time ago here code java usependingstepstrategy new failinguponpendingstep code so that allows many tests to pass even when some of their corresponding steps are not being matched at all e g when some meta parameters are not being inherited and then some of the parameters are parsed as plain strings maybe it would be more useful safer if that line was n't commented and each test that needs to have pending steps could override that behavior in any case the thing is that it seems many of examples provided on the repo just do n't really work also something else i noticed i mean besides the instructions provided in the site repo being kind of insufficient in order to be able to compile the project successfully without having some headaches is that the tests configured for the project are kind of unreliable because they randomly fail when trying to build it i e when running mvn s settings xml clean install so this makes it a bit difficult to contribute back to this great project ps currently i have the core examples in my repo set up with gradle so you just need to run gradlew clean test in order to verify what i just stated if you want to run it trough intellij though you need to make sure the processresources task runs before the tests or move the story files to the resources directory manually so that they are picked up by the framework during execution thanks rodrigo,Bug
add start and end time to each step in cross reference in cross reference file can not see the start and end times of stories scenarios or steps this can be quite handy when wants to cross reference the tests execution with another system ,Improvement
when using scenario level givenstories no report is written when using scenario level given stories like so noformat meta narrative as a user i want to perform an action so that i can achieve a business goal scenario scenario description givenstories giventeststory story given there is something wrong noformat then no report for the story is written using a debugger and placing a break point in templatebleoutput afterstory boolean can see that the method is called times once for beforestories and afterstories and twice for the executing story both times the boolean parameter givenstory is true leading to no report being written attached you find a small maven test project that reproduces the error after executing junitstoriestest would expect a teststory html in the jbehave output folder yet none is created after removing the givenstories line everything works as expected ,Bug
numberformatexception when using transformer for exampletable hi so basically this is all that 's required to break this tabular parameters feature the problem is caused by the code referenced on jbehave stepcreator istable how to reproduce ps also please try to address jbehave or at least reply to read it as soon as possible that 's a critical issue that i think should be solved as soon as possible because it basically gives a misleading feeling of confidence in the current health of the project thanks rodrigo,Bug
jenkins plugin fails to generate testcase nodes for a story like this noformat issue test meta author skundrik narrative test narrative scenario test scenario given report run at timestamp using data source datasource with thread pool size threadpoolsize then item count is count examples timestamp datasource threadpoolsize count t z dsource t z dsource noformat the junit xml output does not contain any testcase nodes and effectively loses the results of the test ,Bug
login issue having issue in login step,Bug
examples not working with parametrized givenstories following code will make examples section cease to work at all givenstories sample procedure login story id global given logged in when go transfers when enter amount amount examples amount while this would work givenstories sample procedure login story given logged in when go transfers when enter amount amount examples amount using version jbehave core version jbehave core version jbehave web version beta jbehave web version jbehave site version jbehave site version ,Bug
performabletree is adding not allowed exampleperformablescenario instances performabletree is adding exampleperformablescenario instances that are not allowed due to meta filters this causes a significant amount of calls to stepfinder prioritise method resulting in a performance degradation specially when using levenshtein distance later they will not be executed project demonstrates this ,Bug
parametrised scenarios with empty examples should n't be run parametrised scenarios with empty examples should n't be run code given a stock of symbol and a threshold when the stock is traded at price then the alert status should be status examples symbol threshold price status code ,Bug
upgrade to apache commons collections v from v java end of life is oct i propose to start jbehave migration to java to make this process smooth i suggest to update jbehave dependencies to the latest available ones and compatible with java now jbehave uses code xml groupid commons collections groupid artifactid commons collections artifactid version version code i propose to upgrade it to apache commons collections version is also available but it requires java ,Improvement
 and annotation the requirement and business analysts at my company are writing user stories using the ' and ' parameter it would be very very useful if you could implement this annotation ,New Feature
add support for teamcity build script interaction provide support for teamcity via the build script interaction teamcity will interpret jbehave scenarios as tests providing the pass fail status and the timing for each test ,New Feature
storyreporter restartedstory is printed on a closed stream in printstreamoutput class after a story is restarted storyreporter restartedstory call is made after storyreporter afterstory is invoked this results in a closed stream for non system out based outputstreams as a result of this issue is not possible to know that story has been restarted other than looking the system out stream a maven project that demostrates this while debugging has been created at,Bug
meta data declared at the scenario level are not reported jbehave version when declaring meta infos into a story at the story level and also at the scenario level only the story level meta informations appear in the xml report scenario level meta informations are not reported looking into the jbehave source code i 've found that the code java storyreporter code interface provide a code java scenariometa code method thing is code java storyreporter scenariometa code method is invoked by the now deprecated code java org jbehave core embedder storyrunner code in the code java runcancellable code method see line code java storyrunner code seems deprecated and the code java performabletree code is now preferred and used but looking at this code java performabletree code class and especially on the code java performabletree performablescenario perform runcontext context code method see line there is no more call to the code java storyreporter scenariometa code as it was done in the code java storyrunner code see the joined sample maven project to reproduce the issue and especially the readme mediawiki for more infos ,Bug
dynamic data for scenarios would be nice to have a feature that allows inject table right before the scenario execution i e we have such scenario given login page opened when login is entered and password is entered then welcome page is displayed examples examples logininfo table in general case data in logininfo table might become outdated from the moment it was generated during parsing all stories in the suite and at the moment this particular story scheduled for the execution having some functionality that allows to get access to the logininfo table right before scenario execution to check it and requiest new from some dataprovider looks quite reasonable the same for the steps parameterized with exampletables i e when user enters info for product from productinfo table,Improvement
scenario metadata is not broadcast to storyreporters in jbehave storyreporter scenariometa is not invoked from performabletable performablescenario the now deprecated storyrunner does this immediately after beforescenario as a consequence story reports created with jbehave do not contain scenario meta information reports generated by jbehave are ok ,Bug
add flaky status to test results problem is described here,New Feature
story execution continues with steps even of failure of givenstory story execution continues with steps even of failure of givenstory if there are given stories if there is a failure in givenstory in console it was showing but executing the second given story how to fix this ,Bug
beforestory mechanism should be added to the story lifecycle beforestory mechanism should be added to the story lifecycle currently the lifecycle support only beforescenario capability as shown in bellow but it 's require to have a capability like beforestory in the story level currently it 's there only in steps classes and if there are multiple steps classes having multiple beforestory annotation all will execute which is not needed for a particular story priority has been increased since we are having a huge requirement to have beforestory capability in story level rather than steps level actual lifecycle before given a step that is executed before each scenario after outcome any given a step that is executed after each scenario regardless of outcome outcome success expected lifecycle beforestory given a step that is executed before the story before given a step that is executed before each scenario after outcome any given a step that is executed after each scenario regardless of outcome afterstory given a step that is executed after the story regardless of outcome outcome success,Improvement
cancellationexceptions are not part of the story reports if a story execution exceeds its timeout the future representing it is cancelled by storymanager in most cases this results in an unhandled interruptedexception that aborts the story execution and in turn is included in the story report however if the story execution handles the interrupedexception e g by perfoming some wait in this manner try thread sleep catch interruptedexecption e don't care then the story might get executed to the end and the story report might conclude as successful on the other hand test execution will fail because the embedded will collect a cancellationexception when invoking future get it would be nice if the story report always contained the information that the story was cancelled sample project run tests with mvn clean verify djbehave threads the build fails but neither jbehave nor serenity reports contain any trace of the cancellation jbehave version ,Bug
storyreporter beforestory invoked after story execution when multithreaded with multiple jbehave threads the beforestory method of a storyreporter is invoked after the story has been actually performed sample project is available here i am using the storyreporter in single threaded mode to expose information on the currently executing story to the step implementations this way i can generate meaningful logs screenshot file names is there any other way to access the story object in a step implementation that works also in multithreaded mode ,Bug
duplicate step error message not reported it seems that the duplicatecandidatefound exception is getting lost inside the embedder test case is attached the only error message i get is code org jbehave core embedder embedder runningstoriesfailed failures in running stories in batch java util concurrent futuretask d d e failures in running stories lost diagnostics story at org jbehave core embedder embedder runstoriesaspaths embedder java at org jbehave core junit junitstory run junitstory java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org junit runners model frameworkmethod runreflectivecall frameworkmethod java at org junit internal runners model reflectivecallable run reflectivecallable java at org junit runners model frameworkmethod invokeexplosively frameworkmethod java at org junit internal runners statements invokemethod evaluate invokemethod java at org junit runners blockjunit classrunner runnotignored blockjunit classrunner java at org junit runners blockjunit classrunner runchild blockjunit classrunner java at org junit runners blockjunit classrunner runchild blockjunit classrunner java at org junit runners parentrunner run parentrunner java at org junit runners parentrunner schedule parentrunner java at org junit runners parentrunner runchildren parentrunner java at org junit runners parentrunner access parentrunner java at org junit runners parentrunner evaluate parentrunner java at org junit runners parentrunner run parentrunner java at org eclipse jdt internal junit runner junit testreference run junit testreference java at org eclipse jdt internal junit runner testexecution run testexecution java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner run remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner main remotetestrunner java code ,Bug
make saucelabscrossreference extensible by subclasses to allow extensibility make the map of story to sauce urls protected in saucelabscrossreference,Improvement
seleniumcontextstoryreporter has issues tracking the current scenario when using givenstories given a story with a givenstories directive such as this scenario reset customer search button should clear results givenstories dw grapevine stories customer search searchbyfirstandlastname story when the user clicks on the reset button then all the search input fields should be cleared seleniumcontextstoryreporter will lose track of the current scenario and report all steps as belonging to the givenstories scenario i 'm pretty sure this is because it only implements the ' beforescenario ' method it would be useful if it could also implement the ' afterscenario ' method and reset the currentscenario correctly,Improvement
allow filtering on story and scenario elements now that we have story and scenario elements exposed as meta jbehave we can filter on them e g using filter code groovy path a long story code ,Improvement
provide null object implementation of monitors a implementation of monitors has following advantages provided out of box a no op impl allows easy extensibility allows evolution of methods and signatures via deprecation,Improvement
multiline scenario title appears on line in html report given i have a scenario text scenario as a jbehave user i want to be able to create multiline description and keep doing it forever and ever when scenario is executed then html report should show it in multiple line as it appears on console,Improvement
parameterconverters numberformatexception exception java lang numberformatexception multiple points at sun misc floatingdecimal readjavaformatstring floatingdecimal java at java lang double parsedouble double java at java text digitlist getdouble digitlist java at java text decimalformat parse decimalformat java at java text numberformat parse numberformat java at org jbehave core steps parameterconverters numberconverter convertvalue parameterconverters java at org jbehave core steps parameterconverters convert parameterconverters java at org jbehave core steps stepcreator convertparameters stepcreator java at org jbehave core steps stepcreator access stepcreator java at org jbehave core steps stepcreator parameterizedstep parametrisestep stepcreator java at org jbehave core steps stepcreator parameterizedstep perform stepcreator java at org jbehave core embedder storyrunner finesofar run storyrunner java at org jbehave core embedder storyrunner runstepswhilekeepingstate storyrunner java at org jbehave core embedder storyrunner runscenariosteps storyrunner java at org jbehave core embedder storyrunner runit storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder embedder enqueuedstory call embedder java at org jbehave core embedder embedder enqueuedstory call embedder java at java util concurrent futuretask sync innerrun futuretask java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor worker runtask threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java ,Bug
 named not respecting parameter order named does n't seem to do its job and parameter ordering in the method declaration seems to confuse the assignment code for instance given a var with var and var void testvars named var string var named var string var named var string var when executing testvars it assigns var var var var but var var clearly the correct assignment is var var ,Bug
close down stats file input stream after loading them as suggested in,Improvement
stories not found if code location paths contains spaces i started a jbehave spring project by using the archetype console mvn archetype generate dgroupid com mycompany app dartifactid my webapp darchetypeartifactid jbehave spring archetype darchetypegroupid org jbehave darchetypeversion dversion snapshot console if i do that in a parent folder containing spaces in name no story is found and executed while console mvn clean integration test console to reproduce the problem independent from parent folder name i change the target path of the project to the target ,Bug
improve saucelabs settings interop saucelabs has a few timeout settings that can be set per job allow for them to be overridable defaulted and settable by system property,Improvement
ant copy depedencies improvements i have suggestions for improvements of the ant copy dependencies process or suggestions and question update maven ant tasks to the current version the maven ant tasks jar should n't be in lib since it is not a dependency of jbehave maybe if should be in a subdir ant is it intentional that the binary distribution does n't contain any binaries it just downloads the jbehave jars along with the dependencies ,Improvement
webrunner should manage the run context of multiple stories a web interface to submit in background multiple stories check their status view their results,New Feature
scenario title parsed to empty on windows windows regex does not properly parse the scenario title while it works fine on other platforms ,Bug
title before scenario ends up as package name when i run a story that has a comment as the first line of the text the jbehave xunit display in jenkins takes the comment as test name and misses the story file name comment scenario user visits home page a very simple test given user is on home page then home page is shown the resulting path is then root comment user visits home page,Bug
metafilters skip does n't work while skip true works the examples on the jbehave org site consistently use skip as meta filter to exclude stories marked with skip true which does n't work however skip true works as expected either the parsing of the filter condition is broken or the examples could be changed to use skip true ,Bug
speed up regexstoryparser by removing leading we noticed our jbehave tests taking a long time mostly our fault but also a surprising amount of time spent in matcher find from regexstoryparser said the profiler who knew turns out that happens when you call find on long lines and your regex starts with as this guy explains so we removed it and our tests ran a little faster we removed it only from the expressions used with find we did n't touch the ones using matches and your tests run a lot faster unfortunately i do n't know how to prevent regression here i do n't see performance tests and the behavior did n't change you can note how long things take on the continuous integration server though and it 's pretty easy to imagine someone coming through and making the regular expressions all look the same still there you have it ,Improvement
provide storymanager to manage execution and outcomes of running stories embedder has become too big as a facade including all the concurrency management of stories a storymanager should be introduced responsible for the concurrent submission of running stories and their execution monitoring the individual stories would still be run by the storyrunner ,New Feature
total exclusion of excluded stories from reports consider mvn clean install dmeta filter groovy color ' xxx ' some of the output will be beforestories info running story etsy browse story browse etsy com etsy browse story meta category browsing color red info meta properties narrative narrative inorderto show the browsing cart functionality asa user iwantto browse in a gallery color red description browse etsy com category browsing path etsy browse story excluded by filter ' groovy color ' xxx ' ' info meta properties givenstories narrative narrative inorderto show the browsing cart functionality asa user iwantto browse in a gallery color red examplestable description browse etsy com category browsing path etsy browse story title browsing around the site for items excluded by filter ' groovy color ' xxx ' ' groovy color ' xxx ' info running story etsy cart story shoppingcart functionality for etsy com etsy cart story meta category basic color blue info meta properties narrative narrative inorderto show the basic cart functionality asa user iwantto add and remove items from the cart color blue description shoppingcart functionality for etsy com category basic path etsy cart story excluded by filter ' groovy color ' xxx ' ' info meta properties givenstories narrative narrative inorderto show the basic cart functionality asa user iwantto add and remove items from the cart color blue examplestable description shoppingcart functionality for etsy com category basic path etsy cart story title item can be added to cart excluded by filter ' groovy color ' xxx ' ' info meta properties givenstories narrative narrative inorderto show the basic cart functionality asa user iwantto add and remove items from the cart color blue examplestable description shoppingcart functionality for etsy com category basic path etsy cart story title item can be removed from cart excluded by filter ' groovy color ' xxx ' ' groovy color ' xxx ' info running story etsy pending story pending etsy com stories etsy pending story meta category development info meta properties narrative narrative inorderto allow stories to written before they 're implemented asa user iwantto allow pending stories description pending etsy com stories category development path etsy pending story excluded by filter ' groovy color ' xxx ' ' info meta properties givenstories narrative narrative inorderto allow stories to written before they 're implemented asa user iwantto allow pending stories examplestable description pending etsy com stories category development path etsy pending story title functionality not yet implemented excluded by filter ' groovy color ' xxx ' ' groovy color ' xxx ' info running story etsy search story search etsy com by sub category etsy search story meta category advanced color red info meta properties narrative narrative inorderto show the advance cart functionality asa user iwantto search for an item in a sub category color red description search etsy com by sub category category advanced path etsy search story excluded by filter ' groovy color ' xxx ' ' info meta properties givenstories narrative narrative inorderto show the advance cart functionality asa user iwantto search for an item in a sub category color red examplestable description search etsy com by sub category category advanced path etsy search story title advanced search for a hat excluded by filter ' groovy color ' xxx ' ' info meta properties givenstories narrative narrative inorderto show the advance cart functionality asa user iwantto search for an item in a sub category color red examplestable description search etsy com by sub category category advanced path etsy search story title advanced search for a ring excluded by filter ' groovy color ' xxx ' ' groovy color ' xxx ' afterstories it would be better if the output were beforestories tests excluded because of filter afterstories not just for console output but it would be much better if the vestige xml html stats files were gone too ,Improvement
support nested composite steps having composite steps calling other composite steps does not seem to work at all code java then all buttons are enabled composite steps then all left buttons are enabled then all top buttons are enabled public void all then all left buttons are enabled composite steps then first left button is enabled then second left button is enabled public void left then all top buttons are enabled composite steps then first top button is enabled then second top button is enabled public void top then first top button is enabled public void firsttop assert fail bah code in the given scenario neither the substeps will be resolved nor called so then second top button is enabled will not be marked as pending and then first top button is enabled wo n't fail that 's not nice as it might break your steps if you do some refactorings to them composite calls should not need know if they again resolve to composite steps ,Improvement
allow configuration of view directory in maven goal unpack view resources currently the view directory in which resources are unpacked is built from the embedder 's story reporter builder in some cases it may be useful to explicitly set the view directory in the maven configuration if not set it will default to the embedder 's specification ,Improvement
add saucelabs contextview should use the webdriver javascriptexecutor nature to send current scenario context ,New Feature
unable to retrieve jbehave core from the codehaus maven repository we use nexus as a repository manager and we are unable to retrieve the jbehave core core from codehaus nexus returns the server has not found anything matching the request uri i have also tried retrieving other jbehave related artefacts such as javadoc and get the same error ,Bug
add jenkins support as jenkins and hudson have started to diverge it 's useful to have separate plugins that can track different versions of the tools ,New Feature
improve robustness around job timeout on saucelabs saucelabs communicates timeout via a specific string job on sauce is already complete trap for that and indicate that the webdriver instance is no longer usable for that story ,Improvement
integrate jira we are using jira to organise our stories it would be nice to integrate the story files directly from jira so you do n't have to write them twice at this moment we write the acceptance criteria for a story in jira and we copy them into our projects my idea is to extend the loadfromurl class to add the functionality to log into a page like for google docs something like loadfromsecuredurl loadfromjira then write a parser that extracts the fields from a story in jira as plain text like you propose it here,Improvement
metafilter should support meta matching logic written in a groovy little language example suite smoke suite regression process booking groovy closures would be an effective way to construct an alternate grammar it should be a non default implementation to allow for backwards compatibility ,Improvement
stackoverflowerror in regexstoryparser with long scenario titles recently we started to use jbehave in my project and since we use it as a way to automate our systems testing we have a need for rather long textual descriptions between the scenario keyword and the first given then we run into the problem with long strings and the long known bug in java regexp library i constructed a unit test that reproduces the error and then found a simple fix and some performance enhancement in the regexstoryparser patch attached ,Bug
parameterconverters throwing concurrentmodificationexception java util concurrentmodificationexception at java util abstractlist itr checkforcomodification abstractlist java at java util abstractlist itr next abstractlist java at org jbehave core steps parameterconverters convert parameterconverters java at org jbehave core steps stepcreator convertparameters stepcreator java at org jbehave core steps stepcreator access stepcreator java at org jbehave core steps stepcreator parameterizedstep parametrisestep stepcreator java at org jbehave core steps stepcreator parameterizedstep perform stepcreator java at com foobar config scenariobasedstoryrunner finesofar run scenariobasedstoryrunner java at com foobar config scenariobasedstoryrunner runstepswhilekeepingstate scenariobasedstoryrunner java at com foobar config scenariobasedstoryrunner runscenariosteps scenariobasedstoryrunner java at com foobar config scenariobasedstoryrunner runit scenariobasedstoryrunner java at com foobar config scenariobasedstoryrunner run scenariobasedstoryrunner java at com foobar config scenariobasedstoryrunner run scenariobasedstoryrunner java at org jbehave core embedder embedder enqueuedstory call embedder java at org jbehave core embedder embedder enqueuedstory call embedder java at java util concurrent futuretask sync innerrun futuretask java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor worker runtask threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java ,Bug
fix typos in archetypes and removed unused file my step xml for non spring archetype i replaced the word on all files archetypes and examples and removed the spring file on the archetypes except spring ,Improvement
allow reports to be generated in fail fast mode even when in fail fast i e not ignoring failures in stories reports should be generated for the stories executed up to that point ,Improvement
ignore full stop period punctation at end of step i experienced some trouble especially with then steps ending with punctation characters noformat given i do this when i do that then i expect to see the message hello world noformat will require a step definition like code java then i expect to see the message message code mind that you must not forget the period at the end of the step definition otherwise message will be hello world rathen than hello world this is a quite common mistake and in addition it prevents the step definition to be reusable here noformat given i do this when i do that then i expect to see the message hello world and the world echoes hello john noformat where it is required to have an alias just because of the period or as alternative the assertions inside need to deal with the period at the end it would be nice if jbehave could ignore this period although it is not quite clear to me how to handle scenarios where the period needs to be parsed and of course such a change might break existing tests ,Improvement
allow mutability of examplestable when using examplestable to collect tabular parameter data it may be useful to allow additions of columns to the table for a given row e g to express a result value for given row the non affected rows would then be given default blank values for the new column likewise we could start from the content data list of maps and want to create a new table with modified content in other words examplestable could be used for both the string content and the content string transformations when implementing a step with tabular parameters ,Improvement
pending step failures not detected in stories view generation pending steps should cause a build failure in the view generation if the failinguponpendingstep strategy is configured ,Bug
localframecontextview is succeptible to something like xss not a security issue though the status display in org jbehave web selenium localframecontextview is constructing a html string for the current step by concatenating the strings with html tags this will not work if the step itself contains html tags or javascript fragments this does n't cause any real issues but it makes the current step fail in essence this is an injection error if this were in a web application this would be sufficient for a xss bug i noticed this when writing an example xss story for my project for now i just commented out the offending steps i will submit a patch when i get around to on the weekend ,Bug
expose story and scenario elements as meta on the back of jbehave it can be useful to expose story and scenario elements only top level ones and excluding the user defined meta properties as meta which can then be used for filtering or matching this can be done as a decorator method on the story and scenario model classes e g code meta storymeta story asmeta story meta scenariometa scenario asmeta scenario code where the prefix can be used to provide a namespace to avoid conflicts with user defined meta properties but can also be set to an empty string ,Improvement
pending steps methods leave invalid chars in the method name pending steps methods remove a few invalid chars from the method name however the following should be removed as well slash backslash and the different brackets are not allowed is allowed but is reserved for internal identifiers and should not be used normally iirc ,Bug
add i n keywords for story cancellation and duration since jbehave story cancellations are reported introduce new keywords to describe story cancellation and duration ,Improvement
support atomicinteger and atomiclong parameters atomic variables for multi threading scenarios ,Improvement
allow flashdriver javascript enabled delegate to be injected the delegate used by the flashdriver should be injectable via the flashwebdriverprovider ,Improvement
additonal saucelabs logging failed here and after scenario when a scenario has finished and jbehave is busy with afterscenario stuff then a stamp should be put in the saucelabs log similarly for the moment of scenario failure this will aid debugging of scripts ,Improvement
add xml templateable output provide an xml template similar to ftl jbehave html output ftl which can be easily customised ,New Feature
allow named parameters to be replaced in table row parameters values named parameters e g coming from the examples table in parametrised scenarios should be optionally replaced in the row parameters values given a parametrised table name value name scheme examples scheme scheme scheme values can be retrieved from the parameters row using the option to replace named parameters code boolean replacenamedparameters true string value table getrowasparameters replacenamedparameters valueas value string class code ,Improvement
add scala support add support to allow steps to be written in scala,New Feature
can not use the same step multiple times in a scenario i have a story that looks like this code meta themes book scenario as a member i can return all my borrowed books at once given an empty library and a user user has borrowed books isbns and a user user has borrowed books isbns when user user returns all his books then books isbns are not borrowed anymore by user user and books isbns are still borrowed by user user examples user isbns user isbns user dings com user dings com user dings com user dings com user dings com user dings com user dings com user dings com user dings com user dings com code as you can see i would like to reuse a step times with different parameter sets user isbns and user isbns jbehave forces me to wrote different step definitions annotated methods because the named actually pulls the value straight out of the examples table regardless of what parameters match the step so i am forced to do this very ugly imho code given a user user has borrowed books isbns public void createlistofborrowedbooks named user string user named isbns string isbns throws sqlexception given a user user has borrowed books isbns public void createlistofborrowedbooks named user string user named isbns string isbns throws sqlexception createlistofborrowedbooks user isbns code i regarded the steps as something similar to a method or keyword but now i realize that there are subtle differences as weird as robot frameworks syntax and grammar might be sometimes it is coping much better with these circumstances ,Bug
ant copy dependencies task for the bin distribution does n't work in windows i tried to run the copy dependencies tasks in ant running in windows this fails since the setup task always tries to delete and copy the jar file which is n't possible since windows does n't delete files that are currently open i assume it will not work either when the lib directory for ant is not writable in linux copying the file to the lib directory does n't work the first time anyway since the path is searched before ant is started so the first time and has to be run twice it is better to keep the jar file in the current directory and reference the file with a taskdef definition this should work in all cases i have attached a changed build xml with the task defintion ,Bug
pendingstepmethodgenerator does n't put a space between and when copying the generated pending step methods i noticed that the space is missing between the opening brace and the first curly bracket for the method definition i think it is more consistent to follow the convention for the example methods as well this appears in the unit tests for pendingstepmethodgeneratorbehaviour as well so i had to adapt these as well ,Improvement
allow wrapping of selenium commandexecutor for instrumentation purposes implement the following httpcommandexecutor wrapcommandexecutor httpcommandexecutor httpcommandexecutor in the saucelabs provider,Improvement
misprint in class name htmltemplateou t put resulting in a broken link at jbehave site htmltemplateoutput link points to while via google i could find the following ,Bug
eliminate format as a factory for storyreporter storyreporter is made by format and that feels an unnecessary oo separation making custom reporters is cumbersome as a result can we kill the format class ,Improvement
wrap runtime exceptions as mojofailureexception to avoid fatal outcome runtime exceptions cause mvn to report outcome as fatal errors which does not play well with some ci systems wrap them as mojofailureexception ,Improvement
allow pluggable embedder failure handling strategies the embedder currently throws a runningstoriesfailed exception when stories fail as requested by steve cresswell it 'd be useful to introduce an embedderfailurestrategy interface with default implementation which throws a runningstoriesfailed exception but which can be overridden by users to provide alternative pluggable behaviour of failure handling ,New Feature
support with annotation is it possible to support a with tag in scenarios e g instead of using the following given a new trade and trade price of the following would read better given a new trade with trade price of,New Feature
ant copy dependencies binary distribution does n't find all required artifacts when the local maven cache is empty starting with a local m repository the does n't have the files cached ant copy dependencies does n't find all necessary artifacts log shortened build failed home lehmann jbehave jbehave lib build xml unable to resolve artifact missing com google gdata gdata java client jar atlassian org jboss weld se weld se jar final it seems that the settings xml file is not used at all e g it never looks at the glassfish repository however if you run mvn test s settings xml the depencies are found and later the ant task completes successfully as well once the files are cached ,Bug
add standalone cross reference navigator importing paul 's story navigator as a standalone html js application that allows the navigation of the cross reference report output ,New Feature
html decoration for parameter empty string puts a span between each char in the line when using a story step that has an empty parameter when decoration the html output of the story a span is put between each character probably since a substring match or regex matches everywhere this makes the text look kind of odd since the spacing between the char changes if the parameter is empty the coloring could just be skipped quote when user enters and clicks link then result shown quote ,Bug
embedder 's calculation of timed out stories is naive noformat waituntilalldoneorfailed long start system currenttimemillis noformat start really should be laststeptime and be updated everytime a step executes ,Improvement
change language throughout for filter exclusion from ' notallowed ' to ' excluded ' should be fix version s x but that is not available yet ,Improvement
when step have parameters and of them is in tabular form then it is n't presented as table in story 's html report for example we have an following given given the cat with following parameters in tabular form color height weight brown cm kg where cat is parameter and table is parameter as a result table data will not being converted to table in html report my research shows that issue related to n replacement in stepcreator java method code private string replaceparametervalue string steptext int position type types string parameters type type types position string value parameters position if value null if istable type steptext steptext replace value parameter table start value parameter table end else steptext steptext replace value parameter value start value parameter value end replace n parameter value newline return steptext code ,Bug
executorservice instance not shutdown at the end of stories only shutdown for ones not injected in,Bug
allow storymanager to submit a single textual story not retrievable by path when running in some embedded contexts e g web contexts stories may be specified via textareas and not retrievable via path allow the storymanager to run a single story as text identified by a story id which will play the same role as the path ,New Feature
webrunner findsteps should allow auto completion of step patterns as noted on the users ' list it 'd useful for the webrunner to allow auto completion of step pattern in the findsteps page add an ' explore ' section where a user can start typing any part of a step pattern and get shown a list of patterns that are annotated in the candidate steps classes once a pattern has been chosen the method and class can also be shown note that exploring the step pattern is different from matching the textual step a given textual step can be matched by multiple step pattern ,New Feature
improve embedder monitoring add monitoring of embedder controls add story timeouts,Improvement
webrunner should be responsible for all running functionality sync and async webrunner should use the storymanager created by the embedder all the running concerns in should allow both synchronous running via run story which waits for output and asynchronous running via submit story which does not wait and delegates outputs to view story webqueue functionality of asynchronous running is now redundant webqueue module should be removed ,Improvement
allow stack traces of failures to be printed in verbose mode batchfailures collects the throwables encountered in the story execution and is wrapped by the downstream runningstoriesfailed exception add a verbose flag to allow the stack traces to be printed flag is off by default but is controllable via the embeddercontrols and the usingembedder annotation ,Improvement
html decoration marks parameters twice following up on jbehave this works now correctly for empty strings however all other parameters are enclosed in a span twice if an example table is used this was present in as well apparently the parameters are marked once using the name enclosed in angle brackets and then once more by string replace by the function that is used for normal steps as well this does n't cause any change is the html display so it 's not a very big problem the xml looks odd however since the parameter tag appears twice ,Bug
more control of verbosity of excluded stories by filter printing of stories that were excluded by filter is not desirable for projects that have many hundreds of stories add a verbosefiltering flag in embeddercontrols defaulting to false that can be set in the usual ways maven ant configuration usingembedder annotation via verbose filtering system property using propertybasedembeddercontrols or programmatically via embeddercontrols ,Improvement
support alternative narrative syntax support the alternative narrative syntax as a i want to so that supported in core from jbehave ,Improvement
support multiple formats of story timeouts add support for specification of story timeouts via multiple formats a simple and readable alpha numeric format should be supported with formats like d h m s m s s a digits format expressing the number of seconds should also be supported for backward compatibility other formats could also be added in the future eg iso custom formats should also be configurable ,Improvement
outcomes table does n't work with a boolean comparison that is false this outcome outcomes addoutcome test true equalto false gives this error error on line column in ftl jbehave html output ftl expecting a string date or number here expression value is instead a freemarker ext beans booleanmodel the problematic instruction value html on line column in ftl jbehave html output ftl in user directive renderoutcomevalue on line column in ftl jbehave html output ftl in user directive renderoutcomes on line column in ftl jbehave html output ftl in user directive renderstep on line column in ftl jbehave html output ftl java backtrace for programmers freemarker core nonstringexception it works with true true ,Bug
create container scenario type for parameterised scenarios i need to do some post processing on scenarios my specific use case is to report success failure to a ci tool via an api and have parameterised scenarios treated as a whole i e if example fails the whole scenario fails instead of each example row being treated individually currently the afterscenario annotation only supports treatment of each example row as an independent scenario i have posted the conversation i had with mauro on the mailing list today below hi all i have a few scenarios that are parameterised by an example table i want to do some specific processing afterwards depending on whether or not the scenario was a success or a failure this problem i 'm running into is that jbehave is treating the result of the last example as the result for the whole scenario so if the first examples fail but the last succeeds as in my sample below the scenario will be treated as a success does anyone know of any way to configure this so that if any of the examples fail the whole scenario is considered a failure to be clear i only want to do the processing after the whole scenario has run so using upontype scenariotype example will not work i 've included my sample code below story file feature some feature narrative as a user i want to do a thing so that i can do another thing scenario some scenario given a word ' word ' when something happens then something else should happen examples word lemon lemon banana step file public class somesteps afterscenario upontype scenariotype normal uponoutcome outcome failure public void afterscenariofail system out println failure afterscenario upontype scenariotype normal uponoutcome outcome success public void afterscenariopass system out println success given a word ' word ' public void performsearch named word string word if banana equals word fail failed when something happens public void imageresultsdisplayed then something else should happen public void seerefinedsearchsuggestion mauro talevi am hours ago you should then configure storycontrols doresetstatebeforescenario false so that the previous failure will not be reset and it will be reported at the end of the execution me paul robbins change pm hours ago mauro thank you for the quick reply unfortunately this solution presents the opposite problem now if i have multiple scenarios within a single story file and scenarios that come after the failed are determined to be failures what i 'm looking for is some way to configure so that each scenario 's success failure is determined independently but the scenario is counted as a failure if of its examples fails mauro talevi pm hours ago possible solution could be to introduce a new story control flag to reset state only for example scenarios while normal scenarios are controlled by the existing flag then you could set the example scenario control flag to false while keeping the normal scenario flag to true default although this is not exactly what you 're looking for it seems the problem is that currently a scenario parametrised by example is not considered as scenario but multiple scenarios although jbehave knows the difference between a normal and an example scenario we could perhaps introduce a sort of a container scenario type that would keep track of the state during the execution of only examples scenarios in any case please raise a jira issue for it and we start the discussion the solution would need to be spiked and verified ,Improvement
last of subsequent and clauses with translated keywords is not performed i translated ' and ' keyword to ' ande ' actually i use russian word but in order to simplify i will use plain latin letters all other keywords remain the same when i try to execute simple scenario with then clauses concatenated by and noformat nopanel true when something happened then check first condition ande check second condition ande check third condition noformat then last clause is not matched with corresponding step and marked as pending although corresponding step is present in code if i use english keyword ' and ' all work fine i created sample project for reproducing bug ,Bug
support for given when then annotations in interfaces right now this kind of step is not supported code public interface foobarsteps given whatever bla bla void givenwhateverblabla public class foobarstepsimpl override public void givenwhateverblabla code the foobarstepsimpl wo n't be detected as annotation bearing class however i think it 'd be great to support them it would allow jdk proxies for steps and would allow separating step interface construction from actual step implementation example use case would be making it possible to test with the same stories client libraries with the same functionality but different apis by reimplementing the step classes using each library 's api i think the stepsfactory related changes needed are simple just take into account also interfaces when exploring methods for annotations and i 've identified also some changes needed in the steps class an ongoing tentative and untested attempt for the required changes in the steps class is here any opinion about this ,Improvement
npe during run tests in other languages i have a simple project jbehave thucydides from archetype net thucydides thucydides jbehave archetype and i modified class de jbehave acceptancetestsuite to change the locale of the test for other language e x german code lang java package de jbehave import net thucydides jbehave thucydidesjunitstories import net thucydides jbehave utf storyloader import java util locale import org jbehave core embeddable import org jbehave core configuration configuration import org jbehave core configuration keywords import org jbehave core i n localizedkeywords import org jbehave core parsers regexstoryparser public class acceptancetestsuite extends thucydidesjunitstories private final locale defaultstorylanguage new locale de override public configuration configuration configuration configuration super configuration class extends embeddable embeddableclass this getclass set stories and return report to french keywords keywords new localizedkeywords defaultstorylanguage configuration usekeywords keywords usestoryparser new regexstoryparser keywords usestoryloader new utf storyloader storyreporterbuilder withkeywords keywords return configuration code also i modified story file noformat szenario looking up the definition of ' apple ' gegeben the user is on the wikionary home page wenn the user looks up the definition of the word ' apple ' dann they should see the definition ' a common round fruit produced by the tree malus domestica cultivated in temperate climates ' szenario looking up the definition of ' pear ' gegeben the user is on the wikionary home page wenn the user looks up the definition of the word ' pear ' dann they should see the definition ' an edible fruit produced by the pear tree similar to an apple but elongated towards the stem ' noformat i ran the tests until now everything looked fine but when i added exmaples table in story file noformat szenario looking up the definition of ' word ' gegeben the user is on the wikionary home page wenn the user looks up the definition of the word ' word ' dann they should see the definition ' definition ' beispiele word definition apple a common round fruit produced by the tree malus domestica cultivated in temperate climates szenario looking up the definition of ' pear ' gegeben the user is on the wikionary home page wenn the user looks up the definition of the word ' pear ' dann they should see the definition ' an edible fruit produced by the pear tree similar to an apple but elongated towards the stem ' noformat next time npe occurred noformat test started looking up the definition of ' word ' szenario looking up the definition of ' word ' beispiele gegeben the user is on the wikionary home page wenn the user looks up the definition of the word ' word ' dann they should see the definition ' definition ' word definition apple a common round fruit produced by the tree malus domestica cultivated in temperate climates beispiel word apple definition a common round fruit produced by the tree mal us domestica cultivated in temperate climates failed to run story de stories consult dictionary lookupadefinition story java lang nullpointerexception at de codecentric jbehave junit monitoring junitscenarioreporter example junitscenarioreporter java at org jbehave core reporters delegatingstoryreporter example delegating storyreporter java at org jbehave core reporters concurrentstoryreporter example concurrent storyreporter java at org jbehave core embedder storyrunner runscenariosparametrisedbyexamp les storyrunner java at org jbehave core embedder storyrunner runcancellable storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storymanager enqueuedstory call storymanage r java at org jbehave core embedder storymanager enqueuedstory call storymanage r java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor runworker threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java before storyafterstories noformat workaround put file in your project in src main resources i n with change line noformat examplestablerow example ,Bug
named parameter values containing backslash and dollar characters cause side effects when using named parameters and examples table the named parameter value can cause side effects and wrongly transmitted parameter values if the value itself contains backslash ' ' and dollar ' ' characters this is because in examplestable replacenamedparameters map string string it is used string replaceall string string according to javadoc the replaceall uses regex capturing features that 's why using and cause side effects ,Improvement
error with tab character in comments when we write scenarios we use tab character to aline columns of tabulars the problem appears when such step is commented entirely or partially by prefixing each step line by the problem comes from the tab characters used in step tabular the result is that next uncommented step is recognized pending and thus scenario fails if tab characters are replaced by spaces the problem disappears i set this bug critical and not major because in our case we really need this bugfix ,Bug
eclipse plugin parser should be consistent with core parser with regards to comments the story editor eclipse plugin displays a line starting with as a comment line painting it green it does not require a space after it is the same with some other keywords in the story editor for example i can start a line with scenario blabla and the story editor recognizes it as a scenario but the story parser of jbehave core requires a space after a keyword like so it does not fit toghether the story parser of jbehave core and the of the eclipse plugin should parse the story in the same way otherwise it is misleading what the story editor displays besides that usually comment keywords do n't include a space xml sql javadoc etc so it is contra intuitive in a way but i do n't know how logical it would be to make an exception just for the comment keyword but not for given scenario and so on maybe a space should be optional for all story keywords ,Improvement
it is not possible to comment a scenario with if you write a scenario with parameter see example and comment the next scenario with then the previous when does n't work example this will not work scenario example when using profiles profile websocket scenario xxx the scenario example will not work because he think that scenario xxx is a parameter but if you comment something else like example comment after the example scenario it will work correct example this will work scenario example when using profiles profile websocket example comment,Bug
jbehave plugin for eclips counts steps and not scenarios as analysts we would prefer that jbehave counts real test scenarios in eclipse unitils and not all steps wich are only part of a test case example in screenshot below tests is then erronious we use version unitils jbehave version if you need any furthur information let me know kind regards nicolas ,Improvement
embedder recreates storymanager instead of using existing the method embedder runstoriesaspaths should use the correct method to get an instance of the storymanager currently it uses it recreates a new storymanager which prevents the user from manipulating the storymanager using the public storymanager function ,Bug
improve responsiveness of editor for large projects by not recreating the same stepmatcher for every candidate step on every keystroke improve responsiveness of editor for large projects by not recreating the same stepmatcher for every candidate step on every keystroke projects that have significant number of steps will experience lag on every keystroke when using the current jbehave eclipse plugin across any os reported as per github issues the following pull request attempts to resolve some of the issues regarding performance and responsiveness of the jbehave eclipse plugin improved responsiveness of editor for large projects ,Improvement
 asparameters tables are not formatted custom type parameter list is not formatted as html table only as plain string e g cell cell for example asparameters class sampleparameterclass given public void samplegiven list sampleparameterclass params would result a non formatted table i think the problem is in the stepcreator istable method because the input type is a list but list class isassignatlefrom examplestable class is not true but it is a table workaround is to replace list sampleparameterclass to examplestable parameter in your method and call the getrowas sampleparameterclass class on the examplestable ,Bug
story duration time in multi threading execution mode is higher than normal when running in multi threading mode the total is calculated as simply be the sum of each duration if you have a single thread then it will coincide with the build duration more or less but if you use multiple threads it 'll be off by a factor which should correspond to the number of threads the additional information of the average duration per thread the total sum of the story durations divided by the number of threads should also be available if you are in multi threading mode ,Improvement
story duration timeout occurs for not started story some time usestorytimeoutinsecs after starting my tests web browser is closed with warning warning story com sample qa stories login story duration of seconds has exceeded timeout of seconds no executed story exceed this time this is even before login story execution the clue is that the story contains all before and after methods the story is executed as of last stories are independent so this is not a problem so looks like timer is started for the story not in situation where story execution is started but when beforestories from that story is run for first executed story as a hook i exceeded usestorytimeoutinsecs very much for length of all my stories execution but in that case i am loosing mechanism for verifying story execution time i am using following jbehave versions jbehave core version beta jbehave core version jbehave site version jbehave site version ,Bug
scenarios not allowed by filter are not skipped and cause npes only occurs in x during the execution of the performablestory ,Bug
the method storymanager waituntilalldoneorfailed batchfailures can cancel un started stories i run several stories in parallel using the default multi threaded embedder executorservice and configure it with embeddercontrols threads sometimes the jbehave ends and no scenario but before and after scenario of my stories was even started it is not repeatable sometims it goes good i founded out that the method storymanager waituntilalldoneorfailed fails if there are only stories which are already submitted but not yet really started the method storymanager waituntilalldoneorfailed does n't consider them while is defining whether all stories are done or not however waituntilalldoneorfailed cancells them later the success or failure of stories depend therefore on the race condition of starting the stories and waituntilalldoneorfailed ,Bug
support package scanning for annotated steps classes add scanningstepsfactory implementation to retrieve and instantiate steps classes by scanning configured packages and finding classes containing annotated methods it can used programmatically or via the usingsteps annotation scanning will require optional org reflections reflections dependency ,Improvement
allow localised keywords to default to english locale if not found currently a localizedkeywordnotfound exception is thrown when a keyword is not found in the i n bundle for the chosen locale we should allow the lookup to default to the english locale if not found this would facilitate the updates of the bundles in non english locales ,Improvement
add formatting table transformer a tabletransformer that formats the table according to the max width of each column ,Improvement
test is passed even if scenario is failed env os x steps prepare story with scenarios each scenario has table with data in first scenario should be data which will cause to fail a scenario run jbehave test with junit annotation test expected result test is failed because of scenarios is failed actual result test is passed p s if to swap scenarios test will be failed looks like result is taken from last scenario ,Bug
upgrade dependencies to support jdk upgrade any dependencies to support jdk ,Improvement
jenkins plugin broken unmatched dependency current available jenkins plugin has unmatched dependency when installing it crashes with warning failed to load org jbehaveplugintype descriptorimpl jbehave is then not available in product configuration for processing the output i 'm not only with this problem here is a workaround which works great modified jenkins package without the problematic code ,Bug
printing lifecyle for steps without outcomes fails if a lifecyle step is creating with a step value without an outcome printing the lifecyle fails with nullpointerexception the issue is with a steps class in the lifecycle java class provides a constructor which can create a steps object without specifying an outcome it then assigns the outcome as null to another constructor public steps list string steps this null steps therefore if a lifecycle is created with a list of steps and without an outcome the outcomes are initialized to null this will cause a problem when the lifecycle is printed using a printstreamoutput in this block in the lifecycle lifecycle method public void lifecyle lifecycle lifecycle if lifecycle isempty print format lifecyclestart n keywords lifecycle if lifecycle getbeforesteps isempty print format lifecyclebeforestart n keywords before print lifecycle getbeforesteps print format lifecyclebeforeend if lifecycle getaftersteps isempty print format lifecycleafterstart n keywords after color red for org jbehave core annotations afterscenario outcome outcome lifecycle getoutcomes color print format lifecycleoutcome n keywords outcome i n outcome print lifecycle getaftersteps outcome print format lifecycleafterend print format lifecycleend n possible fixes add a null check to lifecycle method of the printstreamoutput class to skip printing outcomes that are null if creating a step without an outcome should not be permitted the contructor for lifecycle steps without the outcome should be removed and the constructor which accepts outcome as input should throw an exception if outcome passed in is null ,Bug
a unique syntax for steps parameters suitable for scenarios both with and without example table from quote it is also important to note that the same named annotated methods can match steps that are executed both as standalone or via examples table provided that both regex patterns are configured as the main pattern and as an alias given a stock of symbol symbol and a threshold of threshold standalone alias a stock of symbol and a threshold examples table public void astock named symbol string symbol named threshold double threshold quote from a user perspective it is a non sense to me those aliases do not provide any business value they make for duplication for free bad user experience that is forcing the user to write an alias just for jbehave to be able to handle both an example table and a standalone parametrized step a user should not need to bother about the differences the system should bother for him her instead by hiding the differences what i 'm suggesting here is to have a unique syntax for parameters based on ' ' as definitely the most suitable for variables to work with steps both with and without an example table therefore with the following step method code given a stock of symbol symbol and a threshold of threshold public void astock named symbol string symbol named threshold double threshold code users would be able to write the following scenarios code scenario with examples given a stock of symbol symbol and a threshold of threshold examples symbol threshold goog yhoo scenario without examples given a stock of symbol goog and a threshold of code now i 'm not sure about the implementation though whether it could be a simple change or require intensive re write i 've tried to have a look at the code storyrunner but i found it quite hard to follow what do you think thank you,Improvement
paranamer does n't support test steps with lambda expressions inside let 's implement simple step with lambda expression inside code import org jbehave core annotations when import org jbehave core model examplestable import java util list import java util stream collectors public class somesteps when cat eats species public void somethinghappens examplestable speciestable list string species speciestable getrows stream map r r get name collect collectors tolist for string s species system out println cat eat s code when jbehave tries to read parameter names following exception occurs code java lang arrayindexoutofboundsexception at com thoughtworks paranamer bytecodereadingparanamer classreader accept bytecodereadingparanamer java at com thoughtworks paranamer bytecodereadingparanamer classreader access bytecodereadingparanamer java at com thoughtworks paranamer bytecodereadingparanamer lookupparameternames bytecodereadingparanamer java at com thoughtworks paranamer cachingparanamer lookupparameternames cachingparanamer java at org jbehave core steps stepcreator paranamerparameternames stepcreator java at org jbehave core steps stepcreator parameternames stepcreator java at org jbehave core steps stepcreator access stepcreator java at org jbehave core steps stepcreator parametrisedstep parametrisestep stepcreator java at org jbehave core steps stepcreator parametrisedstep perform stepcreator java at org jbehave core embedder storyrunner finesofar run storyrunner java at org jbehave core embedder storyrunner runstepswhilekeepingstate storyrunner java at org jbehave core embedder storyrunner runscenariosteps storyrunner java at org jbehave core embedder storyrunner runstepswithlifecycle storyrunner java at org jbehave core embedder storyrunner runcancellable storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storymanager enqueuedstory call storymanager java at org jbehave core embedder storymanager enqueuedstory call storymanager java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor runworker threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java code but if i replace lambda expression with anonymous class all works fine code when cat eats species public void somethinghappens examplestable speciestable list string species speciestable getrows stream map new function map string string string override public string apply map string string row return row get name collect collectors tolist for string s species system out println cat eat s code this bug was also reported early for thucydides ,Bug
spelling does not work in story editor spell checking does not highlight wrong worlds spelling is enabled in file preferences ,Bug
improve extensibility of configuration and embedder elements in order to extend embedder and configuration classes and avoid race condition in osgi when using the set methods i want improve the way elements are configured and initialised raising the attributes ' visibility from private to protected using lazy initialisation of attributes ,Improvement
storyreporterbuilder fails to parse test results if story has givenstories in case of story with givenstories jbehave raport is broken although few scenarios has been successfully performed scenarios and steps are missing duration is improperly set to code title example of problematic story borderstyle solid author przemyslaw kwiecien organization example organization systems ltd givenstories com sample qa stories functionality story id create something with rates com sample qa stories other story id full sample scenario create something code report generated with such story is attached as jbehavebrokenreport jpg if givenstories is replaced by corresponding steps report is fine jbehavebrokenreport withoutgivenstories jpg jbehavebrokenreport jpg file shows more errors caused by the same problem this time more stories were run duration is totally broken i am using following jbehave versions jbehave core version beta jbehave core version jbehave site version jbehave site version code java title configuration borderstyle solid override public configuration configuration class extends sanityembedder embedderclass this getclass parameterconverters parameterconverters new parameterconverters examplestablefactory examplestablefactory new examplestablefactory new localizedkeywords new loadfromclasspath embedderclass parameterconverters parameterconverters addconverters new parameterconverters dateconverter new simpledateformat yyyy mm dd new parameterconverters examplestableconverter examplestablefactory new parameterconverters booleanconverter true false return new mostusefulconfiguration usestoryloader new loadfromclasspath embedderclass getclassloader usestoryparser new regexstoryparser examplestablefactory usestoryreporterbuilder new storyreporterbuilder withcodelocation codelocations codelocationfromclass embedderclass withdefaultformats withformats console txt html xml withcrossreference new crossreference withfailuretrace true withfailuretracecompression false useparameterconverters parameterconverters use custom date pattern usesteppatternparser new regexprefixcapturingpatternparser use ' ' instead of ' ' to identify parameters this little devil is optional usestepmonitor new silentstepmonitor useparameterconverters parameterconverters code ,Bug
weird behaviour when stories are cancelled i discovered that sometimes jbehave does not break the build in our ci system when some of the stories hang and are cancelled because of the timeout while trying to reproduce the issue i saw many many different outcomes of the build including a build success when stories timed out which makes them failed to me unfortunately not for all the cases i have a reproducible case but of the issues i can reproduce sources for the test project issues it can demonstrate h behave aborts the whole story so scenarios past the cancelled are not even visible in the report this happens even despite dofailonstorytimeout false and doignorefailureinstories true which to me should guarantee all scenarios to be processed before failing if in the test class constructor you set usestorytimeoutinsecs then it will kill the very first scenario and there is no signs of the second to be present the target jbehave view reports html report will look like scenarios total successful pending failed the target jbehave view reports html shows just code scenario slow and failing test given a default state when i do something slow failed java lang interruptedexception sleep interrupted story cancelled duration s code no second scenario h jbehave may report cancelled scenarios as successful change usestorytimeoutinsecs to the target jbehave view reports html report will look like scenarios total successful pending failed which seem to be just wrong given that target jbehave view test test html shows code scenario slow and failing test given a default state when i do something slow then nothing should happen failed java lang interruptedexception sleep interrupted scenario scenario description story cancelled duration s code so i see on failed scenario and cancelled but which of them jbehave thinks is successful overall it feels like the outcome hugely depends on what exact moment time out has expired which should not be like that i would expect as a correct behaviour that cancelled scenario should be always treated as failed definitely not successful and all the scenarios after it should be processed but not invoked given that story timeout has expired but at least reported in full maybe all the steps should be listed as skipped pending something else but they all should be present or otherwise if first scenario in each story files lots of scenarios just disappear from the report without any traces ,Bug
loose step matching not based on steptype hi i 've recently started working with jbehave and i am noticing duplication when a step method can be more than steptype e g code given the cart is empty when the cart is empty public void cartisempty code an easy workaround could be to support the following syntax code given the cart is empty when public void cartisempty code i e in case a method has multiple steptype annotations only value needs to be not empty but i think there 's a more elegant solution the cucumber book says something interesting about this quote given when then are the same it does n't actually matter which of the methods you use to register a step definition because cucumber ignores the keyword when matching a step under the hood all of the keyword methods are aliases for cucumber rbdsl register rb step definition the keywords are really just there for extra documentation to help you express the intent of each step or step definition this means that whether it was created with the method given when or then a step definition will match any gherkin step as long as the regular expression matches the main text of the step quote i like this concept at the end of the day a step is just a method that i may want to call at a certain point as the m th or the n th step in a scenario well different story for given 's vs then 's given my cart is empty then my cart is empty but as the cucumber book suggests then steps should be reworded to use should then my cart should be empty so what about going a little bit farther and defining a generic step annotation code step the cart is empty public void cartisempty code there is a problem though as i think this would break jbehave but then as far as i understand the ultimate solution would be to support regexes would n't it which is another feature that would be a very nice to have i think thanks,Improvement
allow entire story to be restarted for selenium tests that keep the same browser context throughout the story there are countless things that can go wrong such as network latency slow application etc since a false positive can cause people to quickly lose trust in the tests others advised that the story should restart x amount of times before failing the test there is a way to restart a single scenario but it is possible it could cause additional errors such as expecting to be on a specific page when the scenario starts context variables have been changed being in an unknown state with data ,New Feature
nullpointerexception with junit when using junit a problem appears when jbehave is trying to build the reporting quote java lang runtimeexception java lang nullpointerexception at de codecentric jbehave junit monitoring junitreportingrunner run junitreportingrunner java at org eclipse jdt internal junit runner junit testreference run junit testreference java at org eclipse jdt internal junit runner testexecution run testexecution java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner run remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner main remotetestrunner java caused by java lang nullpointerexception at de codecentric jbehave junit monitoring junitscenarioreporter afterstory junitscenarioreporter java at org jbehave core reporters delegatingstoryreporter afterstory delegatingstoryreporter java at org jbehave core reporters concurrentstoryreporter afterstory concurrentstoryreporter java at org jbehave core embedder performabletree performbeforeorafterstories performabletree java at org jbehave core embedder storymanager performstories storymanager java at org jbehave core embedder storymanager runstories storymanager java at org jbehave core embedder storymanager runstoriesaspaths storymanager java at org jbehave core embedder embedder runstoriesaspaths embedder java at de codecentric jbehave junit monitoring junitreportingrunner run junitreportingrunner java more quote the nullpointer is caused by following line quote junitreportingrunner private void initrootdescription rootdescription description createsuitedescription configurableembedder getclass rootdescription getchildren addall storydescriptions quote rootdescription getchildren returns a new array list of children so doing addall does not actually add the children to the actual list of description description class does offer a method addchild using this method would solve this issue,Bug
update tostring to show the system based values during the tests execution when calling embeddermonitor usingcontrols embeddercontrols embeddercontrols using propertybasedembeddercontrols the users must view the values in use based on system values rather than the object values please see the pull request at,Improvement
 before after scenario should by default apply to both scenarios parametrized by example table and not jbehave introduced scenariotype any as per title i think it should not matter whether we are running through an example table or not any should be the default value for upontype of beforescenario and afterscenario code public interface beforescenario scenariotype upontype default scenariotype any code in fact from a domain point of view there is no difference between a scenario with example table and without is there they 're both scenarios a scenario with example table is just a scenario template that at run time will result in many scenarios actually being run is n't it quote but in this case the name of the enum starts to feel bad quote as daniel pointed out the name is currently misleading i found myself wondering what was wrong once i set up a jbehave project with an beforescenario did n't explicitly specify upontype and sometimes it worked sometimes it did n't depending on which story i was running with or without example table if you agree on this i will then submit a pr thanks,Bug
filenotfoundexception storydurations props when generating reports on a maven build without any stories stories include none i get a filenotfoundexception with storydurations props info generating reports view to ' d workspaces git cassini acceptance acceptance view common target jbehave ' using formats ' stats console html ' and view properties ' ws ftl reports ftl jbehave reports with totals ftl nondecorated ftl jbehave report non decorated ftl decorated ftl jbehave report decorated ftl maps ftl jbehave maps ft java io filenotfoundexception d workspaces git cassini acceptance acceptance view common target jbehave storydurations props le fichier sp cifi est introuvable if i change my version back to changing nothing else then i do not get this exception it seems if the storyduration is n't found it 's not a problem and it should n't display a stack trace ,Bug
before after scenario steps and lifecycle steps are executed in wrong order when story contains lifecycle before after steps these are executed outside the beforescenario afterscenario scope for scenarios parametrised by example when the jbehave was implemented runlifecyclesteps is called before runbeforeorafterscenariosteps and in the reverse order at the end attached is patch with fix and test patch is based on commit dcd ,Bug
jbehave eclipse editor says no step is matching when using a constant inside annotations with jbehave it is possible to annotate a step method with given and when at the same time for example code given i take a screenshot when i take a screenshot public void screenshot code i tried not to repat myself and changed that to code private static final screenshot step name i take a screenshot given screenshot step name when screenshot step name public void screenshot code that compiles and works when executing the story using the step the step method is really called but in the jbehave eclipse editor it says that no step is matching the step name i take a screenshot it has to do with using the constant for the annotations so i think it is a bug in the jbehave eclipse editor ,Bug
autocompletion using regex in jbehave story editor the auto completion filters step names according to text input it would be easier to search for a step if the user can filter them in the way it works in the java editor when you type ctrl o you can then filter the method names in a little text field by a regular expression an alternative solution would be if the user can type a regular expression as the step name and autocompletion lists the step names matching to it if you have lots of step names then this could make it much easier to find a step name in the editior ,Improvement
 beforestory steps not performed before givenstories there seems to be a bug in beta concerning the usage of givenstories if i have a story which uses givenstories then i get this exception noformat org jbehave web selenium delegatingwebdriverprovider delegatewebdrivernotfound webdriver has not been found for this thread please verify you are using the correct webdriverprovider with the appropriate credentials if using remote access e g to saucelabs dsauce username xxxxxx dsauce access key xxx xxxx xxxx xxxx xxx at org jbehave web selenium delegatingwebdriverprovider get delegatingwebdriverprovider java at example pages pageobject getdriver pageobject java at example pages loginpage isloggedin loginpage java at example steps loginsteps userloggedin loginsteps java noformat if i use jbehave then it works as expected you can reproduce it with this example in class example seleniumstories java change story filter to string includes system getproperty story filter stammdaten mutation story it would be nice if you could fix it this week since this is the example for the second part of the paper on jbehave ,Bug
add scenariotype any to allow before afterscenario to run before after any scenario before afterscenario has parameter upontype that determines when it will run normal type is run once for all the scenario cases example type is run for each scenario case i am using the term scenario case for each row of the examples table in case of parametrised scenarios or the scenario itself in case of normal scenarios when you want to define e g before scenario step that will run before every scenario case regardless whether it is parametrised or not you must do something like this code java before scenario will be called x for the first scenario case private boolean initialized beforescenario public void beforescenario if initialized do some stuff initialized true beforescenario upontype scenariotype example public void beforeexample beforescenario code this is annoying and should be fixed there are some ways how to fix it i can think of simple add another value to scenariotype enum e g any but in this case the name of the enum starts to feel bad more work add annotation e g beforescenariocase what do you think is better am i missing something propose a solution and i can submit a patch ,Improvement
ensure lazy initialisation in configurableembedder configuredembedder i stumbled upon a beheavior of this method code org jbehave core configurableembedder configuredembedder code it always calls these methods when being called code embedder useconfiguration configuration embedder usecandidatesteps candidatesteps embedder usestepsfactory stepsfactory code this had some unexpected side effects for me for example i am logging which steps are being used since i call configuredembeder multiple times the method stepsfactory is called multiple times even if i use just instance of embedder it is called many times since the jbehave framework calls configuredembedder many times maybe it would be good if there is another method added to org jbehave core configurableembedder called configureembedder which actually configures the embedder every time when it is called but the method configuredembedder should maybe be implemented with lazy initialization so that the calls in its method are just executed once i tried this in the class which i extend from junitstories but then the meta filtering does not work for some strange reason so i could not find a solution for this ,Improvement
images failing screenshot png missing duplicating issue that i filed here in commit f a fcd da d ce e d f f e a reference to images failing screenshot png was added however i do n't see a corresponding commit in futhermore i do n't quite understand why the screenshot itself is n't inlined by default there is a link to the correct screenshot but the ' thumbnail image ' is n't found how about code img src screenshots failed scenario png alt failing screenshot code instead of code a color black href screenshots failed scenario png img src images failing screenshot png alt failing screenshot a code we are only talking about the ' failed ' case here so it 's not like the complete report is littered with screenshots assuming of course your tests succeed most of the time wink lastly as a workaround you can use this format instead if you want to have inline images code public class mywebdriverhtmloutput extends htmloutput public static final org jbehave core reporters format my web driver html new mywebdriverhtmlformat public mywebdriverhtmloutput printstream output keywords keywords super output failedpatternproperties keywords private static properties failedpatternproperties properties properties new properties properties put failed div class step failed span class keyword failed span br span class message failed span br img src screenshots failed scenario png alt failing screenshot div n return properties private static class mywebdriverhtmlformat extends org jbehave core reporters format public mywebdriverhtmlformat super html override public storyreporter createstoryreporter fileprintstreamfactory factory storyreporterbuilder storyreporterbuilder factory useconfiguration storyreporterbuilder fileconfiguration html return new mywebdriverhtmloutput factory createprintstream storyreporterbuilder keywords doreportfailuretrace storyreporterbuilder reportfailuretrace docompressfailuretrace storyreporterbuilder compressfailuretrace code ,Bug
add replacing table transformer a table transformer that will replace all values according to a regex,Improvement
allow storymanager to calculate story durations the story durations as calculated in the poststorystatisticscollector are not reliable in multi threading executions the storymanager should be responsible for their calculation the duration and hence the timeout should be calculated from the start of the callable task and not the submission ,Improvement
add jirametamatcher a metamatcher that looks up a jira issue via rest and allows the meta if the issue is open ,New Feature
lifecycle steps not aware of examples table data because the lifecycle object containing all the before after steps runs as a separate thing if any of those steps needs data from the examples table of each scenario it will not be found example lifecycle before given that i am looged as user scenario test when i do something then bleh examples user password usera passworda userb passwordb in this example the runner will not find a matching step because the method for the log in is expecting data but because the step is in the lifecycle the examples table is not provided to it,Bug
saucelab implementation for etsy selenium java spring project in jbehave tutorial hi currently i 'm able to see the saucelabs implementation only in etsy selenium groovy pico project in github but could you please implement the same in etsy selenium java spring project also please let us know how this is going to be work in saucelabs for java spring project with parallel runs ,Improvement
 beforescenario runs for every steps file that are instanciated when i run my scenario that are using multiple steps files the method that are annotated with beforescenario runs for each steps file i m excpecting it to only run per scenario not per steps file,Bug
storyreporter has no afterstep method i discovered that org jbehave core reporters storyreporter has no method afterstep it seems to have been forgotten so i created a jira issue for this ,Bug
add i n to gherkin support the i n example uses the regexstoryparser keywords keywords constructor but for gherkinstoryparser i n does n't seem to be supported could you add a gherkinstoryparser keywords keywords constructor example documentation for gherkin stories not written in english natural language is a core feature of bdd and we 'd like to use the emerging gherkin standad for story styntax ,New Feature
regression configuration method inherited from junitstories class not being overridden when creating a junitstories class the overridden configuration method is no longer executed starting in jbehave i also tested this with and beta and the issue persists only by changing the dependency version in my pom back to does the method override correctly again i have attached my storyreporter class the abstract class where the issue presents when version and an example embeddable junitrunner class that inherits from it mystoryreporter class is simply a reporter that prints information to system out where every callback prints a line starting with jbehave and emits whatever information is available you can run any story file from resources and see that the storyreporter does not get used unless you are on a version prior to you can also add a breakpoint in configuration and see that the breakpoint will be hit in but is never hit in and later ,Bug
when using givenstories the normal scenario is not excecuted when running a scenario with givenstories only the story in the file specified in the givenstories are run not the main story ,Bug
underscores in step parameters unsupported since jbehave starting with jbehave underscores are no longer supported in step parameters eg the following step annotation used to work with jbehave and before but results in a pending step when using and given a step containing an underscore in a parameter test param this must be related to jbehave and jbehave ,Bug
writing stories in plain english with words convertible to boolean provide an enum to allow story writers to write natural prose while developers can enjoy getting booleans for free quoting from the javadoc example of use given the following candidate step code given a stock of symbol symbol withthreshold a threshold public void astock string symbol booleanword withthreshold stock new stock symbol withthreshold withthreshold toboolean code it is then possible to write the following scenarios code scenario a stock with threshold given a stock of symbol aaa with a threshold when then scenario a stock with no threshold given a stock of symbol aaa without a threshold when then code please note that this depends on jbehave it would be nice if we could find an elegant way to internationalise the enum constants where there is only enum constant for each boolean word and the translations are kept in an external file any ideas ,New Feature
add fluentenumconverter able to convert lower cased space separated values to enums copying pasting from the javadoc an enumconverter allowing stories prose to be more natural before performing the actual conversion it transforms values to upper case with any non alphanumeric character replaced by an underscore ' ' example assuming we have defined the step given i am on the page which is mapped to the method iamonpage pageenum page we can then write in a scenario given i am on the login page instead of given i am on the login page warning this requires enum constants to follow the standard conventions for constant names i e all uppercase letters with words separated by underscores ,New Feature
stepcreator does n't support method generics parameters the issue is described here there is an example project attached description the scenario fails because org jbehave core steps parameterconverters parameterconvertionfailed no parameter converter for interface java util list ' if i debug he passes through the stringlistconverter but in the accept method the type is not an instance of parameterizedtype because in the stepcreator class you use method getparametertypes that does n't retrieve de generics but the class type so java util list solution stepcreator at line should be type parametertypes method getgenericparametertypes and the parameter class should receive a type instead of a class type,Bug
allow matching of lifecycle after steps by meta filter add new lifecycle element to specify the meta filter to match the after steps by outcome the matching should be made against the meta specified at scenario level ,Improvement
context view does not seem to work anymore in x i changed a project from jbehave to beta this caused that the context view is not displayed anymore i use the same code for applying the context view like i see in the jbehave examples today org jbehave examples core corestories you can use this example project to reproduce it sproradically the context view seems to work for example when i was using a composite step as the first executed step if i remember it correctly some things have been changed in jbehave for instance org jbehave core reporters crossreference getstepmonitor is deprecated but it is not documented what the new way is does the contextview still work in jbehave beta are you aware that it is obviously broken ,Bug
add table formatting add table formatting command ctlr f or cmd f for selected text formatting should also convert tabs as exported e g from a spreadsheet to table separators ,New Feature
concurrentmodificationexception in crossreference outputfile when tests are executed massivley multithreaded from time to time a concurrentmodificationexception is thrown when jbehave tries to write a report file trace code java util concurrentmodificationexception at java util hashmap hashiterator nextentry hashmap java at java util hashmap keyiterator next hashmap java at com thoughtworks xstream converters collections collectionconverter marshal collectionconverter java at com thoughtworks xstream core treemarshaller convert treemarshaller java at com thoughtworks xstream core treemarshaller convertanother treemarshaller java at com thoughtworks xstream converters reflection abstractreflectionconverter marshallfield abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter writefield abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter init abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter domarshal abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter marshal abstractreflectionconverter java at com thoughtworks xstream core treemarshaller convert treemarshaller java at com thoughtworks xstream core treemarshaller convertanother treemarshaller java at com thoughtworks xstream core treemarshaller convertanother treemarshaller java at com thoughtworks xstream converters collections abstractcollectionconverter writeitem abstractcollectionconverter java at com thoughtworks xstream converters collections collectionconverter marshal collectionconverter java at com thoughtworks xstream core treemarshaller convert treemarshaller java at com thoughtworks xstream core treemarshaller convertanother treemarshaller java at com thoughtworks xstream converters reflection abstractreflectionconverter marshallfield abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter writefield abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter init abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter domarshal abstractreflectionconverter java at com thoughtworks xstream converters reflection abstractreflectionconverter marshal abstractreflectionconverter java at com thoughtworks xstream core treemarshaller convert treemarshaller java at com thoughtworks xstream core treemarshaller convertanother treemarshaller java at com thoughtworks xstream core treemarshaller convertanother treemarshaller java at com thoughtworks xstream core treemarshaller start treemarshaller java at com thoughtworks xstream core abstracttreemarshallingstrategy marshal abstracttreemarshallingstrategy java at com thoughtworks xstream xstream marshal xstream java at com thoughtworks xstream xstream marshal xstream java at com thoughtworks xstream xstream toxml xstream java at com thoughtworks xstream xstream toxml xstream java at org jbehave core reporters crossreference outputfile crossreference java at org jbehave core reporters crossreference outputtofiles crossreference java at org jbehave core reporters crossreference afterstory crossreference java at org jbehave core reporters concurrentstoryreporter afterstory concurrentstoryreporter java at org jbehave core embedder storyrunner runcancellable storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storymanager enqueuedstory call storymanager java at org jbehave core embedder storymanager enqueuedstory call storymanager java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor runworker threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java code ,Bug
use of constant or expression in step priority results in missing step candidates the code for parsing the priority attribute of the jbehave annotations assumes that the value is an integer literal when it encounters a value that is a constant or expression it stops parsing the file and any steps that appear after the problematic are missed i do n't think there 's an easy way to evaluate the priority in these cases without involving the java compiler but an improvement would be to use the default priority or none at all and at least parse the rest of the steps in the file ,Bug
archetypes featuring a stepmonitor with jframecontextview what about adding the nice jframecontextview in all of the archetypes i 've started with the archetype simple if you like the idea i can add it to all ,Improvement
failinguponpendingsteps strategy not honoured when i run a story jbehave exits without waiting for the story results the same stories work perfectly in version ,Bug
multi threading in scenarios example tables we have many stories and story has scenarios it cost much time to run all of them by serial i know jbehave support multi threaded story execution capability could you also support multi threaded in scenario level and different data in example table ,Improvement
storyreporterbuilder withreporters breaks tests when using storyreporterbuilder withreporters new customjbehavestoryreporter the build not only somehow passes all the tests but still shows build fails but also nothing except given stories and after story are executed for instance the methods afterstep or other methods do not run in the customjbehavestoryreporter any help would be much appreciated ,Bug
givenstories are not working for me in jbehave web selenium beta hi i am new in jbehave and trying to setup automation framework using jbehave and selenium i am using ivy to execute the test i could able to do that successfully givenstories are not working for me i am sorry if this is not the right place to ask this question after trying for couple days and looking into the comments that givenstories works for everyone just sharing my example with experts if they help me out and point me what i am doing wrong ivy xml code dependencies todo the jbehave web selenium module uses an older selenium that does n't support modern firefox trying to stay on the latest selenium the beta below supports the new version of selenium we 'll see how buggy it is dependency org org jbehave web name jbehave web selenium rev beta dependency org org jbehave name jbehave rev dependency org org jbehave name jbehave core rev artifact name jbehave core type jar dependency dependency org org jbehave name jbehave ant rev dependency org org jbehave name jbehave distribution rev dependency org org seleniumhq selenium name selenium java rev dependency org org seleniumhq selenium name selenium support rev dependencies basetest java is attached which extends junitstories runasstories java is attached which extends basetest java this the entry point for me to execute stories file are attached common story this will be executed before some of the scenarios page story this will use givenstories to call common story this is present in a different package i tried keeping them in same package page story this will use givenstories to call common story for some of the scenarios what is happening here it open the browser and execute steps in common story then closes the browsers it open another browser and try to execute page story and it do not execute common story even path specified for givenstories it starts from and try to execute first page of application appears can someone please help in this and let me know if i need to updage any thing here ,Bug
allow metamatcher to be injectable to support custom implementations and extensibility of the meta matching the metamatcher should be injectable and default to the implementations provided in core if not injected ,Improvement
lifecycle steps after upon outcome in jbehave it is possible to use lifecyle steps which add steps before and after each scenario quote lifecycle before given i have a bank account and my balance is after then my balance is archived quote if a step of the scenario fails then the after steps are not executed this might be good in some situations but in another situations it would be good that the after steps are executed even in case of a failure for example could do some cleanups there can you please improve this so that it can be specified upon which outcome type the after steps are called in the story ,Improvement
upgrade selenium version i am using jbehave web with selenium which in turn support till mozilla v could you please upgrade jbehave web to support latest selenium webdriver and mozilla versions ,Improvement
reports should support configurable multiple view types currently reports view supports only the list view other view types should be supported e g tree or graph ,Improvement
allow timeout to be disabled by a value there are circumstances when stories should run without timeout a value for timeout should be interpreted as a story never timing out ,Improvement
localized story in a german version shows different behavior than english version i tried to use jbehave stories with german locales see text below and the attached example but und steps of the german story are n't fully recognized it is working with just und step but not with an additional english version of the story works fine even with and based step candidates ps by the way jbehave offers an annotation at and in this example report but there exists no at and annotation in jbehave step class public class kreditausfallversicherung at given sei eine kreditausfallversicherung mit einer laufzeit bis zum enddate public void maturitydateofcds string maturity system out println given maturitydateofcds maturity at given einer ausfallpr u e mie von spread pro jahr public void spreadandpaymentfrequency double spread system out println given spreadandpaymentfrequency spread at given einer konkursquote von recoveryrate public void andeinerkonkursquotevon double recoveryrate system out println given andeinerkonkursquotevon recoveryrate at when die kreditausfallversicherung bewertet wird public void wenndiekreditausfallversicherungbewertetwird system out println when wenndiekreditausfallversicherungbewertetwird at then wird zum presentdate der aktuelle wert presentvalue eur erwartet public void erwartet string presentdate double presentvalue system out println then erwartet presentdate presentvalue snipp german version erz hlung um eine kreditausfallversicherung als h ndler zu bewerten m chte ich den aktuellen wert berechnen vorher gegeben sei folgende risikolose zinskurve tage zinssatz szenario berechnung mit einer konkursquote von given maturitydateofcds gegeben sei eine kreditausfallversicherung mit einer laufzeit bis zum given spreadandpaymentfrequency und einer ausfallpr mie von pro jahr und einer konkursquote von ausstehend wenn die kreditausfallversicherung bewertet wird nicht ausgef hrt dann wird zum der aktuelle wert e eur erwartet nicht ausgef hrt at and einer konkursquote von at pending public void andeinerkonkursquotevon ausstehend snipp english version narrative in order to have the present value of a cds as a trader i want to calculate it scenario calculation with a recovery rate of step given maturitydateofcds given a creditdefaultswap with maturity date step given spreadperyear and a spread of per year step given recoveryrate and a recovery rate of step when itscalculated when its calculated step then expectvalueatriskdate then we expect at a present value of e eur,Bug
update jbehave needle to support latest version of needle j needle mock dependency framework reinvented itself and changed to a company independent needle j framework along with package renaming the project became a top level maven central project this change should be adopted in the jbehave needle in order to support latest needle version ,Improvement
polish language support this task is depend on polish leywords are there,Improvement
support both synchronous and delayed storyreporter in concurrentstoryreporter currently the the following is concurrentstoryreporter 's constructor code concurrentstoryreporter storyreporter crossreferencing storyreporter delegate boolean multithreading code i am just restate what is currently implementing crossreference was using storyreporter mechanic x to report on the duration stats which is only be taken if caller synchronously call the listener 's interface when multithread is true i e thread i have a feeling that the constructor would be removed since crossreference was refactored i was using the storyreporter crossreferencing parameter to support real time view of context contextview contextstoryreporter i hope you explicitly support this feature when removing crossreference parameter ,Improvement
unable to resolve dependencies using ant when following to resolve dependencies using ant the following error occurs copy dependencies artifact pom downloading org jbehave jbehave jbehave pom from reposit ory atlassian at artifact pom transferring k from atlassian artifact pom warning checksum failed checksum failed on download loca l ' ffbd afe cdf b c fc c c ' remote ' html artifact pom head title ' retrying artifact pom downloading org jbehave jbehave jbehave pom from reposit ory atlassian at artifact pom transferring k from atlassian artifact pom warning checksum failed checksum failed on download loca l ' ffbd afe cdf b c fc c c ' remote ' html artifact pom head title ' ignoring artifact pom an error has occurred while processing the maven artifact tasks artifact pom diagnosis artifact pom artifact pom unable to initialize pom pom xml can not find parent org jbehave jbehave for project null jbehave distribution pom null for project null jbehav e distribution pom null artifact pom not a v pom for project org jbehave jbehave at c path m repository org jbehave jbehave jbehave pom artifact pom having a look at the corresponding pom file discovers html head title moved permanently title head body bgcolor white center h moved permanently h center hr center nginx center body html the reason for this is that the distributed settings xml refers to an outdated url at the atlassian repo when changing the urls in the settings xml from to the issue is resolved this issue has been tested and can be reproduced for jbehave distribution and beta ,Bug
parametrised step is rendered incorrectly if there is more than parameter and a table when having exemples tables parameter with other parameter table is not transformed in generated reports error comes from stepcreator steptext steptext replace newline parameter value newline witch is done even if there is a table for instance given table my table with data instrument amount aud nzd for step given table table with data examples public void giventablewithdata string table examplestable examples ,Bug
resolvetopackagedname path resolver is broken on windows current implementation of ' org jbehave core reporters fileprintstreamfactory resolvetopackagedname ' is the following code java public static class resolvetopackagedname extends abstractpathresolver public string resolvename storylocation storylocation string extension string name storylocation getpath replace ' ' ' ' if name startswith name name substring return stringutils substringbeforelast name extension code in the case storylocation is represented by url noformat storylocation codelocation file c users dpelevin git test build classes test storypath file c users dpelevin git test build resources test stories test story storypathisurl true noformat we will get name with unescaped ' ' characters noformat c users dpelevin git test build classes jbehave file c users dpelevin git test build resources test stories test stats noformat such names are not valid on windows and jbehave fail with noformat java io filenotfoundexception c users dpelevin git test build classes jbehave file c users dpelevin git test build resources test stories test stats syntax error in the file name directory name or volume label java io fileoutputstream open native method java io fileoutputstream init fileoutputstream java org jbehave core reporters fileprintstreamfactory fileprintstream init fileprintstreamfactory java org jbehave core reporters fileprintstreamfactory createprintstream fileprintstreamfactory java org jbehave core reporters format createstoryreporter format java org jbehave core reporters storyreporterbuilder reporterfor storyreporterbuilder java org jbehave core reporters storyreporterbuilder build storyreporterbuilder java org jbehave core configuration configuration storyreporter configuration java org jbehave core embedder storyrunner reporterfor storyrunner java org jbehave core embedder storyrunner runcancellable storyrunner java org jbehave core embedder storyrunner run storyrunner java org jbehave core embedder storyrunner run storyrunner java org jbehave core embedder storymanager enqueuedstory call storymanager java org jbehave core embedder storymanager enqueuedstory call storymanager java java util concurrent futuretask run futuretask java java util concurrent threadpoolexecutor runworker threadpoolexecutor java java util concurrent threadpoolexecutor worker run threadpoolexecutor java java lang thread run thread java noformat workaround use ' org jbehave core reporters fileprintstreamfactory resolvetosimplename ' instead of ' resolvetopackagedname ' possible solution use only substring that start from next character after last ' ' in this case we will cut off protocol and disk name preserving only full path from the disk root invalid of invalid name noformat c users dpelevin git test build classes jbehave file c users dpelevin git test build resources test stories test stats noformat we will get valid noformat c users dpelevin git test build classes jbehave users dpelevin git test build resources test stories test stats,Bug
support for class based aop in step classes in spring when i add enableaspectjautoproxy in my spring setup with the bundled steps factory my step beans ca n't be found i 've done my own steps factory it assumes the use of a specific type annotation on the step classes to make it more clear which beans to explore but that can be removed in a more general case here it 's how it looks like wip code public class enhancedspringstepfactory extends abstractstepsfactory private static final logger logger loggerfactory getlogger enhancedspringstepfactory class private final applicationcontext context public enhancedspringstepfactory applicationcontext context configuration config super config this context context override public object createinstanceoftype class type return context getbean type override protected list class stepstypes set class result new hashset map string object beans context getbeanswithannotation steps class for map entry string object kv beans entryset logger info possible candidate step class found in bean kv getkey final class target if aoputils isaopproxy kv getvalue logger info bean is an aop proxy kv getkey target aopproxyutils ultimatetargetclass kv getvalue logger info extracted class name from bean target getname kv getkey else logger info bean is directly of type not aop enveloped kv getkey kv getvalue getclass getname target kv getvalue getclass if hasannotatedmethods target if result add target todo log sth scoped else logger warn bean did not contain any jbehave annotated methods kv getkey return new linkedlist result code in my case it seems to work i assume that by returning the underlying target type in the steptypes method and not the proxy type the matching logic of jbehave should work out of the box do you foresee any problem with this kind of approach if no i can try a pull request ,Improvement
error serializing object class org jbehave web runner wicket pages runstory when i click on run story it works but the server log contains info org apache wicket protocol http webapplication http wicket started wicket version in deployment mode error org apache wicket serialize java javaserializer http error serializing object class org jbehave web runner wicket pages runstory object page class org jbehave web runner wicket pages runstory i d render count org apache wicket core util objects checker checkingobjectoutputstream objectcheckexception the object type is not serializable a problem occurred while checking object with type org jbehave core embedder storymanager field hierarchy is class org jbehave web runner wicket pages runstory path private org jbehave core embedder storymanager org jbehave web runner wicket pages runstory storymanager class org jbehave core embedder storymanager field that is causing the problem at org apache wicket core util objects checker checkingobjectoutputstream internalcheck checkingobjectoutputstream java wicket core jar at org apache wicket core util objects checker checkingobjectoutputstream check checkingobjectoutputstream java wicket core jar at org apache wicket core util objects checker checkingobjectoutputstream checkfields checkingobjectoutputstream java wicket core jar at org apache wicket core util objects checker checkingobjectoutputstream internalcheck checkingobjectoutputstream java wicket core jar at org apache wicket core util objects checker checkingobjectoutputstream check checkingobjectoutputstream java wicket core jar at org apache wicket core util objects checker checkingobjectoutputstream writeobjectoverride checkingobjectoutputstream java wicket core jar at java io objectoutputstream writeobject objectoutputstream java rt jar at org apache wicket serialize java javaserializer serializationcheckerobjectoutputstream writeobjectoverride javaserializer java wicket core jar at java io objectoutputstream writeobject objectoutputstream java rt jar at org apache wicket serialize java javaserializer serialize javaserializer java wicket core jar at org apache wicket pagestore defaultpagestore serializepage defaultpagestore java wicket core jar at org apache wicket pagestore defaultpagestore storepage defaultpagestore java wicket core jar at org apache wicket page pagestoremanager persistentrequestadapter storetouchedpages pagestoremanager java wicket core jar at org apache wicket page requestadapter commitrequest requestadapter java wicket core jar at org apache wicket page abstractpagemanager commitrequest abstractpagemanager java wicket core jar at org apache wicket page pagemanagerdecorator commitrequest pagemanagerdecorator java wicket core jar at org apache wicket page pageaccesssynchronizer commitrequest pageaccesssynchronizer java wicket core jar at org apache wicket application ondetach application java wicket core jar at org apache wicket request cycle requestcyclelistenercollection notify requestcyclelistenercollection java wicket core jar at org apache wicket request cycle requestcyclelistenercollection notify requestcyclelistenercollection java wicket core jar at org apache wicket util listener listenercollection notify listenercollection java wicket util jar at org apache wicket util listener listenercollection reversednotify listenercollection java wicket util jar at org apache wicket util listener listenercollection reversednotifyignoringexceptions listenercollection java wicket util jar at org apache wicket request cycle requestcyclelistenercollection ondetach requestcyclelistenercollection java wicket core jar at org apache wicket request cycle requestcycle ondetach requestcycle java wicket core jar at org apache wicket request cycle requestcycle detach requestcycle java wicket core jar at org apache wicket request cycle requestcycle processrequestanddetach requestcycle java wicket core jar at org apache wicket protocol http wicketfilter processrequestcycle wicketfilter java wicket core jar at org apache wicket protocol http wicketfilter processrequest wicketfilter java wicket core jar at org apache wicket protocol http wicketservlet doget wicketservlet java wicket core jar at javax servlet http httpservlet service httpservlet java jboss servlet api spec final redhat jar final redhat at javax servlet http httpservlet service httpservlet java jboss servlet api spec final redhat jar final redhat at org apache catalina core applicationfilterchain internaldofilter applicationfilterchain java jbossweb final redhat jar final redhat at org apache catalina core applicationfilterchain dofilter applicationfilterchain java jbossweb final redhat jar final redhat at org apache catalina core standardwrappervalve invoke standardwrappervalve java jbossweb final redhat jar final redhat at org apache catalina core standardcontextvalve invoke standardcontextvalve java jbossweb final redhat jar final redhat at org jboss as web security securitycontextassociationvalve invoke securitycontextassociationvalve java jboss as web final redhat jar final redhat at org apache catalina core standardhostvalve invoke standardhostvalve java jbossweb final redhat jar final redhat at org apache catalina valves errorreportvalve invoke errorreportvalve java jbossweb final redhat jar final redhat at org apache catalina core standardenginevalve invoke standardenginevalve java jbossweb final redhat jar final redhat at org apache catalina connector coyoteadapter service coyoteadapter java jbossweb final redhat jar final redhat at org apache coyote http http processor process http processor java jbossweb final redhat jar final redhat at org apache coyote http http protocol http connectionhandler process http protocol java jbossweb final redhat jar final redhat at org apache tomcat util net jioendpoint worker run jioendpoint java jbossweb final redhat jar final redhat at java lang thread run thread java rt jar caused by java io notserializableexception org jbehave core embedder storymanager at java io objectoutputstream writeobject objectoutputstream java rt jar at java io objectoutputstream defaultwritefields objectoutputstream java rt jar at java io objectoutputstream writeserialdata objectoutputstream java rt jar at java io objectoutputstream writeordinaryobject objectoutputstream java rt jar at java io objectoutputstream writeobject objectoutputstream java rt jar at java io objectoutputstream writeobject objectoutputstream java rt jar at org apache wicket serialize java javaserializer serializationcheckerobjectoutputstream writeobjectoverride javaserializer java wicket core jar more i had the same behavior with the jbehave web trader runner war from jbehave web examples deployed on the server without any change of library version ,Bug
pre and postcondition per scenario beforescenario afterstory etc in story description problem the different ways to define a single scenario and its logic makes it hard to understand test logic example i have test suites calles registrationprocessstory ond accountingstory the registrationprocessstory is a jbehave story containing logic for test data preparation like beforestory afterstory and beforescenario onoutcome failure etc the accountingstory contains similar test data logic a given statement is something like a beforescenario i e beforescenario upontype scenariotype example so my problem is that we have test data preparation logic in a story file but we could have another logic hidden in the implementation of a testsuite beforescenario on the other hand test cleanup logic ca n't be described in a story file but in the testsuite logic afterscenario afterstory solution i would like to have an extension to the bdd vocabulary that enables pre and postcondition descriptions in a story file this could be a simple mapping of the annotations to a keyword like scenario user is operator by default beforescenario create user login with data dataentries given user login on login page then ensure operator link is visible afterscenario delete user login what do you think about the idea greetings olmo,New Feature
the jbehave site is rendered as utf but declares iso in the html header on pages with non ascii text the accented chars are displayed incorrectly the site should declare utf in the html header e g on then french text is wrong ,Bug
provide shutdown hook for story cancellation to clean up e g open firefox when the running time of stories exceeds storytimeoutinseconds the futures get cancelled without cleanup the resources e g the firefox stays open even though the jvm running the tests stops this is especially bad if the tests are run via a cronjob since the firefox processes accumulate over time slowing down the machine i 'm not quite sure how to implement this the canceled futures get a cancellationexception to shut down firefox i think it is necessary to run the afterstory or afterstories annotated methods plus it would be good to put a stack trace in the report which currently does n't show up ,Improvement
text changes to jenkins hudson plugin the jenkins hudson plugin mentions jbehave x for the next version this should be x x while i 'm at it i did a few text changes for the description,Improvement
examplestable incorrectly parses files with windows line endings examplestable uses n as a separator when splitting the table into rows private static final string row separator n private void parsebyrows string rows tableasstring split row separator in a file with windows line endings this leaves a trailing r which is then interpreted as an extra blank column suggested fix is to use the regex r n r n to split ,Bug
create a wizard to generate step code i 'm going to start creating a wizard pages first page with the missing step selection to permit that the user can select which missing steps want to generate and the option to select if it generates a new class or add the new methods to an existing class second page must permit to configure the method name the method parameters and its patters ,New Feature
annotations should be documented it 'd be nice to build a catalogue of available steps for people testers really who write scenarios the first approach was to just generate javadocs but the annotatios like given are not documented i assume this was just an omission ,Improvement
add documented annotation to given when then classes hi we would like to have a java doc containing annotated strings with test steps afaik it 's enough to add a documented annotation to given when then ,Improvement
finnish language support finnish language translations for keywords pull request ,Improvement
composite steps in text format in order to be more effective in communication and in scenario development as a non technical scenario writer i want to compose steps using existing steps in text format like my stories at the moment composite steps have to be implemented in java code with an empty body they could be defined and used in text format like stories maybe with the extension step this would be also an alternative for givenstories ,New Feature
upgrade story navigator to new xref storynavigator no longer generated step documentation in alos the xref getstepmonitor seems to be deprecated has anything changed ,Improvement
outcomestable with date values makes an error in freemarker when using outcomestable with some date values to validate there 's a problem with the freemarker plugin freemarker seems to expect the ftl file to include the date part to render as specified in the exception afaik i do n't have any control under the ftl generation java lang runtimeexception ftl jbehave xml output ftl at org jbehave core reporters templateableoutput write templateableoutput java at org jbehave core reporters templateableoutput afterstory templateableoutput java at org jbehave core reporters delegatingstoryreporter afterstory delegatingstoryreporter java at org jbehave core reporters concurrentstoryreporter afterstory concurrentstoryreporter java at org jbehave core embedder storyrunner runcancellable storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storymanager enqueuedstory call storymanager java at org jbehave core embedder storymanager enqueuedstory call storymanager java at java util concurrent futuretask sync innerrun futuretask java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor worker runtask threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java caused by org jbehave core reporters freemarkerprocessor freemarkerprocessingfailed freemarker failed to process template ftl jbehave xml output ftl using configuration freemarker template configuration f c and data model story org jbehave core reporters templateableoutput outputstory e c keywords org jbehave core reporters templateableoutput outputkeywords b db b at org jbehave core reporters freemarkerprocessor process freemarkerprocessor java at org jbehave core reporters templateableoutput write templateableoutput java more caused by freemarker template templatemodelexception ca n't convert the date to string because it is not known which parts of the date variable are in use use date time or datetime built in or string format or string format built in with this date at freemarker core environment formatdate environment java at freemarker core expression getstringvalue expression java at freemarker core expression getstringvalue expression java at freemarker core dollarvariable accept dollarvariable java at freemarker core environment visit environment java at freemarker core mixedcontent accept mixedcontent java at freemarker core environment visit environment java at freemarker core iteratorblock context runloop iteratorblock java at freemarker core environment visit environment java at freemarker core iteratorblock accept iteratorblock java at freemarker core environment visit environment java at freemarker core mixedcontent accept mixedcontent java at freemarker core environment visit environment java at freemarker core macro context runmacro macro java at freemarker core environment visit environment java at freemarker core unifiedcall accept unifiedcall java at freemarker core environment visit environment java at freemarker core conditionalblock accept conditionalblock java at freemarker core environment visit environment java at freemarker core mixedcontent accept mixedcontent java at freemarker core environment visit environment java at freemarker core macro context runmacro macro java at freemarker core environment visit environment java at freemarker core unifiedcall accept unifiedcall java at freemarker core environment visit environment java at freemarker core iteratorblock context runloop iteratorblock java at freemarker core environment visit environment java at freemarker core iteratorblock accept iteratorblock java at freemarker core environment visit environment java at freemarker core mixedcontent accept mixedcontent java at freemarker core environment visit environment java at freemarker core ifblock accept ifblock java at freemarker core environment visit environment java at freemarker core mixedcontent accept mixedcontent java at freemarker core environment visit environment java at freemarker core iteratorblock context runloop iteratorblock java at freemarker core environment visit environment java at freemarker core iteratorblock accept iteratorblock java at freemarker core environment visit environment java at freemarker core mixedcontent accept mixedcontent java at freemarker core environment visit environment java at freemarker core environment process environment java at freemarker template template process template java at org jbehave core reporters freemarkerprocessor process freemarkerprocessor java more,Bug
navigator ca n't support special char hello i 'm using the navigator report view and i just tried with stories containing special characters in their name like my story i have a problem here with the char that have to be converted to in the story path for links to work properly the changes i had to do xref json change xref stories story path with to navigator html change from ng click showstory performable story path to ng click showstory performable story path performable story name change from td performable story path td to td performable story name td angular controllers js change to scope showstory function storypath storyname change to title storyname this is really quick fix from my side i do n't know if there are impacts elsewhere there may be other char that need to be url encoded thanks for your interest ,Bug
odf unit test fails due to cr lf issue on windows in windows the story tests for odf fail due to cr lf differences i have added a comparison similar to other tests,Bug
expose the stepstype inside stepcandidate the stepcandidate class does not expose the actual class type for the implementing class type in order for a caller to find this out it must instantiate the step using getstepsinstance and then call getclass this creates a problem when integrating with the jbehave junit runner as described in this issue that issue can not be resolved unless the caller can ask for the class type without instantiating it code showing an example of this problem is attached below ,Improvement
create a eclipse category for jbehave and a new wizard to create stories create a new category in eclipse to show jbehave options create a new file wizar to create stories ,New Feature
allow puncuation characters in default meta filters when running tests using the following command djbehave meta filter tag release all tests with this tag are skipped by the filter but when we remove the colon all tests are found and run successfully it is not only colons i have also tried and with the same results ,Improvement
refactor methods narrateaninterestingstory into method the different methods narrateaninterestingstory are difficult to maintain since they are almost but not quite the same plus the line numbers for the stack traces change if the test methods are changed since the respective methods are included at the end of each class moving the method to another class should cause fewer line number changes later ,Improvement
if a test times out the generated xml in the jbehave directory is not complete for the test that timed out we use jenkins to run our jbehave tests at night every now and then we have a test that times out and the generation of the error report at the end fails because it runs into a xml parse issue on a xml file in the generated target jbehave directory the xml is missing the closing story tag workaround is to increase the timeout but it would be nice if this was properly handled ,Bug
incorrect formatting in jbehave report if fixture uses both string and table parameters fixture code code then keyword variable keyword table alias keyword variable keyword table public void checksomething string variable examplestable table throws sqlexception code usage and keywords variable is in field value is valid y is valid n ,Bug
swedish language was incorrect last submitted swedish language file was incorrect ,Improvement
storyfinder findpaths is missing the parameter url list list findpaths has parameter variants and is missing url list list currently the actual implementation uses a string for searchin and converts the url to the path if called with an url but this may change if other urls than file should be supported ,Improvement
when aliasing a step method with table parameter and without the parameter is not correctly processed if both are used in the same scenario i have a step method aliased like this to be able to use the step with table parameters and explicitly as well noformat then title is title alias title is title public void thentitleis named title final string title logger debug thentitleistable title noformat when i now use the steps noformat then title is title then title is some other title noformat the nd step gets the variable set from the first step when the steps are defined in different methods the behavior is as expected ,Bug
stack traces not properly formatted on windows when formatting stack traces the function uses a printstream and tostring to get the text for the stack trace this is converted according to the platform line endings in windows the cr lf line endings cause the patterns to fail this means for example that the unit test for templatableoutput fails in windows i have added a unit test to check if it an exception is converted correctly however this test will fail under windows only ,Bug
allow meta filtering on example scenarios as suggested by pascal rapicault on user list allow filtering of examples scenarios by adding a column for the meta info code meta run given i do use parameter examples meta parameter run yes value run not value code for each example scenario i e for each row of the examples table the meta specified will be matched against the meta filter provided and if allowed the scenario will be run note the meta filter provider is unique for the run so the meta info must be able to match both the scenario or story in the example above the meta run is specified to allow it be matched by any value of the meta filter that specifies a run value if specifying meta filter ' run yes ' only the first example will be run while specifying ' run not ' only the second will be run ,Improvement
support synonyms of step starting keywords it is generally acceptable that you can describe a business case just using given when then and suite however when the scenario you need to write is a long say or more steps i have to accept that the story starts sounding a bit to fade say made up it works but you would prefer it to sound more natural i think this could be supported if we improve jbehave to allow defining and synonyms with exactly the same functionality as the actual and so you can say something like this given our payments system supports swift messages when a fx transaction message arrives and the from currency is usd and the to currency is gbp and the exchange rate is and the transaction date is the next business day and the transaction amount is and the payer account no is and others when steps describing the foreigner exchange message then someone would say me included that if i can say with ' and having are synonyms of and and rewrite the story like below then it would sound more natural given our payments system supports swift messages when a fx transaction message arrives having the from currency as usd and the to currency as gbp with an exchange rate of ,Improvement
html template report contains encoded html tags the template html report contains a few encoded html tags where the actual tag would be correct span for parameters this is probably due to the changes for jbehave ,Bug
junit tests will not run in win junit tests failes due to that the read from file results in carriagereturn as well as linefeed on each read line ,Bug
allow specification of the locale in the textual story the locale of a given story could be specified directly in the text allowing for dynamically localised story parsing ,Improvement
make mojos requiredependencyresolution test the test resolution scope allows use of mojo in both test and compile scopes ,Improvement
report files not closed i 'm running an embedder as part of another java application when the execution of the embedder completes i can see files on disk but they are empty or of small size and the files are locked open by the process ca n't delete them on windows it appears that the files are only written out when i exit the java process in which the embedder has been started ,Bug
code of stepswizard does not compile referenzing wrong wizardsmessages constants generatestepswizard and selectstepstogeneratewizardpage both reference non existing constants in wizardsmessages they use fields like newstorywizard although the ones in wizardsmessages are properly named raised by github issue pull request in issue ,Bug
allow grouping of stories and scenarios introduce the concept of group of stories or scenarios which can be dynamically maintained based on some criteria a group should be identified by a new keyword but could reference stories and scenarios anywhere in the run context i e not necessarily in the same textual input a group should use story and scenario meta data using pre defined tags or user defined ones to determine its content a group should be used as an execution context to allow repetition of stories or scenarios with some overall directives and fail success criteria ,New Feature
improved test in printstreamoutputbehaviour i tried to improve the tests in printstreamoutputbehaviour similar to the changes i did in the template output to check if xml encoding is done correctly in all cases it does and if the file is actually valid xml it was n't not even the expected string was to make this work i added an xmlunit check and changed the order of the created story to match the way a real story is created in this case the xml is valid this did n't require any change to actual code only the test code was wrong so this is a minor issue ,Improvement
xmltemplateouput is misspelled xmltemplateouput is misspelled i wonder if this can be renamed without breaking current user code ,Bug
story editor does not resolve steps from referenced projects or jars on classpath jbehave story editor does not resolve any steps declared in a separate library available on the classpath raised by github issue pull request in issue includes unit tests ,Bug
support for alternative narratives in stories i would like to change the syntax for my scenarios currently supported syntax is in order to as a i want i would like the ability to use as a i want so it would be nice to have a place to change the key words used in the narratives ,Improvement
noclassdeffounderror in java compiling with java u results in noclassdeffounderror for annotationprocessorfactory due to java incompatible version of maven hpi plugin ,Improvement
null displays for scenario name on the localframecontextview when multithreading is used to reproduce start from the jbehave spring archetype configure the embedder to use more than thread ie configuredembedder embeddercontrols usethreads notice that in the contextview it shows null for the scenario name if you run the same stories without using embeddercontrols the name displays correctly,Bug
stepsbehaviour test broken for openjdk unit test stepsbehaviour shouldreportfailuresinbeforeandaftermethods is broken when run on jdk see stacktrace attached with jdk this error does n't occur what actually breaks the test is that methods annotated with beforescenario are picked in different order for the jdk versions this is caused by the fact that java lang class getmethods returns methods in no particular order as clearly stated in its javadoc and probably its implementation has been changed the question is whether it 's enough just to fix the test to enforce the order or this issue affects the framework more deeply and additional measures are needed ,Bug
story meta incorrectly parsed when givenstories are specified at story level when meta info is mentioned as below with givenstories at story level the value of meta property gets appended with the givenstories line for example for a story file as below meta storyname reusebitrate givenstories endtoend story scenario verifying reusebitrate functionality given step then step the value of storyname appears with the next line without quotes reusebitrate givenstories endtoend story ,Bug
asynchronous cache reload the eclipse plugin sets up a cache containing all step candidates this cache is rebuilt whenever something changes within the project which sometimes is happening at every key stroke since querying the cache is bound to waiting for a reload to complete this affects the gui user thread ending up in a slow or even locked up eclipse reported as per github issues possibly also related to github pull request this code detaches the query of the cache from its reload querying it is always done directly on the last known any change in the project requests an asynchronous reload with only active at a time when a reload is finished then the editors are triggered to query again ,Improvement
add timings to serialisable data of performablestory see attached test case to reproduce,Improvement
uuidwrappedfailure is null when failure occurs hello i 'm new to jbehave i 've run my project with version until now without many problems i just tried to use the beta version to have steps timings looks to work well but i have an issue in webdriverscreenshotonfailure afterscenariofailure the uuidexceptionwrapper uuidwrappedfailure is null i did n't change many things in my configuration from to x i do not have all the skills needed to catch why that value is null maybe something wrong in the framework or a misconfiguration from my part here is the trace org jbehave web selenium webdriverscreenshotonfailure afterscenariofailure org jbehave core failures uuidexceptionwrapper echec org jbehave core failures beforeorafterfailed method afterscenariofailure annotated with afterscenario in class org jbehave web selenium webdriverscreenshotonfailure failed java lang nullpointerexception org jbehave core failures beforeorafterfailed method afterscenariofailure annotated with afterscenario in class org jbehave web selenium webdriverscreenshotonfailure failed java lang nullpointerexception at org jbehave core steps stepcreator beforeorafterstep perform stepcreator java at org jbehave core steps stepcreator failurestep donotperform stepcreator java at org jbehave core embedder performabletree somethinghappened run performabletree java thanks a lot ,Bug
format xml template using hamcrest matchers produces invalid xml tags when using outcomestable with hamcrest matchers if you have an outcome error the generated value from the matcher for long short float and object is surrounded with ' ' and ' ' it gives an xml tag that looks like this value l value which is invalid xml hudson jenkins plugin then fail to produce a report for xunit i think the reporter should escape these characters ,Bug
tables in odt files are not parsed hi we are using odt files to write our stories and we are using tables the tables are not parsed anymore i made a patch where i moved from odfdom java to simple odf which appear to be the successor i also included the binary odt file i used to test the code,Bug
find stories when running from jar with dependencies hello i 'm using a etsy sample based project to run my jbehave stories with selenium i created a jframe based user interface to have a standalone runnable for people who run jbehave selenium tests my stories files are stored as following project src main resources stories story to find the story files when running from maven or eclipse debug this line works fine new storyfinder findpaths codelocationfromclass this getclass getfile aslist story null toarray new string but when running from the jar file that does not work for codelocationfromclass this getclass getfile i get c documents and settings lbp bureau project build project snapshot jar with dependencies jar the jar file contains at its root the stories folder with inside all my story files but i ca n't find a good way to retrieve this list from my ui do someone knows a way to find story files within the built jar maybe this is some off topic for the jira please tell me if and how to find my answer thanks ,Improvement
step parameters incorrectly marked in the reports the issue occurs only when a step has more than parameter and the value of at least of those parameters is found as a part of another parameter a parameter value is a substring of another parameter value e g step given a stock of symbol symbol and a threshold of threshold step usage given a stock of symbol abc def and a threshold of in the report given a stock of symbol abc def and a threshold of the issue is due to a flawed implementation in stepcreator class method replaceparametervalue we need a more elaborated replace algorithm in order to take into account this kind of special cases once a parameter is replaced with the value bearing the start end placeholders it should become locked we do n't want the next parameter value replacement to replace values into the previous ones also the replacement of parameters values in step should be driven by parameters values length not by position to avoid partial replacements see parametrisedstep method ,Bug
mark cut off stacktraces with at the end when cutting off a stack trace a should be added afterwards,Improvement
parameterised scenarios are skipped when filtered by story meta scenarios parameterised by examples are skipped if scenario level meta filtering is used this seems to be a direct result of changes introduced by jbehave eg code xml metafilters metafilter foo metafilter metafilters code code meta foo bar scenario given i am a ' partner ' user when a ' business support ' case is created with name value code code process process sub process sub process then the case has item in basket ' partner team ' examples code process sub process xyz business support bank statement upload code execution of the above results in the before and after steps being executed but all scenario steps being skipped debugging the code shows that the check code if context filter allow parametermeta continue code in the method code title storyrunner java private void runscenariosparametrisedbyexamples runcontext context scenario scenario meta storyandscenariometa throws throwable examplestable table scenario getexamplestable reporter get beforeexamples scenario getsteps table keywords keywords context configuration keywords for map string string scenarioparameters table getrows meta parametermeta parametermeta keywords scenarioparameters if context filter allow parametermeta continue reporter get example scenarioparameters if context configuration storycontrols resetstatebeforescenario context resetstate runbeforeorafterscenariosteps context scenario storyandscenariometa stage before scenariotype example addmetaparameters scenarioparameters storyandscenariometa rungivenstories scenario getgivenstories scenarioparameters context runscenariosteps context scenario scenarioparameters runbeforeorafterscenariosteps context scenario storyandscenariometa stage after scenariotype example reporter get afterexamples code always passes resulting in ' continue ' and the scenario execution being skipped using the example above context filter ' foo ' but because the meta parameter ' foo ' is at scenario level and not at examples table level parametermeta is empty and the filter allow is false resulting in ' continue ' ,Bug
installing new m e plugin does not like goal unpack view resources installed latest m e plugin eclipse complains that eclipse plugin not covered by lifecycle configuration,Bug
story execution continues with steps even of failure of givenstory in case of sceanrio level given story as follows meta storyname my story scenario testing given story failure meta index dummy givenstories test story given the given story is successfull then execute then in my story even when the givenstory test story fails the execution continues with the next steps in the calling story ie my story which should not be the case ,Bug
navigator project needs to be localized hello there i 'm from france using x to get steps durations in the json result and i 've seen navigator is not localized i think it can be solved in angular controllers js line url url replace story html thanks for the help ,Improvement
web archetype java spring contains all java files twice the archetype files for java spring all appear once as packagename and once as packagename etsy the files that are actually updated by the script are the ones in packagename i have deleted the unused files the files are identical except for some unused imports ,Improvement
support needle as di and mocking framework i want to contribute a jbehave module supporting needle as di mocking framework similiar to other existing guice spring weld as a result could use needle inside of jbehave which would ease testing of jee components my first implementation is already committed to the fork currently it already provides needlestepsfactory and i 'm working on usingneedle annotation right now ,New Feature
improve de keywords,Improvement
use parametisedstep in stepmonitors when using a parameterisedstep it makes sense to pass to the stepmonitor the value of the paramterisedstep and not stepasstring this enables the actual substituted values visible when monitoring running tests for example instead of the localframecontextview showing given the username is name it would be better if it showed given the username is bob it is clear from the intent that this is the value being used and that it has been replaced during runtime a patch file for stepcreator java will be attached to this jira shortly david ,Improvement
allow textual stories to be transformed before parsing textual story transformation may be useful to support different syntaxes or clean up of textual input ,New Feature
unable to locate stories running from cli an executable jar built from eclipse we are trying to execute the jbehave test project from command line after exporting it as executable jar from eclipse we are facing same issues as jbehave just to mention it works fine when we run the same from eclipse directly having issues while running from command line as executable jar ,Bug
unable to run jbehave tutorial noclassdeffounderror fluentwebdriver occurs noclassdeffounderror when running etsy web runner from the jbehave tutorial package see attached repro steps jbehave tutorial git clone jbehave tutorial mvn clean install s settings xml pcodehaus web runner jbehave tutorial etsy web runner mvn jetty run war s settings xml pcodehaus web runner visit,Bug
provide a configurable timeout value for each story running time when running stories that may take a bit longer e g web tests a timeout value for each story would be useful as opposed to a timeout for all stories together ,Improvement
failinguponpendingstep strategy not honoured the only time the story fails is if the final example parameterised scenario fails i 'll try and work on a test case patch ,Bug
wrong colorisation in html report if a step contains a word that is equal to a value from example table when values from example table are populated into scenario they are shown in different color the problem is that if a step contains a word equal to a value from the table it 's also shown in that color which might be confusing see screenshot attached to reproduce this i just modified the claims with null calendar story from trader examples as shown on the screenshot ,Bug
jenkins plugin can not parse xml files with narrative tag if a story file contains narrative tag then the generated xml report will look like the following code narrative keyword narrative inorderto keyword in order to do something inorderto asa keyword as a user asa iwantto keyword i want to be able to do something else iwantto narrative story path story story title it should do something story code jenkins plugin can not parse files like this log code info xunit converting ' path to jenkins job workspace target jbehave story xml ' fatal error the markup in the document following the root element must be well formed com thalesgroup hudson plugins xunit exception xunitexception conversion error error to convert a file not found code line points to the starting story tag which comes after the closing narrative tag ,Bug
some template generated reports are invalid this bug appered when we started to use scenario level givenstories keyword in our stories scenario givenstories given we use hudson as ci with jenkins plugin for present reports probably jbehave generates invalid xml so exception occured see stacktrace txt in attachments on post build action publish testing tools result report i investigated generated xml and found some weird things missing between attribute 's name and value code xml givenstories keyword givenstories code strange string like code xml givenstory stories story name story code escaping missed code xml failure junit framework assertionfailederror expected but was code instead code xml failure junit framework assertionfailederror expected lt gt but was lt gt code in similar stories we have different xml first code xml givenstories keyword givenstories givenstory stories story name story givenstories code second code xml scenario keyword scenario title scenario title step outcome successful given given step step code ,Bug
not expected behavior of parametrised tables i try to use parametrised tables in similar way that described here i wrote following story scenario test given parameters column column value values examples values value value also i tried this version scenario test given parameters column column value values examples values value value and this is my step given parameters table public void readparameters examplestable table for map string string row table getrows system out println row get column row get column expected result output is key value key value actually result output is key values key values also you can find story and tests in attachments ,Bug
template reports do not mark step parameter if it contains special chars with html template code given string abc code is marked but code given string code is n't ,Bug
use steps from multiple step definition class for a single story i like to organize my steps in multiple class files because we have many steps in our application question is how can we use the steps from multiple step definition classes to execute a single story i use webdriver i tried the following baseclass java instantiates the driver and opens the browser loginsteps java inherit from baseclass java steps to login in application searchsteps java inherit from baseclass java verify is elements is present but here is my driver instance suddenly null i think it has something to do with the way i execute my tests override public injectablestepsfactory stepsfactory return new instancestepsfactory configuration new loginsteps new searchpagesteps please tell what other information you need or what i have to do differently thanks,Bug
gherkinstoryparser has a sysout the class gherkinstoryparser has near the end a system out println this may confuse the user because the stories may be printed twice on the console,Improvement
unable to read excel from classpath using jxl i am unable to read excel using jxl from classpath however the same code is working fine with standalone code excel is placed in src main resources test xls workbook workbook null inputstream stream this getclass getclassloader getresourceasstream test xls workbook workbook getworkbook stream sheet sheet workbook getsheet cell a sheet getcell however if i use the file system path as workbook workbook getworkbook new file src main resources test xls i am able to read in jbehave is this an issue with jbehave since standalone code works in both the ways ,Bug
make it easy to pick the output directory for the reports as part of my usage of jbehave i need to control where the reports are being written unless i missed an obvious api the code i currently use see code below is particularly verbose and not easy to figure out i think it would be great is there was something on the mostusefulconfiguration object or other object to let the user set the output folder or any other simpler way usestoryreporterbuilder new storyreporterbuilder protected org jbehave core reporters fileprintstreamfactory fileprintstreamfactory string storypath return new fileprintstreamfactory new storylocation codelocation storypath fileconfiguration public file outputdirectory return new file c dev tmp behave ,Improvement
xml reporter creates invalid xml for stories with narrative in x branch in stories with narrative the normal xml reporter creates invalid xml in x since the narrative tag comes before the story tag the shortest story example to show the issue is this code narrative in order to xxx as a xxx i want to xxx scenario xxx code the story was initially reported for jbehave by zihao yu but this issue was more relative to version issues since it works with so i decided to create a new issue mentioning x directly ,Bug
files in jbehave core src test java org jbehave core reporters reports are not used the files in jbehave core src test java org jbehave core reporters reports are empty and are not used ,Improvement
improve documentation on use of webdriverprovider to prevent error ' webdriver has not been found for this thread ' when using the webdriver in the pages classes as follows public class home extends abstractpage private final webdriver driver public home webdriverprovider driverprovider super driverprovider this driver driverprovider get public void open get manage timeouts implicitlywait timeunit seconds public void enterdetails string email string status string password driver findelement by name member email sendkeys email driver findelement by name member status sendkeys status driver findelement by name member password sendkeys password public void doregister driver findelement by name member doregister submit get the following error webdriver has not been found for this thread please verify you are using the correct webdriverprovider with the appropriate credentials if using remote access e g to saucelabs dsauce username xxxxxx dsauce access key xxx xxxx xxxx xxxx xxx instead has to use the webdriverprovider as follows public class home extends abstractpage private webdriverprovider driverprovider public home webdriverprovider driverprovider super driverprovider this driverprovider driverprovider public void doregister driverprovider get findelement by name member doregister submit maybe the error message could be more explicit ,Improvement
jbehave website needs a facelifting need to update jbehave website using the template engine from buildmaster for easy website updating,Improvement
we should be able to mock classes currently jbehave throws an error if an attempt to mock a class rather than an interface is made the ability to mock classes means that users do n't have to create interfaces artificially in many instances where a default implementation of a class exists eg repositories file handlers etc there will only ever be implementation outside of the behaviours ,New Feature
add cglib support to jmock extension create a new class called usingjmockwithcglib that extends usingjmock but overrides the mock inner class to construct cglib based mocks ,New Feature
maven jbehave plugin does not run text story files the patch fixes maven plugin and story runner bugs described in the patch also fix a bug when printing stories when the story and scenario classes are anonymous numbers are printed with this patch the name of the story and the scenario s are printed apply the patch at jbehave trunk run ant build run mvn install run mvn integration test at plugins maven src it verify that the maven build gives the same as the result further below remember to add the interface named to subversion feel free to place it somewhere else than org jbehave core story domain maven results info scanning for projects info reactor build order info jbehave maven plugin integration test info jbehave maven plugin integration test info jbehave maven plugin integration test info jbehave maven plugin integration test reactor info info building jbehave maven plugin integration test info task segment integration test info info resources resources info using default encoding to copy filtered resources info compiler compile info compiling source files to c work svn workspace jbehavetrunkclean plugins maven src it test target classes info resources testresources info using default encoding to copy filtered resources info compiler testcompile info no sources to compile info surefire test info no tests to run info jar jar info building jar c work svn workspace jbehavetrunkclean plugins maven src it test target jbehave maven plugin it test snapshot jar info jbehave run behaviours execution run behaviours done something time s total success info info building jbehave maven plugin integration test info task segment integration test info info resources resources info using default encoding to copy filtered resources info compiler compile info compiling source files to c work svn workspace jbehavetrunkclean plugins maven src it test target classes info resources testresources info using default encoding to copy filtered resources info compiler testcompile info no sources to compile info surefire test info no tests to run info jar jar info building jar c work svn workspace jbehavetrunkclean plugins maven src it test target jbehave maven plugin it test snapshot jar info jbehave run story execution run story given org jbehave it stories givens atesttoberun when org jbehave it stories events userrunstest then org jbehave it stories outcomes atestisrunsuccessfully time s total success info info building jbehave maven plugin integration test info task segment integration test info info resources resources info using default encoding to copy filtered resources info compiler compile info compiling source files to c work svn workspace jbehavetrunkclean plugins maven src it test target classes info resources testresources info using default encoding to copy filtered resources info compiler testcompile info no sources to compile info surefire test info no tests to run info jar jar info building jar c work svn workspace jbehavetrunkclean plugins maven src it test target jbehave maven plugin it test snapshot jar info jbehave print story execution run story story user runs integration test as a i want so that scenario user runs test successfully given a test to be run when user runs test then a test is run successfully info info building jbehave maven plugin integration test reactor info task segment integration test info info site attach descriptor info info info info reactor summary info info jbehave maven plugin integration test success s info jbehave maven plugin integration test success s info jbehave maven plugin integration test success s info jbehave maven plugin integration test reactor success s info info info build successful info info total time seconds info finished at thu may cest info final memory m m info ,Bug
jbehave should have an ant task create an ant task,New Feature
jbehave eclipse plugin probably besed very closely on the junit plugin code if not a simple extension to the junit plugin itself you can use the existing junit plugin with the junit adapter but it only gives you basic functionality you ca n't double click on a responsibility name in the plugin and navigate to the actual method for instance also searching for behaviour classes would be nice anything ending in behaviour or containing a public void should method ,New Feature
an extension to allow junit to run jbehave tests thanks to joe walnes i now have some code that lets you ctrl f to run the current jbhevae specification using a single static method i 'm going to tweak this to re introduce a junitadapter class by extending this you 'll be able to run your jbehave specs inside junit hopefully letting us use the existing junit plugins note that stuff like the ctrl f to run the current method in idea will require a proper plugin but reusuing the junitadapter code could still be made to use the existing junit plugin our plugin would itercept the keystroke grab the method pass it to our junitadapter and then run junit as normal ,New Feature
behaviour discovery and collecting there should be a way to automatically discover all the behaviours and run them as part of the core system to ease the ide and ant support,New Feature
velocity code generator for story a velocity based implementation of codegenerator which generates events givens outcomes classes for a given story ,New Feature
ant task documentation is out of date ant task javadocs talk about specs instead of behaviour classes the given example does n't work ,Improvement
example codebase for ant extension create a sample codebase under extensions ant example,New Feature
svn url on website is wrong is svn svn jbehave codehaus org jbehave scm trunk should be svn svn jbehave codehaus org jbehave trunk could we also add anonymous https etc ,New Feature
integrate usingjmock and usingjmockwithcglib the mock inner class in usingjmock should be clever enough to create a regular mock when it is mocking an interface and a cglib mock otherwise ,Improvement
have a way to register a setup and a teardown that will be invoked before and after each method you probably would not need this in an ideal enviornment but in the case where you want to make sure that everyone on the team is cleaning up after themselves deleting the test data from database cleaning up the files etc it is something that can save days of work an enhanced version would be to allow dependency injection into each behaviour class so that it wo n't have to use singleton on certain case like database connection yes i konw you are not supposed to do database connection tests but in order to fix the existing tests a feature like this would come in very handy ,New Feature
jmocklistener should only check mocks if the method succeeded if something goes wrong in a method that uses mocks the actual error is being suppressed and a spurious mock related message is being returned instead this makes it difficult to debug methods with mocks ,Bug
add dependencies to core pom declare dependencies in core pom these will all be declared as provided as none are mandatory ,Improvement
website generation npe website exec content architecture textile output architecture textile exec content development textile output development textile exec content docs textile output docs textile exec content download textile output download textile exec content eclipse png output eclipse png exec content eclipse feature png output eclipse feature png exec content eclipse install png output eclipse install png exec content getting started textile output getting started textile exec content how to contribute textile output how to contribute textile exec content how to use with jmock textile output how to use with jmock textile exec content idea png output idea png exec content idea plugins png output idea plugins png exec content index textile output index textile exec content jbehave css output jbehave css exec content license textile output license textile exec content logo gif output logo gif exec content mailing lists textile output mailing lists textile exec content minimock textile output minimock textile exec skinner rb in add class ' undefined method attributes ' for nil nilclass nomethoderror exec from skinner rb in skin content file ' exec from skinner rb in skin content ' exec from skinner rb in each ' exec from skinner rb in skin content ' exec from skinner rb in build site ' exec from skinner rb exec result copy copying files to users cv src jbehave delete me snapshot website,Bug
customworld for those people who want to define their own world accessors see javadoc in the customworld class,New Feature
jbehave needs an intellij plugin in order for jbehave to get mass adoption ide plugins are required we should begin work on both intellij and eclipse plugins ,New Feature
add generate story code goal add mojo to run generate story code goal from a given story using a configurable codegenerator implementaion ,New Feature
example codebase for junit extension create codebase under extensions junit example,New Feature
stack trace overflow when usingmatchers either usingmatchers either was calling usingmatchers either instead of usingmatchers or doh ,Bug
usage web page for jmock extension there should be a quickstart page and an example with usingjmock,Improvement
make eclipse plugin version settable in command line make the build version a command line param eg dversion x so we can build new versions easily atm version is sprinkled in places i noticed that you use an xslt to generate a site xml with the given version it would be simpler to use ant 's property replacement of version in all the relevant files and just have a version x y in the main build properties,Improvement
notifyingresponsibilityverifier ignores the result returned from the listeners after a responsibility method has been invoked the responsibilityverificationending result instance method on the listener is invoked this gives the listeners a chance to do a number of things with the result of which is to change the result from a success to a fail the notifyingresponsibilityverifier currently ignores the result returned from the listener this is ok as long as you are not using the junit adapter in which case you may get incorrect results when for eg using jmock ,Bug
allow multiple behaviours to be run via junitadapter currently only a single behaviour can be run via adapter a more realistic use case is the running of a behaviours instance comprising of multiple behaviour classes junitadapter should support injection of behaviours instance loading of behaviours classes in injectable classloader via behavioursclass property via behaviourclass property for a single behaviour properties should be configurable via system properties or via a jbehave properties file in classloader ,Improvement
scenarios do not need a description constructing scenarios has become more complex than originally envisioned and they 're also being used in givenscenarios because of this they tend to extend scenariousingminimock rather than merely being an instance of it therefore they do n't need a description this may require some changes to the storyprinter or whatever else uses the scenario 's description ,Improvement
scenarios do not tidy up after themselves if an outcome is not verified correctly when i run hellbound and an outcome is n't as expected eg i have n't written the bit which turns a glyph into the junk at the bottom after it falls then a verification exception is thrown this means that the scenario is never tidied up which leaves the swing frame and queue threads still running we should always tidy up after ourselves ,Bug
visitor is not an appropriate pattern to use and should be removed most of the places where it 's being used it can be replaced with a narrator using narrateto instead of accept ,Improvement
big renaming of spec to behaviour class and criteria to responsibility normalize the vocabulary throughout jbehave to refer to behaviour classes and responsibilities rather than specs and criteria respectively this is to align with the vocabulary around bdd and make things less confusing for the user ,Improvement
maven support regardless of feelings about maven vs ant there is a case for supporting both imo maven provides a declarative approach that simplifies readability of build system especially for multicomponent systems discussions on merits should be on the list here i 'm attaching an initial spike patch that mavenises build for people to have a look at and get a feel read readme txt to start off with need to install cotta jar in the local repo this is just a temporary step to get build working it can also be configured to be installed automatically or deployed to ibiblio the behaviours still fail to run because of the jbehave core util behavioursloader does not provide injection of classloader ,New Feature
allow goals to be run at test scope by default goals are run at compile scope ie assuming they are executed in a separate module as integration tests some users may find it useful to run them at test scope so the scope should be configurable and according to it the appropriate classpath set ,Improvement
split listener into behaviourclasslistener and methodlistener as much as i hate to use the phrase separation of concerns the listener is actually doing things behaviour class callbacks and method callbacks by splitting the listener interface in the code becomes a lot simpler for instance the jmocklistener is just a methodlistener ,Improvement
usingmatchers nothing this should ensure that you can explicitly stub a method with no arguments when there exists a method of the same name which takes arguments ,New Feature
remove responsibility from the vocabulary it 's behaviour all the way down a behaviour class contains methods that define the behaviour sometimes it is useful to think of these as responsibilities especially when modelling but other times they are just behaviour boundary cases etc also the phrase responsibility method has syllables so it does n't exactly trip off the tongue the storyrunner work will reuse the method verifiers outside of the core context which provides even more evidence that the naming was wrong in the first place ,Improvement
plugin not available on eclipse europa after installation of plugin in eclipse europa without errors the plugin functionality does not seem to be available right clicking on a behaviour class does not offer the verify behaviour option in run as ,Bug
example codebase for jbehave core put together an example codebase under jbehave core example currency converter ,New Feature
sablecc version is not compatible with jdk reproduce bug by running ant sablecc build then download sablecc version put in lib extensions change sablecc target in ant script to use correct jar file and change path to the existing story scc grammar file change the package in story scc rerun ant sablecc build ,Bug
runner should use jmock listener by default in particular for any behaviour classes that implement usingjmock there is currently nothing to tell you that mocks were n't verified this has already bitten me note there are not allowed to be any dependencies from core on any of the extensions otherwise they should become core too ,Improvement
add mocking support i think damien has started on this but i thought i 'd formalise a request for mocking support as far as something like jmock goes all we really need to do is provide a mock base class we could take this a step further and provide mock injection which stacy does using picounit for example if you create a method like this public void shoulddosomething employee employee then employee could be a mock if we assume the mock is a jmock mock you 'd have to cast it back to mock to define expectations and what about other mock tools anyway the base class would be enough for now ,New Feature
example codebase for jmock extension create example codebase under extensions jmock example using usingjmock etc ,New Feature
document junitadapter on website explain how to use it especially damian 's excellent eclipse hack that allows you to run the current behaviour class under the cursor ,Improvement
broken links in website has a couple of broken links these are to and,Bug
make classloader injectable in behavioursloader behavioursloader should allow an injectable classloader,Improvement
allow for comments and newlines in story text files se below for a working example of sablecc grammar that allows comments starting with ' ' please make a more robust grammar if you implement this improvement helpers letter ' a' 'z ' ' a' 'z ' digit ' ' ' ' space ' ' tab cr lf endl cr lf cr lf commentchar ' ' specialchar ' ' ' ' ' ' ' ' ' ' ' ' ' ' norwegianchar ' ' ' ' ' ' ' ' ' ' ' ' commentchars space tab letter digit specialchar norwegianchar tokens title keyword ' title ' scenario keyword ' scenario ' as a ' as a ' i want ' i want ' so that ' so that ' given ' given ' when ' when ' then ' then ' space space word letter endl endl commentline commentchar commentchars endl ignored tokens commentline productions story title role feature benefit scenario ,Improvement
use more than event in a scenario you know how a context lets you have several givens and an outcome lets you have several expectations would n't it be great if you could have several events too so i could do given a tetris game is started with a x board and the shape factory produces a t shape then an s shape when the shape is rotated left and the shape is rotated left and the shape is moved right and the shape is dropped producing a new shape and the shape is moved left and the shape is dropped then the lowest line should collapse and the score should be so i can reuse all the movement events in every test eg for checking when games finish checking multiple simultaneous line collapses work etc ,New Feature
minute intro for jbehave needs some work the minute intro is out of date and quite poor needs a good update before release,Improvement
create ubber ant build xml the build xml in the top directory should be able to build core create jbehave core xxx jar put it in a dist directory build and run behaviour classes yes this is self referential that 's a risk for now build each extension with the core on the build classpath put jbehave extensionname xxx jar in the dist dir build and run behaviour classes build the website with its root in dist website create all the javadocs for everything ever in dist website javadoc which we can link to with a relative url in the website ,Improvement
i ca n't use enums as world keys ca n't think of any reason why we 're only allowing strings as world keys this is madness i tell you madness ,Improvement
localisation as proposed by alexandre martins localisation of narrative would be useful for use with non english languages eg the narrative in portuguese would be como um papel eu quero fun o de forma que benef cio both the story codegen and the renderer would need to support a localiser component that know how to translate the keywords in the different locales ,New Feature
mocks should be refactorable in common ides i would like my mocks to be refactored when i refactor the classes they 're mocking way to do this would be to switch on expectations and store the method called so given a class private interface myclass doessomething int numberoftimes our mock setup would look like myclass mock expects doessomething if we ever switch to generics we wo n't even need the cast ,New Feature
build should allow dependencies between extensions for instance the storyrunner requires the jmock extension which is trivial to set up in eclipse or idea we want to do this generically across all the extensions maybe something in the build properties like extensions jmock junit,New Feature
scenario steps should throw exception in their signature for the same reason that should methods should be able to throw an exception so should scenariosteps this prevents me having to wrap code that should n't be throwing exceptions anyway ,Improvement
output from scenarios with steps is not quite right i 'm getting the output given utility scenarios from the first glyph is displayed on the board when the player presses the drop key then the glyph should fall to the bottom when time passes and the glyph segments should become junk and the next glyph should appear this is n't quite right ,Bug
add specinstance param to listener criteriaverificationstarting we should provide a way for jmock and other extensions to call methods on a specinstance before setup this will allow extensions to use dependency injection in jmocks instance a spec could define a dependency on a jmock by doing something like class somespec mocker mocker public void iwanttousemocks mocker mocker this mocker mocker the spec can then use mocker to create mocks set expectations and do auto verification ,New Feature
our build script appears to be running some behaviours times each are we picking up some allbehaviours as well as the behaviours themselves somewhere ,Bug
givenscenario needs finishing please get the givenscenario finished i think it might be a good idea to visit the outcome expectations from the scenario too that way do n't need to add unrelated expectations into the new scenario 's outcomes ,Bug
runner should return non failure status if any behaviours failed at the moment it only returns a failure if there 's a framework error like a missing behaviour class this makes it harder to use in a batch environment eg a build or script ,Bug
refactor storyloader to throw runtime exception story class instantiation throws the usual checked exceptions which should be digested in a runtime invalidstoryclassexception change is backaward compatible for any user catching exception ,Improvement
expectation needs to be able to specify exactly for times currently when you specify a number of times n for an expectation it is matched n times after which it defaults to the fallbackbehaviour there should be a way that you can specify exactly in this case the expectation continues to match but the verify will fail if the number of invocations is wrong i suspect that this is the desired behaviour for never currently never just means that the expectation is never matched so why is there no expectationbehaviour ,Improvement
throwing a pending exception in a story component fails the story we should be able to throw pending exceptions from new story components that have n't been defined yet ,Bug
minimock should fail upon matched method expecations when specifying method invocation expectations and no method found in the interface to be mocked minimock should fail right away,Improvement
visitingscenarioinvoker does not reset state between scenarios visitingscenarioinvoker has a beforeevent flag which is set to true after a scenario 's event is called unfortunately it never gets set to false again so the setup in the outcome of the second scenario is never called i 'd like refactor this piece of code so that the invoker only ever sets up the outcome there can then be a verifier which does the outcome checking and no need for the beforeevent flag to exist this will also mean that the scenariousingminimock no longer needs to pass the visitor to context outcome event outcome but can simply do context outcome event for any visitor irrespective of that visitor 's implementation the environment will also need resetting recreating between scenarios but that 's pretty simple ,Bug
minimock should fail unpon unmatched calls the minimock should fail immediately when unspecified call comes in instead of waiting for verification,Improvement
f ctrl mouseclick through to class file matching story component felix worked by felix not liz felix has a really nifty tool which allows you to put the mouse on a line of story text press f and it takes you to the class file matching that text he promises a ctrl mouse click some time ,New Feature
error reporting in minimock could be better the error reporting in minimock gives no clue as to what expectations have been set up and what arguments it 's getting this makes it really hard to work out whether it 's the code or the behaviour that 's misbehaving ,Improvement
failure while running jbehave 's behaviour tests on itself failure in the jbehave behaviour tests cleanly checked out f time s failures com thoughtworks jbehave extensions story domain scenariousingminimock shouldpassitselfandcomponentstovisitorincorrectsequence com thoughtworks jbehave extensions story domain scenariousingminimockbehaviour verificationexception unexpected call to visit expected calls at com thoughtworks jbehave core verify fail verify java at com thoughtworks jbehave core verify that verify java at com thoughtworks jbehave core minimock expectation invoke expectation java at com thoughtworks jbehave core minimock mockobject expectationhandler invoke mockobject java at proxy visit unknown source at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at com thoughtworks jbehave core minimock mockobject invoke mockobject java at com thoughtworks jbehave core minimock proxy visit unknown source at com thoughtworks jbehave core visitor compositevisitable accept compositevisitable java at com thoughtworks jbehave extensions story domain scenariousingminimock accept scenariousingminimock java at com thoughtworks jbehave extensions story domain scenariousingminimockbehaviour shouldpassitselfandcomponentstovisitorincorrectsequence scenariousingminimockbehaviour java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at com thoughtworks jbehave core invoker invokemethodwithsetupandteardown invoke invokemethodwithsetupandteardown java at com thoughtworks jbehave core invoker invokemethodwithsetupandteardown invoke invokemethodwithsetupandteardown java at com thoughtworks jbehave core behaviour behaviourmethodverifier visit behaviourmethodverifier java at com thoughtworks jbehave core behaviour behaviourmethod accept behaviourmethod java at com thoughtworks jbehave core behaviour behaviourclass visitbehaviourmethods behaviourclass java at com thoughtworks jbehave core behaviour behaviourclass accept behaviourclass java at com thoughtworks jbehave core behaviour behaviourclass visitbehaviourclasses behaviourclass java at com thoughtworks jbehave core behaviour behaviourclass accept behaviourclass java at com thoughtworks jbehave core run main run java total failures exceptions ,Bug
fit adapter if i have existing fit fixtures i would like to be able to use them from the story runner in this case jbehave would give me the structure of expressing requirements as gwt but i would be able to easily wrap my current fit test suite in jbehave stories in some cases a fit table fixture may be the most appropriate way to express the semantics of a given when then i want to be able to choose to use this where appropriate ,New Feature
eclipse story runner plugin i want to be able to easily run scenarios and stories from within eclipse,New Feature
junit to behaviour test converter to facilitate the conversion of integration acceptance tests that have been written as junit tests it would be useful to have converter ,New Feature
website generator does n't work with new buildmaster x sitespec rb was using the old api for buildmaster which did n't use cotta when passing files around the attached patch fixes it but you need to upgrade your buildmaster version using rubygems ,Bug
add root package to story details add root package to story details which can be parsed and used to generate code from story text file ,Improvement
jbehave maven plugin as a jbehave user i would like to be able to type mvn jbehave and verify all the behaviours of the system ,New Feature
allow multiple stories to be run currently only story path can be specified allow multiple story paths to be specified as relative to a story base dir with includes excludes patterns ,Improvement
make story parser and renderer configurable the implementation classes of the story parser and renderer should be optionally be configurable and default to text based parser and renderer ,Improvement
create minute intro to minimock put together minimock web page based on jbehave tutorial ,New Feature
gui interface for jbehave runner in intellij plug in unscheduling,New Feature
documentation specifically for non technical users of jbehave as it seems there is no documentation of jbehave for non technical users the documentation on www jbehave org is mixed with the technical and non technical aspects of jbehave this is not suitable for non technical people learning to write jbehave stories i suggest that a documentation is created specifically for non technical users of jbehave it should be as practical as possible please no calculator examples or something like that and it should contain some best practices for how to write jbehave stories ,Improvement
annotatedpathrunner in eclipse does not end execution under some conditions when running traderannotatedpathrunner in eclipse the execution seems not to finish see attached image you must click on the red square button to finishing it if i set generateviewafterstories to false then the execution finish properly ,Bug
update fluent selenium to most recent version and refactor fluentwebdriverpage to work with this versions ' fluentwebdriver users can not use any versions of fluent selenium that are greater than who make use of the class fluentwebdriverpage in package org jbehave web selenium in version of fluent selenium they consolidated the implementation and interface of fluentwebdriver the next release of jbehave web selenium should update fluent selenium to most recent version and refactor fluentwebdriverpage to work with this versions ' fluentwebdriver,Improvement
stats are incorrect when executing a story with a given story execute a story with a given story the given story contains scenarios where of them fails the acutal story contains only scenario expected the stats look like can be seen from statscorrect png reveived the stats look like can be seen from statserror png cause can be found in poststorystatisticscollector the method writedata uses the output outputstream to write the properties to the stats file this method is called for both stories the given and the actual however the output outputstream is closed after the first writingdata call and therefore can not write any other data to the stats file moreover in the afterstory method there is call to add scenariofailed for a given story which also causes wrong stats this should be commented out it would also be nice to change the access modifier of methods like add has to public in order to let people easily add their own statistics suggestions for closing the bug code title poststorystatisticscollector java borderstyle solid private boolean isclosed false private void writedata if isclosed recreate outputstream if already closed getoutputfile has to be created also output new fileprintstreamfactory fileprintstream output getoutputfile false isclosed false properties p new properties for string event data keyset if event startswith current p setproperty event data get event tostring try p store output this getclass getname catch ioexception e e printstacktrace finally put close to finally in order to also close the stream in case of an error output close isclosed true public void afterstory boolean givenstory boolean write false if givenstory this givenstories if has stepsfailed what is this used for causes stats error at least givenstoryscenariofailed should be called add scenariosfailed write true code ,Bug
add spanish language to eclipse plugin spanish language was included in a core beta release but is there a way to include this language to eclipse plugin ,Improvement
customize jbehave html report is there any way to customize html the way we want in jbehave as per our project requirement we want to add more information in html report such as date time browser tested etc we noticed htmloutput method in jbehave if it is possible with this method can you please provide any good example ,Improvement
generate steps silently fails create project from archetype take standard sample story and right click select jbehave generate steps select finish and nothing happens ,Bug
provide more efficient step collection for large projects with a large project where there can be candidate steps the bylevenshteindistance prioritisingstrategy is very slow can take seconds to complete the step collection the bypriorityfield is much faster but is not a practical solution for this size project as it would be difficult to manage the priority on this number of steps so need a more efficient step collection strategy ,Improvement
poststorystatisticscollector produces incomplete stats with givenstories if we have a story with scenarios and of the scenario with a givenstory the statistics collector wo n't report anything at all result the respective story stats file is empty reason writedata is never invoked or only after reset code scenario a scenario in which the user can run additional stories as pre requisites givenstories path to precondition story given normal scenario steps scenario another scenario given normal scenario steps code update just execute the examples core project and check the stats most of the stories have all counters on ,Bug
improve junit reporter consider merging into jbehave for proper step by step junit reporting as some of the code is to avoid issues with the built in reporting it can become much cleaner from within jbehave e g the singleton can be eliminated attached the test base class for our product to use this runner reporter ,Improvement
step statistical usage there are number of distributed teams in my project a lot of the action in tests are common so my suggestion is to have a statistic report for how many times each step is being used with grouping by scenario story package etc this can also help with maintenance where step that are not in use at all can be deleted cheers,New Feature
honor order in usingsteps instances although step class dependencies are not recommended in some cases it is useful e g when managing a per scenario transactional spring context currently the order of steps in usingsteps instances are hashed twice once in annotationfinder and once more in instancestepsfactory making the order of e g beforescenario unreliable find attached new versions of these classes based off of source where the order is retained ,Improvement
share immutable state between steps in keeping with a more functional design to prevent global mutable state it would be nice to be able have some sort of test context shared between steps automatically by the test framework i imagine it working something like this given we have a cat public void firststep testcontext testcontext immutablecat cat new immutablecat felix testcontext put cat cat when the cat is fed public void secondstep testcontext testcontext immutablecat cat testcontext get cat immutablefood food new food whiskers foodtype dry immutablecat happycat cat feed food makes cat happy testcontext replace cat happycat testcontext put food food then the cat is happy public void thirdstep testcontext testcontext immutablecat cat testcontext get cat assert cat getfeels feels happy why did n't you feed the cat then the cat ate dry food public void fourthstep testcontext testcontext immutablefood food testcontext get food assert food getfoodtype foodtype dry the kitty only likes dry food basically as the steps are called the test context builds up the state of the world from the previous step and passes it to the next step it would be nice if this happened automatically if for example any of the steps have a textcontext paramater defined by doing this it would avoid the need for global mutable state that can cause side effects between steps please leave comments if you have any other questions feed your kitties thanks ,Improvement
selenium grid start scripts for linux and windows i generated selenium grid hub node scripts for windows and for linux to improve accessibility of windows users to the trader runner examples i prepared these scripts but someone still needs to add at least unit test that actually creates a remotewebdriver to localhost wd hub in order to test the grid within the context of jbehave web see complete list of script files located here all of these scripts are meant to just be dropped into the directory in jbehave web examples trader runner selenium cheers ,Improvement
some of jbehave jenkins plugin option can not be used the user can not un check stop and set the build to ' failed ' status if there are errors when processing a result file in the jbehave jenkins plugin when users un checks and save this option restored to be checked,Bug
allow stories to fail when they time out story execution should be allowed to be shown as failure when it times out add a configurable flag in the embeddercontrols next to the timeoutinsecs ,Improvement
using spring 's jdbc embedded database tag calls the init script twice for my tests to run i need a database since i like the speed of h and the ability to start with a clean database of in memory databases i want to use spring frameworks jdbc embedded database construct i have the following in my my steps xml code jdbc embedded database id rxdatasource type h jdbc script location classpath rx sql jdbc embedded database code the file rx sql contains sql like create table and insert into table to get the database schema and sample data correct when i run mvn integration test or the mystory runner then i get an error that the first table in the list is already defined i 've traced it down to somehow the spring container is getting refresh called and so it goes through and re processes all the bean definitions including running the sql script twice i can clearly see when i turn org springframework logging to debug that the script is successfully run once then later on it 's called again since this same technique is used in more traditional junit spring based integration tests i conclude that the issue is with jbehave ,Bug
add support for scenario before after lifecycle in story syntax add lifecycle story syntax to allow before after scenario steps to be executed code lifecycle before given a setup step after then a teardown step code ,Improvement
add automatic generation of osgi manifest for jbehave web in order to be able to load jbehave web into an osgi container ,Improvement
output sauce session i d in the format expected by the sauce ci plugins pull request by ross rowe ,Improvement
patternvariablebuilder can be extremely inefficient in some cases when org jbehave core steps patternvariantbuilder variantsfor is called the following regex is used code code matching with this regex can be very lengthy and cpu intensive when there is an unmatched curly bracket for example like here code create entity of type entitytype set properties propertynames to values propertyvalues code ,Improvement
lifecycle steps not run before after each example scenario when you have a story with at least scenarios st scenario is a normal scenario nd scenario is a example scenario the story has lifecycle steps for the example scenario lifecycle steps are not run before after each scenario check attached example use mvn test to run the example ,Bug
executorservice not shutdown if doignorefailureinview is set to false h overview the executor service in embedder java is not shutdown if doignorefailureinview is set to true this leads to a thread leak h technical see the finally block in embedder java runstoriesaspaths the shutdownexecutorservice is called only if generatereportsview runs successfully without throwing an exception however if doignorefailureinview is set to false which is by default then generatereportsview throws a runningstoriesfailed runtimeexception ,Bug
use more flexible consumer extends for list of step instances in my project i want to pass a list of injectablestep which is a marker interface but i can not pass my list super injectablestep or even list to the constructor of instancestepsfactory it always calls the ctor with the object parameter till i use the workaround and cast my list to list i do n't think that someone will provide a step implementationclass which is derived from java util list so the downside of a cast needed in this rare situation is very small see for further details of the producer extends consumer super idea see also,Improvement
jbehave osgi build fails when cloning jbehave osgi from github ' mvn clean install p bundles ' fails with the following error error failed to execute goal on project org jbehave osgi core could not resolve dependencies for project org jbehave osgi org jbehave osgi core bundle snapshot could not find artifact org jbehave jbehave core jar snapshot help after adding an appropriate snapshot repository the build fails with the following error error failed to execute goal org apache maven plugins maven compiler plugin compile default compile on project org jbehave osgi core compilation failure compilation failure error other dev java osgi github jbehave osgi jbehave osgi bundles org jbehave osgi core src main java org jbehave osgi core io loadfrombundleclasspath java classloader has private access in org jbehave core io loadfromclasspath error other dev java osgi github jbehave osgi jbehave osgi bundles org jbehave osgi core src main java org jbehave osgi core io loadfrombundleclasspath java classloader has private access in org jbehave core io loadfromclasspath error other dev java osgi github jbehave osgi jbehave osgi bundles org jbehave osgi core src main java org jbehave osgi core embedder embedderosgi java no suitable constructor found for embedder org jbehave core embedder storymapper org jbehave core embedder performabletree org jbehave core embedder printstreamembeddermonitor org jbehave osgi core configuration configurationosgi error constructor org jbehave core embedder embedder embedder org jbehave core embedder storymapper org jbehave core embedder performabletree org jbehave core embedder embeddermonitor is not applicable error actual and formal argument lists differ in length error constructor org jbehave core embedder embedder embedder is not applicable error actual and formal argument lists differ in length error help error error to see the full stack trace of the errors re run maven with the e switch error re run maven using the x switch to enable full debug logging error error for more information about the errors and possible solutions please read the following articles error help error error after correcting the problems you can resume the build with the command error mvn goals rf org jbehave osgi core,Bug
support synonym for given the german keyword for given is ' gegeben ' so if i want to imply a specific date i have to write gegeben heute ist der gegeben is suboptimal for environmental declarations angenommen heute ist der would be far more readable could jbehave support synonyms for given given assume suppose gegeben angenommen vorausgesetzt ,Improvement
given stories overriding the scenario title in context view the org jbehave web selenium localframecontextview localframecontextview class used for local frame does n't show the story scenario when givenstories tag is used it shows the scenario name of givenstories rather than the scenario which is currently in execution ,Bug
matchingstepmonitor should use delegating model the matchingstepmonitor is used internally by the performabletree and should support the delegating model to honor other step monitor configured by the user ,Bug
add support for phantomjs to propertywebdriverprovider as contributed in,Improvement
loadodtfromclasspath missing from sources in my company we are using csv files with data tables to feed jbehave story files we would like to have file with the data rather than single csv for single jbehave story file i found in documentation org jbehave core io odf loadodtfromclasspath functionality and i thought that it could solve our problems however when i check my sources of jbehave beta core and web there is no class loadodtfromclasspath available would you please let me know why it is not in the sources would you send me some example of how to use loading from odt file and what are the features would it help for having too many files for jbehave stories ,Bug
excludes can raise a npe if value is empty in pom file jbehave maven goals support the property excludes see if excludes is used in the pom file and if it is empty then a npe occurs in abstractscanner java this class is called from org jbehave core io storyfinder scan storyfinder java jbehave could be easier to configure concerning excludes if this would allow empty value that would mean that nothing is excluded if the value is empty no need to cause a npe because of this i did not verify it but i think a npe is also raised when includes are empty it would be better if no npe is thrown if the value is empty it can be interpreted as nothing is included or everything is included whatever makes sense to you as a default ,Improvement
same stacktrace message is repeated for all failed tests in jenkins plugin test result i am running jbehave tests as jenkin 's free style project using jbehave jenkin plugin v test result getting displayed correctly after the build but same stacktrace message got displayed for all failed tests in test result stacktrace of first failed test case is repeated in all the stacktrace of failed test cases request you to please suggest whether this is known issue or i am doing something wrong note error message of all failed test cases displayed correctly ,Bug
allow freemarkerviewgenerator to specify the class for template loading required to load custom ftl templates ,Improvement
ioutils test fails when not in utf after checkouting sources a test is failing 'cause my system is n't setup in utf by default i know it said to setup maven to add a system property about that but i have n't been successfull with that manipulation however i 'm able to get it compiling with pretty simple modification of the code which is something i have to do everywhere i have to compile jbehave sources last commit,Bug
tests do not fail when spring context fails to load when the creation of the spring context fails because resources can not be found beans can not be created or some other configuration issue the tests is not run but the result does not reflect this properly therefore maven and jenkins think tests are successful which gives a false positive when nobody looks at the logs nobody will see there is actually an error cloned jbehave repo and fixed issue in ,Bug
add context view mechanism with jframe window to show current execution there is a seleniumstepmonitor in jbehave web which shows live the steps which are performed in a small swing window which can be positioned anywhere on the screen while stories are executed it displays the current scenario and the step name i tried to have such a step monitor in another use case testing a rich client with jbehave and ibm rational functional tester it would be nice if i could use that monitoring window for this use case too but seleniumstepmonitor is only meant for selenium but i think it could be moved to core so that it can be used when automating any gui with or without selenium i mean a general purpose guistepmonitor or something like this so it could be used even if i do n't use selenium ,New Feature
easier story file 's language configuration in order to configure the language of the story files the jbehave user has to do a lot or otherwise jbehave wo n't work correctly this is because you have to create a keywords object and set it into many other objects if you forget to set the keyword object into of the other objects then it does not work correctly tests fail or if jbehave is changed in a future version your language configuration might not work anymore the problem is striking a balance between flexibility and configurability we do n't like setter and static injection we prefer cdi the issue here is how to make this easier to configure and what is the sensible default we could make the language default to the platform locale for example instead of the english locale this default could be changed if needed by a dedicated jbehave property for configuring the story language this seems to be more flexible than having to change the platform locale or passing duser language to the java process the origin for this issue is a mailing list discussion ,Improvement
problem to run traderannotatedpathrunner when running the example from branch i got this error noformat processing system properties java awt headless true system property ' java awt headless ' set to ' true ' using controls embeddercontrols batch false skip false generateviewafterstories true ignorefailureinstories true ignorefailureinview true verbosefailures false verbosefiltering false storytimeoutinsecs threads generating reports view to ' users cvgaviao development c biz projects jbehave jbehave core examples trader annotations target jbehave ' using formats ' console txt html xml stats ' and view properties ' defaultformats stats decoratenonhtml true viewdirectory view decorated ftl jbehave report decorated ftl reports ftl jbehave reports with totals ftl maps ftl jbehave maps ftl navigator ftl jbehave navigator ftl views ftl jbehave views ftl nondecorated ftl jbehave report non decorated ftl ' reports view generated with stories of which pending containing scenarios of which pending org jbehave core io storyresourcenotfound story path ' parametrised story ' not found by class loader sun misc launcher appclassloader eb a at org jbehave core io loadfromclasspath resourceasstream loadfromclasspath java at org jbehave core io loadfromclasspath loadresourceastext loadfromclasspath java at org jbehave core io loadfromclasspath loadstoryastext loadfromclasspath java at org jbehave core embedder performabletree storyofpath performabletree java at org jbehave core embedder performabletree performablegivenstories performabletree java at org jbehave core embedder performabletree performablescenario performabletree java at org jbehave core embedder performabletree performablestory performabletree java at org jbehave core embedder performabletree addstories performabletree java at org jbehave core embedder storymanager runstories storymanager java at org jbehave core embedder embedder runstoriesaspaths embedder java at org jbehave core junit annotatedpathrunner run annotatedpathrunner java at org eclipse jdt internal junit runner junit testreference run junit testreference java at org eclipse jdt internal junit runner testexecution run testexecution java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner runtests remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner run remotetestrunner java at org eclipse jdt internal junit runner remotetestrunner main remotetestrunner java noformat it seems that it 's only the relative file lookup that fails ,Bug
implement a regextransformer to enable exporting jbehave syntax to gherkin syntax there are a number of productivity tools available such as picklesdoc that process gherkin files it would be great if there was a jbehave transformer that supported converting jbehave syntax to gherkin syntax ,Improvement
not able to upgrade to selenium java v or above starting on v they changed the packaging for the classes hasinputdevices keyboard mouse they moved it from the org openqa selenium to the new org openqa selenium interaction package selenium 's change log moved mouse keyboard and touchscreen to the interactions package where they belong this has the benefit of also making our build files simpler once we delete the original versions which have been deprecated all these classes are being used and imported by jbehave 's webdriverpage hence it does n't compile after the upgrade,Bug
allow import to filesystem from confluence we keep our story descriptions in confluence and it would be nice to be able to import them to filesystem similarly to what is done for redmine and xwiki there 's currently a basic rest interface for newer confluence versions which can be used to access content also the rich text editor adds quite some noise to the page content which we have to deal with we propose following conventions for an import import starts at a given root page and looks into all the child pages traversable from there the root page is entered as the browser navigates to it display space pagename jbehave story relevant parts are kept in containers for a start we can use panel and info a table in the page is considered as example table attached are some samples how this looks in confluence pull request will follow ,Improvement
add enum converters to default parameterconverters enumconverter and enumlistconverter should be added to the default converters provided by parameterconverters,Improvement
html contains double escaped characters when outputting table text from input story file when writing stories that contain example tables with m ori macrons there seems to be some double escaping of these characters happening in the output html files for example given the following scenario scenario m ori macron support given some condition when i do something then i expect to see a macron in the html table below example title m ori macron should show on this line ample title i would expect the characters to render as seen in the text file however i see the following in the html output then i expect to see a macron in the html table below ex m amp ori macron should show on this line is the escape character for this particular macron and the html source for this line shows the double escape tr td m amp ori macron should show on this line td tr ,Bug
meta parameters only work once per runner according to it should be possible to provide parameter values using the meta keyword if stories are using meta keywords with the same name but different values story will fail because the meta parameter is initialized only once per runner see attached example ,Bug
keyword synonyms cause failure to find and steps in same class i started to use keyword synonyms to allow steps to be found like ' given given given ' etc i used a custom keywords bundle see attachments which worked correctly and found my custom keywords as expected however i can not now find steps annotated like this then i navigate to admin page given i am on the admin page and logged in public static void loggedintoadmin adminpage login the jira text is given a given customer is selected and i am on the admin page and logged in note the given step and the and step are in the same class this works fine if i do not use synonyms on the given step ,Bug
show the story path for failing stories at end of batch execution when running traderannotatedpathrunner example without view generation it is a kind difficult to know which stories have fail because what is being printed at console is this quote failed to run batch org jbehave core embedder performabletree somethinghappened d e junit framework assertionfailederror i failed org jbehave core embedder performabletree somethinghappened ae fb junit framework assertionfailederror i failed org jbehave core embedder performabletree somethinghappened dfa e org jbehave core model outcomestable outcomesfailed org jbehave core embedder performabletree somethinghappened c acb f junit framework assertionfailederror i failed quote so instead of print the performabletree object we should print the story path ,Improvement
classloader leak as remove is not called on threadlocals in storyrunner h overview storyrunner uses threadlocals however does not call remove on them after use which leads to a classloader leak in our application which uses a long running thread to load and run stories ,Bug
allow mapping of examplestable rows to annotated custom types the idea is to map the examplestable rows to match a business object so instead of having a method like this given some table public void givenanexamplestable examplestable table we 'd have something like this given some table public void givenacustombusinessobject mycustomobject myobject or a list of business objects given some table public void givenacustombusinessobject list mycustomobject myobjectlist this can be done in ways annotation based mapping asparameters public class mycustomobject parameter name column private string col parameter name column private boolean col named based mapping using the name of the field as the parameter name ,Improvement
translating keywords in the eclipse plugin depending on the jbehave version someone uses the keywords are different especially if another language is used for instance it used to be gegebenestories in jbehave but now it is vorgegebenestories the jbehave eclipse plugin uses jbehave nationalization resource files but you can not assume that the user is using that jbehave version a solution would be if the user can translate the keywords himself in the eclipse preferences according to the jbehave version he uses for instance i could change the value from gegebenestories to vorgegebenestories in the eclipse preferences since i use jbehave ,Improvement
disable timeout in debuggingmode it should be the default behavior in debugging mode to disable the timeout a first poc implementation can be reviewed in branch notimeoutindebugmode in the fork git github com picpromusic jbehave core git or via browser here a diff can be viewed here ,Improvement
ca n't run stories as embeddables i am attempting to run stories as embeddables i have been able to successfully run them using the embedder but have not figured out how to run them using embeddables i have also posted more information about my problem here thank you ,Bug
allow retrieval of stories via rest api add jbehave rest module to allow retrieval of stories resources via rest apis ,New Feature
timeout should be applied to stories only hi as i read the specification of a timeout it is setting the controls to let a story time out when a specified amount of time has passed by the name this is a setting per story so when i have a timeout of s per story i should be able to have stories which take seconds each the way it is implemented is different though the storymanager measures the start time right after it kicked off all stories and is waiting for all of them to be completed code public void waituntilalldoneorfailed batchfailures failures long start system currenttimemillis boolean alldone false while alldone alldone true for runningstory runningstory runningstories values future throwablestory future runningstory getfuture if future isdone alldone false long durationinsecs storydurationinsecs start long timeoutinsecs embeddercontrols storytimeoutinsecs if durationinsecs timeoutinsecs story story runningstory getstory storyduration storyduration new storyduration durationinsecs timeoutinsecs embeddermonitor storytimeout story storyduration storyrunner cancelstory story storyduration future cancel true break code ,Bug
inline comments can you please support inline comments like in the example below noformat examples accountnr city private customer zuerich zuerich company customer basel noformat the above example does not work neither with nor with as it seems comments can only start on a new line in jbehave so a workaround would be noformat examples accountnr city private customer zuerich zuerich company customer basel noformat but this is not so readable as the inline comments since it destroys the layout of the example table quite a bit ,Improvement
build issue can not find org jenkins ci annotation indexer jar in http repol maven org maven when running jbehave i get this error when building error failed to execute goal org kohsuke access modifier checker enforce default enforce on project jbehave hudson plugin execution default enforce of goal org kohsuke access modifier checker enforce failed plugin org kohsuke access modifier checker or of its dependencies could not be resolved failure to find org jenkins ci annotation indexer jar in was cached in the local repository resolution will not be reattempted until the update interval of central has elapsed or updates are forced help ,Bug
multithreaded junitstories are running but not running concurrently when running several multithreaded junitstories the tests run in multiple threads as intended but do not run concurrently this is evident because when they 're run and the steps are printed on the screen all of them are separated by story and the test time is n't any faster than when thread is run when i ran the threads example from jbehave org in multiple threads i could easily tell all of the steps from the tests were running concurrently because different scenarios from different tests were all jumbled together when the test ran but this is not the case when i run my tests is there a specific reason my tests are not running in concurrency even though they are running in multiple threads ,Bug
allow configuration of report view encoding the jbehave html reports are created using encoding iso normally there should be no problems with umlauts when using this encoding but nevertheless my umlauts in the story name are not shown correctly when opening the jbehave reports html file in a browser this is why the link to the details of the result for that story is broken if i change the browser encoding to utf the umlaut is displayed correctly why does this occur because my eclipse project is set to utf to be used as default encoding and jbehave uses in its html generation template hardcoded iso jbehave produces this line in the html and the browser displays it initially in this encoding meta http equiv content type content text html charset iso some ideas to improve this instead of charset iso it could be used charset utf or it could be made configurable via the mostusefulconfiguration ,Improvement
changing the default of usedelimiternamedparameters i discovered that there is a problem with parameter injection if it is not configured in a special way see the example below all values should be injected but that does not work only is injected correctly parameters from an examples table are not injected in an expected way if mostusefulconfiguration is not set like useparametercontrols new parametercontrols usedelimiternamedparameters true the default is false for using delimeter named parameters i suggest du use true as the default instead see the discussion in the mailing list scenario example given the account data from creditaccount is known and remembered and the account data from debitaccount is known and remembered and the account data from is known and remembered and the account data from account is known and remembered examples creditaccount debitaccount account ,Improvement
support for provided scope dependencies as per discussion jbehave maven plugin never uses provided scope dependencies this is a pain for us as we package all libraries in separate modules so they 're always in provided scope having all of them explicitly changed to compile scope is way too much work according to the conversation in the thread the plugin uses requiresdependencyresolution which has scope runtime by default excluding provided scope according to mojoapispecification it 's just a matter of changing it to for example compile runtime to have dependencies from other scopes as well ,New Feature
 ignore annotation ignored the jbehave runner ignores the ignore annotation i e it actually runs testcase s marked with ignore ,Bug
add scenario specific filters as anchors of givenstories paths as a story writer i find that rather often scenario depends on another in its given clause so i would like to use something like this code givenstories path to story id scenarioid code where i d is the meta tag of the scenario code scenario meta id scenarioid code ,New Feature
failures at beforestories is not being transmited to junit viewer given that i 'm running a test using a embedder annotatedpathrunner using eclipse ide and that i set ignorefailureinstories to false when failures occurs on method tagged by beforestories the console shows that a failure have occurred and the junit viewer is showing a wrong green result,Bug
allow before after steps in givenstories scenarios to not be executed as a developer i would like support for parameterised before afterscenarios to indicate their usage with givenstories so that when i am using givenstories i can prevent before afterscenarios executing twice ,Improvement
add spanish language support hi i downloaded the plugin which integrates jbehave and eclipse and i noted the language spanish we use for scenarios is not included in the plugin so it does n't recognize jbehave keywords is there any way to include this language to the supported ones ,Improvement
jenkins plugin all scenarios duration is when using jbehave jenkins plugin to publish test results the duration column is always this is a known xunit issue that were solved in xunit plugin version current is possible solution is to update the xunit version jbehave uses ,Bug
xml format is broken when story is cancelled when the story is cancelled due to for example story timeout xml reporter generates broken xml just misses scenario end tag part of malformed report code step outcome successful and the parameter param parameter smth happened step scenario scenario keyword scenario title test scenario step outcome successful given the user is on the index page step step outcome successful and parameter apos st parameter column width is parameter u parameter step cancelled keyword story cancelled durationkeyword duration durationinsecs story code ,Bug
easier and safer configuration of default locale affecting keyword language currently there is no easy and safe way to configure another locale for the keywords in my mind i know that it is described here but it has to be configured in several places which might work today but not in a future version of jbehave furthermore new parameterconverters examplestableconverter keywords does not work since there is no such constructor so i had the idea to set this private final field by reflection to my desired german locale org jbehave core i n localizedkeywords default locale see the code below for how i solved it it works basically but it is not nice to solve it this way although i applied single source principle so i suggest that jbehave provides an dedicated api to set the default locale without jbehave users have to use reflection in order to achieve this single source language configuration a quick solution would be to make the localizedkeywords default locale public and not final but that would not be so nice i know you know your jbehave framework better than me i hope you have an idea how to provide that api in a well designed way maybe instead of usekeywords it could be done with uselocale just an idea that locale would affect keyword language and all other language dependent parts of jbehave having such an api for configuring locale can be even helpful for jbehave issue i think since it would be easier to realize and more safe and maintainable for future versions of jbehave code private void setgermanlocale try field localefield localizedkeywords class getdeclaredfield default locale setfinalstatic localefield locale german catch nosuchfieldexception securityexception e e printstacktrace private void setfinalstatic field field object newvalue field setaccessible true try field modifiersfield field class getdeclaredfield modifiers modifiersfield setaccessible true modifiersfield setint field field getmodifiers modifier final field set null newvalue catch nosuchfieldexception securityexception illegalargumentexception illegalaccessexception e throw new runtimeexception e code ,Improvement
allow export via rest of filesystem resources found in source path the resources to export via rest should be found via a filesystem scan providing an includes pattern ,Improvement
show pending story status in crossreference show boolean pending story status next to failed status ,Improvement
improve default report the current report suffers from lack of information i 'm working on a bit project and most of the people prefer the junit report provided on jenkins ci i think that the default report should have more information regrading step failure add full stacktrace and as much information as possible step duration filtering for the report table ex show only failed success save run information in order to see results over time cheers,Improvement
support for accented letters in step pattern placeholder names as it seems jbehave does not support multilanguage for parameter names unfortunately this jira is not configured for umlauts so i can not paste the text into this ticket see the first attached screenshot please for how the step looks like with umlauts jbehave does not like the parameter names containing umlauts since they contain non ascii characters this applies both to the eclipse plugin and the core execution please see the attached screenshots which illustrate the problem can you please fix that so that umlauts are supported in jbehave parameter names ,Improvement
build error with jdk adopt openjdk feedback just run the build mvn s settings xml clean install pexamples gui exception in thread main java awt awterror unable to load awt toolkit sun awt motif mtoolkit sun awt motif mtoolkit at org uispec j interception toolkit uispectoolkit buildunderlyingtoolkit uispectoolkit java at org uispec j interception toolkit uispectoolkit setup uispectoolkit java at org uispec j interception toolkit uispectoolkit init uispectoolkit java at org uispec j uispec j inittoolkit uispec j java at org uispec j uispec j init uispec j java ,Bug
reporting step documentation jbehave supports step documentation which is a cool feature if i add a javadoc comment to the method which implements a step i can see that comment in the jbehave editor when i use code completion however this information is not integrated in any of the jbehave reports a workaround might be to create a javadoc for the step classes i would like to suggest that this kind of report is produced by the jbehave storyreporterbuilder as part of the jbehave 's own reports ,New Feature
add meta tag support to gherkin story parser currently gherkinstoryparser does not support meta info gherkin provides support for tags which should be interpreted as no value meta properties and can be used to filter e g skip tag ,Improvement
improve extensibility of core elements some classes as embedder configuration and annotationbuilder have its attribute 's default values being initialized in its declaration statement to complicate a bit more those attributes are private to be able to extend those classes and be able to set default values properly we need to remove that initialization from the attribute declaration and put in some method with a protected visibility ,Improvement
add support for xwiki as rest provider support xwiki as rest provider,Improvement
add name resolving strategy for rest resources some rest providers are not case insensitive thus requiring a name resolving strategy to handle the resource name provide a mechanism to resolve the name defaulting to a strategy to convert to lower case ,Improvement
jbehave core jbehave jenkins plugin can not compile package reduce to trival since i did nt know you could get the hpi from a user can not compile jbehave core jbehave jenkins plugin project using mvn package steps to reproduce on windows os download or clone master jbehave core open cmd exe cd into the jbehave jenkins plugin directory run the following code mvn package code when running these are the initial results on master code c users qateam downloads jbehave core master jbehave jenkins plugin mvn package u info scanning for projects info info info building jbehave jenkins plugin snapshot info downloading downloaded b at kb sec downloading downloaded b at kb sec downloading downloaded b at kb sec downloading warning the pom for org jenkins ci plugins xunit jar is missing no dependency information available downloading downloading downloading downloading downloaded b at kb sec downloaded kb at kb sec warning could not transfer metadata org kohsuke stapler stapler maven metadata xml from to m g o public ublic hostname in certificate did n't match maven glassfish org maven java net or maven java net downloading downloaded kb at kb sec downloading downloaded b at kb sec downloading info info build failure info info total time s info finished at sun nov est info final memory m m info error failed to execute goal on project jbehave jenkins plugin could not resolve dependencies for project org jbehave jbehave jenkins plugin hpi snapshot could not find artifact org jenkins ci plugins xunit jar in central help error error to see the full stack trace of the errors re run maven with the e switch error re run maven using the x switch to enable full debug logging error error for more information about the errors and possible solutions please read the following articles error help code add the jenkins xunit repository to the pom to fix above problem code repositories repository id jenkins releases id url repository repositories code run the following code mvn package u code after running with the specified repository for jenkins xunit i get the following error code c users qateam downloads jbehave core master jbehave jenkins plugin mvn package u info scanning for projects info info info building jbehave jenkins plugin snapshot info downloading downloaded b at kb sec downloading downloaded b at kb sec downloading downloaded b at kb sec downloading downloading downloading downloading downloaded b at kb sec downloading downloaded kb at kb sec downloaded kb at kb sec warning could not transfer metadata org kohsuke stapler stapler maven metadata xml from to m g o public ublic hostname in certificate did n't match maven glassfish org maven java net or maven java net downloading downloading downloaded kb at kb sec downloading downloading downloaded b at kb sec info info maven resources plugin resources default resources jbehave jenkins plugin debug execute contextualize info using ' utf ' encoding to copy filtered resources info copying resources info copying resource info info maven compiler plugin compile default compile jbehave jenkins plugin info compiling source files to c users qateam downloads jbehave core master jbehave jenkins plugin target classes info info access modifier checker enforce default enforce jbehave jenkins plugin downloading warning the pom for org jenkins ci annotation indexer jar is missing no dependency information available downloading info info build failure info info total time s info finished at sun nov est info final memory m m info error failed to execute goal org kohsuke access modifier checker enforce default enforce on project jbehave jenkins plugin execution default enforce of goal org kohsuke access modifier checker enforce failed plugin org kohsuke access modifier checker or of its dependencies coul d not be resolved could not find artifact org jenkins ci annotation indexer jar in central help error error to see the full stack trace of the errors re run maven with the e switch error re run maven using the x switch to enable full debug logging error error for more information about the errors and possible solutions please read the following articles error help code so i added the dependency for jenkins annotation indexer to the pom to fix above problem code dependency groupid org jenkins ci groupid artifactid annotation indexer artifactid version version dependency code run the following code mvn package u code after running with the specified dependency for jenkins annotation indexer i get the following error code c users qateam downloads jbehave core master jbehave jenkins plugin mvn package u info scanning for projects info info info building jbehave jenkins plugin snapshot info downloading downloaded b at kb sec downloading downloaded b at kb sec downloading downloaded b at kb sec downloading downloading downloading downloading downloaded b at kb sec downloading downloaded kb at kb sec downloaded kb at kb sec warning could not transfer metadata org kohsuke stapler stapler maven metadata xml from to m g o public ublic hostname in certificate did n't match maven glassfish org maven java net or maven java net downloading downloading downloaded kb at kb sec downloading downloading downloaded b at kb sec info info maven resources plugin resources default resources jbehave jenkins plugin debug execute contextualize info using ' utf ' encoding to copy filtered resources info copying resources info copying resource info info maven compiler plugin compile default compile jbehave jenkins plugin info nothing to compile all classes are up to date info info access modifier checker enforce default enforce jbehave jenkins plugin downloading info info build failure info info total time s info finished at sun nov est info final memory m m info error failed to execute goal org kohsuke access modifier checker enforce default enforce on project jbehave jenkins plugin execution default enforce of goal org kohsuke access modifier checker enforce failed plugin org kohsuke access modifier checker or of its dependencies coul d not be resolved could not find artifact org jenkins ci annotation indexer jar in central help error error to see the full stack trace of the errors re run maven with the e switch error re run maven using the x switch to enable full debug logging error error for more information about the errors and possible solutions please read the following articles error help code stuck here just trying to build the hpi to put into jenkins using java version code c users qateam downloads jbehave core master jbehave jenkins plugin java version java version java tm se runtime environment build b java hotspot tm bit server vm build b mixed mode code using maven version code c users qateam downloads jbehave core master jbehave jenkins plugin mvn version apache maven ca a da d f ac af bb f f maven home c apache maven java version vendor oracle corporation java home c java jdk jre default locale en us platform encoding cp os name windows version arch amd family windows code ,Bug
allow configuration of freemarker templateloader based on classloader rather than class the freemarker templateloader is based on the class which does not always play well with all runtime envs in particular maven it would be better to have the templateloader based on the classloader which can default to the class ,Improvement
plugin execution not covered by lifecycle configuration generate jbehave project from archetype produces an invalid pom xml file plugin execution not covered by lifecycle configuration org jbehave jbehave maven plugin beta unpack view resources execution unpack view resources phase process resources plugins plugin groupid org jbehave groupid artifactid jbehave maven plugin artifactid version jbehave core version version executions execution id unpack view resources id phase process resources phase goals goal unpack view resources goal goals execution execution id embeddable stories id phase integration test phase configuration includes include embeddables include includes excludes ignorefailureinstories true ignorefailureinstories ignorefailureinview false ignorefailureinview threads threads metafilters metafilter metafilter metafilters configuration goals goal run stories as embeddables goal goals execution executions plugin ,Bug
support other languages when user creates a new story if you create a new story in eclipse always the english story template is used but if you write stories in another language you need another template for that other language it would be good if jbehave eclipse plugin could create a new story according to the language with is configured in eclipse preferences of course it is a lot of work translating the example text in all the languages that could be left in english with just translated keywords for given when and so on ,Improvement
allow step pattern parameter names to use a configurable character class upgrading from to you may have found that the parameter names could not contain digits this was due to a change jbehave which added support for unicode characters support for digits has now been restored and in addition the character class used to find parameter names has been made configurable defaulting to code java p l p n code to restrict parameter names to letters only use code java p l code ,Improvement
failures in view do not cause build to fail even when configured to not ignore failures in view running embeddables does not fail when failing stories occur currently it only uses flag for ignoring failure in stories ,Bug
of multiple exclusion meta filters only is evaluated assuming meta info noformat meta environment all skip noformat the following filter may not exclude the scenario although it should noformat environment preview skip noformat method match in metafilter returns immediately when filter expression does not match if environment is tested before skip match will return false and scenario will not be excluded the logic should be changed such that match will return true iff any exclusion filter matches the actual order of evaluation depends on the order of property names returned by getpropertynames which appears to be alphabetical noformat private boolean match properties properties meta meta for object key properties keyset string property string properties get key for string metaname meta getpropertynames if key equals metaname string value meta getproperty metaname if stringutils isblank value return true else if property contains return value matches property replace return properties get key equals value return false ,Bug
better integration with junit separate results for each story scenario example i would like each example in each scenario in each story to show up as distinct result in the junit test results within my ide and the junit reports this has the advantage that assertion failures are linked to example failures and can be clicked on in the ide to jump to source code of the offending failure currently i get a single failure in my ide and have to look through log files or look at the jbehave report the current annotatedpathrunner implementation extends org junit runners blockjunit classrunner and therefore uses the methods with a test annotation to drive the junit results in most jbehave tests there is only such method which means that there is only a single result in the junit reports ide and html i have started to implement a new org junit runner runner implementation which extends org junit runners parentrunner and can use the stories as the basis for generating the junit test results rather than the test case itself i have attached a screenshot and source code for running a single test jbehave listtest in eclipse the test case runs a single story list story you can see from the results that there is a hierarchy in the junit results for story scenario and example ,Improvement
reports are not showing properly all are showing as i used an example to create jbehave scenarios i fallowed as given in the jbehave documentation but facing a problem getting report generated i did n't find the solution to get count the scenarios and steps or testcases is their any configuration i am missing i am attaching all the files used thank you in advance ,Bug
step marked as pending without preceding failed step silent failure in a pull of master today but using that jbehave core with client code we have a case where the scenario output looks like given foo when bar and i never get to this line pending then it does not matter about this line not performed we can assert that i never get to this line matches a single well defined step with no sound alikes we ca n't see a failed line which is our usual experience with jbehave we can see a selenium screenshot but we do n't know what that pertains to and it does not show anything that looks like an error we 're not sure why it was produced ,Bug
allow stories that do n't match filters not to be reported currently stories that are not matched by filters are reported but not run allow option to silently ignore them ,Improvement
ignore comments in story meta jenkins barfs when finding during the xslt transform xunit plugin can we cater for comments amongst meta tags either parse and handle them or fail to parse explicitly ,Improvement
report stying not being generated i am using this report builder definition in a annotation setup as per the jbehave website documentation public static class myreportbuilder extends storyreporterbuilder public myreportbuilder super this withcodelocation codelocations codelocationfrompath build publish x this withrelativedirectory story reports this withdefaultformats this withformats console html the reports are being generated in the view directory however there are no images css or javascript being generated even though the html refers to them i 've scoured the web site documentation which suggests that they should be and tells you how to turn them off but not what to do if they are not there ,Bug
support loading stories from google docs as a ba i want to be able to write my story in google docs this has the advantage that the stories are in the cloud and multiple stakeholders ba developer work at the same time on the same document by using the google docs api a document can be exported to odt and be delegated to the odt support in jbehave attention the given patch contains also a fix for the class odfutils in the module jbehave odf the class odftextextractor is used to convert odt correctly to text ,New Feature
excluded scenarios should not be included into scenariosuccessful count excluded scenarios should not be included into scenariosuccessful count let 's say we have story with scenarios and metafilter will exclude of them this story will be reported then with total scenarios successful scenarios and excluded ,Bug
compactify method and annotation information in beforeorafterfailed message as paul noted the message in the beforeorafterfailed message can be too verbose and confusing when reading logs should be shorted to include method short name annotations short names and class e g method afailingbeforescenariomethod annotated with beforescenario in class org jbehave core steps somesteps failed java lang runtimeexception,Improvement
more fined grained control over scope real hooks listeners for scope changes for di container setup to use it would be nice to compose to of a number of strategies application scope singleton scope in spring guice parlance new component per story new component per scenario new component per step it would be nice to effect this without before afterstory scenario etc ,New Feature
ansi coded console output as contributed by adriano bonat ,New Feature
can we disassociate pendingstepstrategy and failurestrategy please and impls there is no benefit from a usability pov for them being part of the same hierarchy in fact its difficult to explain to newbies why that needs to be the case in code there 's only storyrunner that holds on to threadlocals private threadlocal failurestrategy currentstrategy new threadlocal failurestrategy private threadlocal failurestrategy failurestrategy new threadlocal failurestrategy private threadlocal pendingstepstrategy pendingstepstrategy new threadlocal pendingstepstrategy which is also hard to explain why ,New Feature
allow system properties to be specified for annotatedembedderrunner the annotatedembedderrunner is missing the specification of system properties via the usingembedder ,Improvement
 before afterstories executions that have failed should be highlighted in red in the reports hml entries these are executions that are not bound to scenarios the failed status in the reports html should be triggered by either failed scenarios or failed steps ,Improvement
ignorable steps before and steps should not be marked as pending pending step generator should not mark as pending and generate methods for ignorable steps before and steps ,Bug
beforestories xml can be length causing xunit to fail a jenkins job never fear the following can fix it so that the jenkins job can complete find workspace project target jbehave maxdepth type f size exec rm f ,Bug
lines starting scenario can not be commented out devs often comment out all scenarios bar as they debug it commenting out of steps sure that works commenting out of the scenatio header sadly its ignored,Bug
add support for annotated steps before and after example scenarios it would be nice to have annotations or any other way to run some methods before and after each example ,New Feature
table parameters should be formatted as styleable html tables allow table parameters to be formatted as html tables and styleable as other tables ,Improvement
lazy instantiation of steps classes only if candidate steps are matched as suggested by paul the eager instantiation of steps classes is unnecessary candidate steps can be matched using the steps type and the steps instances should be instantiated only if the candidate steps are matched ,New Feature
ant task runstorieswithannotatedembedderrunner not passing system properties to embedder i 'm trying to run jbehave from ant using the following ant code code xml taskdef name runstorieswithannotatedembedderrunner classname org jbehave ant runstorieswithannotatedembedderrunner classpathref integration tests classpath runstorieswithannotatedembedderrunner includes storyembedder java sourcedirectory src integration systemproperties java awt headless true web project dir build integration web dir ignorefailureinstories true ignorefailureinview false generateviewafterstories true code at the momment i 'm getting a class not found which the story embedder i 've written starts up does n't happen from a junit run inside eclipse i think that it 's running from the default directory because it appears that the systemproperties are not making it through to the embedder here 's the log showing the startup code run bdd tests runstorieswithannotatedembedderrunner running stories with annotated embedder org jbehave core junit annotatedembedderrunner runstorieswithannotatedembedderrunner found class names au com sensis wireless smsmanager integration bdd stories annotatedstoryembedder runstorieswithannotatedembedderrunner debug runstorieswithannotatedembedderrunner processing system properties code as you can see it 's reporting no properties passed digging into the ant task code supports that the properties are not getting through but from what i can see in the source there is no obvious reason possibly the code that loads the properties has a bug and is throwing an exception because it 's try catch silently swallows any errors ,Bug
allow specification of configuration implementation class via configure annotation currently starts from mostusefulconfiguration as implementation on which other annotated properties are applied in some cases e g seleniumconfiguration user needs to specify a different starting implementation e g seleniumconfiguration also the specification of the implementation would allow users to use a custom implementation ,Improvement
storyreporterbuilder does not have an easy way to provide custom storyreporter s i recently wanted to add my own storyreporter to every story and found it quite difficult it would be great if storyreporterbuilder could have of the following methods added withstoryreporters storyreporter storyreporters addstoryreporter storyreporter storyreporter the only way i could find was to override storyreporterbuilder build string storypath and use a delegatingstoryreporter to include my custom storyreporter s ,Improvement
curtailed stack traces for known failures public void mystep throw new knownfailure corba down if we threw the above from the middle of a step jbehave could list the step as failing without stack trace in the outputs ,Improvement
storyrunner failure strategy is not set when running before or after stories steps in multiple threads i got following exception when building attached project mvn clean install test set pl mmadej jbehave jbehavestoriestest tests run failures errors skipped time elapsed sec failure run with no replacement story pl mmadej jbehave jbehavestoriestest time elapsed sec error org jbehave core embedder embedder runningstoriesfailed failures in running before or after stories steps at org jbehave core embedder embedder runstoriesaspaths embedder java at pl mmadej jbehave jbehavestoriestest run jbehavestoriestest java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java please investigate this error happens with jbehave when i 'm using everything looks ok internally there is npe in storyrunner currentstrategy get handlefailure storyfailure get currentstrategy get returns null please investigate thanks in advance for your help,Bug
filter out tests at the scenario level only the filtering by metafilter is applied twice once to filter out stories and once to filter out scenarios given the following situation a scenario is marked smoke the containing story is not tagged in any way a test run is executed using meta filter smoke in this case the scenario would not be run as the story is filtered out before the meta information of the scenario has a change to be evaluated stories should not be ignored when they do n't match a positive meta filter like smoke as their scenarios might match that meta filter my thoughts i think filtering by meta could only be applied to scenarios each scenario could inherit the meta of the containing story and be evaluated as such filtering out stories right away is not all that useful ,Improvement
before after story scenario methods could accept parameters that have meaning at that moment for example bq public void mybeforestory named somemetatag string somemetatag this would be a poor mans version of jbehave ,New Feature
scenario level tag is ignored by meta filter i created the attached project which uses a very simple story with scenarios each scenario has a different author i would like to run the scenario written by author a using metafilters metafilter author a metafilter metafilters but that does n't run any scenarios filtering with author a works fine attached project is self contained and does n't have any external depdendencies see maven details below thanks edgardo please see further details and mauro 's analysis on ,Bug
examples table for subset of steps is great but pertains to a single step quote given i 'm on the foobar page which is mins of clicking through prelim pages when i enter foo in the foo field then the bar field is auto completed with bar examples foo bar eggs bacon toast marmite quote suggests that all the given when then steps are repeated in the linked to example it is the only given what this change is about is the fact that only the when then steps need to be repeated this is implicit because the given line does not refer to any of the table params if this needs to be explicit it could be a team 's choice to set this for the entire set of stories bq configuration setpartialexamplestablesexpansionperscenario true or it could be specified in the story itself quote given i 'm on the foobar page which is mins of clicking through prelim pages when i enter foo in the foo field then the bar field is auto completed with bar examples foo bar eggs bacon toast marmite quote ,New Feature
template based reporters currently most reporters are printstream based and configurable via a set of properties provide template based implementations that build up the report context during the execution generate the report using the context at the end of the execution using a configurable template,New Feature
unpack view resources goal requires resources to be in compile scope because i run jbehave in the test scope of the same project that it is testing i can not use the compile scope for jbehave dependencies however the maven unpack view resources goal requires the resources to be in compile scope this means that they get included in my final war when i switch them to test scope the unpack view resources goal does n't find them i suppose the best fix would be to allow the unpack view resources goal to have its scope configured in the same way as the run stories goals ,Improvement
steps could benefit from a pre requisite check an example prerequisitehandler prh new prerequisitehandler public void prerequisitecheck object instance method method string url webdriverprovider get getcurrenturl string urlpart geturlpartfromannotationonmethod method assertthat url contains urlpart configuration useprerequisitehandler prh webdriver assumed page checking before invoking a step is use of a pre requisite ultimately this is a jb core enhancement and a jb web selenium specialization ,New Feature
add failed step as uuidexceptionwrapper message to facilitate debugging it may be useful to have in the exception message the step that failed ,Improvement
use of pagefactory webdriver idiom can access lazywebdriver instance but required extended interfaces like javascriptexecutor makenonlazy should be protected so it can be called by subclasses ,Bug
bad encoding in jbehave raports with default configuration from jbehave archetype in windows i have created project from archetype with command mvn archetype generate darchetypegroupid org jbehave darchetypeartifactid jbehave spring archetype and edited my story file added some international chars after this there is a scenario with some pending steps a should be scenario a scenario with some pending steps a here is proper encoded letters i have edited pom xml and added project build sourceencoding utf project build sourceencoding project reporting outputencoding utf project reporting outputencoding in properties section the html and xml raport should be properly encoded after this i think option dfile encoding utf should be not required for this maven project should have identical results on all platforms if properly configured ,Bug
flash support a webdriverprovider implementation that supports invocation of swf object methods via javascript ,New Feature
when story has multiple failed scenarios only screenshot is created when story has multiple failed scenarios only screenshot is created problem is storyrunner holds first failure for the rest of the story webdriverscreenshotonfailure then generates all screenshots from the same guid and writing them them all into the same file ,Bug
ant tasks running with incorrect classpath i 've been trying to make this work for hours now it appears that the ant tasks run the embedders with the classpath used to run ant and that there is no way to override this this means i can not run jbehave against the classpaths used to build and test the application how do we specify a classpath for jbehave 's ant tasks ,Bug
story execution not failing fast when ignorefailuresinstories false this is a regression introduced with multi thread support ,Bug
add time duration to story statistics and reports view add story time duration in ms,Improvement
per stories lifecycle steps requires same thread executor service as of version jbehave embedder allows the specification of a custom executorservice for the story execution per stories lifecycle steps perstoriesseleniumsteps and perstorieswebdriversteps will require a same thread executor service e g the provided by guava 's moreexecutors samethreadexecutor javadoc should be updated to make the use aware of this requirements examples should show how to support it per stories lifecycle ,Improvement
annotated embedder runner class should be read from annotation when running in cli as noted by cristiano gavi o the ant and maven configuration of the annotatedembedderrunner class is redundant as it can be read from the annotated value ,Improvement
givenstories path list should be more tollerant with spaces we should allow paths to be padded with spaces ,Improvement
storyreporter forces me to write non thread safe code the storybuilder interface includes the following methods void beforestory story story boolean givenstory void beforescenario string scenariotitle void beforeexamples list string steps examplestable table which forces me to store the story and scenario in local variables in order to know exactly which examples are about to be run in my beforeexamples method this results in a slightly ugly but definately not thread safe storybuilder implementation it also forces me to implement beforestory and beforescenario when i was actually only interested in beforeexamples if the methods were void beforestory story story boolean givenstory void beforescenario story story boolean givenstory string scenariotitle void beforeexamples story story boolean givenstory string scenariotitle list string steps examplestable table i would not need to keep track of the current state and my implementation could be thread safe and prettier ,Improvement
failinguponpendingsteps only works for normal steps it does not do as it suggests for composite steps whereas as mismatching regex step text causes pending as expected then subsequent job failure for regular given when or then steps this the case for composite steps e g the following noformat given this matches just fine composite steps this matches nothing perhaps this matches perhaps it does not public void unimportantmethodname noformat does not cause ultimate build failure moreover the step executer continues to the next step rather than marks that as not performed as expected perhaps the are related ,Bug
printstreamoutput not threadsafe field cause needs to be thread local as it is mutable state per story and stories share instances of printstreamoutput,Bug
concurrentmodificationexception in xref when run multithreaded this causes jenkins to choke when in does not find a story for the story in question the xunit plugin stage warning failed to run story loyalty rapidrewards extend awards story java util concurrentmodificationexception at java util abstractlist itr checkforcomodification abstractlist java at java util abstractlist itr next abstractlist java at org jbehave core reporters crossreference xrefroot processstories crossreference java at org jbehave core reporters crossreference createxrefroot crossreference java at org jbehave core reporters crossreference outputtofiles crossreference java at org jbehave core reporters crossreference afterstory crossreference java at org jbehave core reporters concurrentstoryreporter afterstory concurrentstoryreporter java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder embedder enqueuedstory call embedder java at org jbehave core embedder embedder enqueuedstory call embedder java at java util concurrent futuretask sync innerrun futuretask java at java util concurrent futuretask run futuretask java at java util concurrent threadpoolexecutor worker runtask threadpoolexecutor java at java util concurrent threadpoolexecutor worker run threadpoolexecutor java at java lang thread run thread java ,Bug
meta tags and other things injectable into components meta tags can be injected into step methods they ca n't be injected into step pojo constructors nor in any capacity to components that are themselves injectable into step pojo constructors workaround people have to do accept the meta tag into the step pojo 's step method and hand it to wherever needs in our particular case page objects are being made by a di container and it would be better separation of concerns to have meta tags injected where they are needed and not in the steps class which only passes them on the senior developer in question wishes in lieu of something better that storyrunner runcontext meta was statically available on a thread local and that page objects could pull it when they need it that 's a breach of ioc of course but you get why he wishes for it ,New Feature
excluded filtered out scenarios are reported as pending as well excluded filtered out scenarios are reported as pending as well set metadata on scenario and set metafilter so the scenario is ignored it will be reported as pending too this bug has been probably introduced by jbehave the problem is caused by org jbehave core reporters poststorystatisticscollector afterscenario as the method does not differ if no steps has ben executed because scenario is not implemented pending or because scenario was excluded ,Bug
outcomestable not being reported regression due to the introduction of the uuidexceptionwrapper the wrapped outcomesfailed exception is not detected and the outcomestable is not reported ,Bug
jbehave maven plugin ignoring execution when trying to execute a package on a maven project with jbehave and jbehave maven plugin configured maven fails to execute the jbehave goal this is regardless of weather i execute it with in eclipse or on the commandline however if i issue the following command on the command line the jbehave maven plugin is executed and runs the acceptance tests mvn clean package org jbehave jbehave maven plugin run stories as embeddables the command i use in eclipse is jbehave run stories as embeddables i have configured the jbehave plugin noformat plugins plugin groupid org apache maven plugins groupid artifactid maven compiler plugin artifactid configuration source source target target configuration plugin plugin groupid org jbehave groupid artifactid jbehave maven plugin artifactid version version configuration scope test scope includes include java include includes metafilters metafilter author metafilter metafilter skip metafilter metafilters systemproperties property name java awt headless name value true value property systemproperties ignorefailureinstories true ignorefailureinstories ignorefailureinview false ignorefailureinview configuration executions execution id run stories as embeddables id phase test phase goals goal run stories as embeddables goal goals execution executions plugin plugins noformat thanks gavin,Bug
alternate behavior for failing assertions i 've been thinking about how jbehave handles assertion failures as it works today jbehave behaves something like this when it encounters a failing assertion color green given i have searched for a round trip flight color color green when i view my trip summary color color green then i should see the origin and destination of each flight segment color color red and i should see the fare cost failed color color gray and i should see the taxes and fees not run color color gray and i should see the on time rating of each flight segment not run color test failed i 'd like to have the results look like this color green given i have searched for a round trip flight color color green when i view my trip summary color color green then i should see the origin and destination of each flight segment color color red and i should see the fare cost failed color color green and i should see the taxes and fees color color red and i should see the on time rating of each flight segment failed color test failed i 'm finding that most assertions in a functional test need not halt test execution and it would be nice to have the test run until it ca n't if the fare cost does n't get fixed for weeks that wo n't hide the broken on time ratings for jbehave i believe that the change would entail recording and swallowing assertion exceptions while failing on other sorts of exceptions if selenium ca n't find the continue button it will throw a nosuchelementexception and halt the test if this does get implemented i think that it would be useful to have some sort of before after step hooks so that we can take screenshots for each failing assertion it would be nice to have something like afterstep failing ,Improvement
storyreporterbuilder code location should be settable from the output directory by ant tasks and maven goals the maven plug in does not configure a code location on the embedder 's storyreportbuilder therefore the story reporter will attempt to find story stats files in a directory relative to the current directory and write the reports relative to the current directory as well example project structure noformat app app stories noformat if the app stories project uses the junit integration to run stories its output files will correctly be written to app stories target jbehave a generate stories view mojo configured in app stories pom xml will not find those output files and write the reports html to the incorrect directory unless the maven build is started in the app stories module directory for instance in the root directory noformat mvn verify pl app stories noformat would search for story output files in target jbehave not find anything and write an empty reports html to target jbehave views note that the unpack view resources mojo in the same pom xml will work correctly because it uses a different and correct way of configuring the output directory suggestion use the project build outputdirectory or project build testoutputdirectory properties to derive the story reporter builder code location from within the mojo ,Improvement
storyrunner runparametrisedscenariosbyexamples does not execute the examples after the first failure currently the method storyrunner runparametrisedscenariosbyexamples does not check the configuration and whenever a step fails all subsequent examples are reported as not performed a simple fix would be to do this before calling the runscenariosteps method if context configuration storycontrols resetstatebeforescenario context resetstate thanks,Bug
typo in jbehave spring archetype causes malformed pom xml jbehave sitee version jbehave site version ,Bug
wrong encoding in reports running from junit maven failsafe or surefire plugin not dedicated jebhave maven plugin on windows with dfile encoding utf freemaker still is using and rendering html report with cp encoding output log from maven install command stories sample story scenario przyk adowy scenariusz numer given given co tam pending when by pending then g eg k pending given given co u u atam u u f u u a u u u u a generating reports view to ' e jenkins jobs jbehave encoding test workspace target jbehave ' using formats ' console txt html stats ' and view properties ' unknown macro defaultformats stats decoratenonhtml true viewdirectory view decorated ftl jbehave report decorated ftl reports ftl jbehave reports with totals ftl maps ftl jbehave maps ftl navigator ftl jbehave navigator ftl views ftl jbehave views ftl nondecorated ftl jbehave report non decorated ftl ' encoding test debug could not find template in cache creating new id ftl jbehave report decorated ftl pl pl cp parsed encoding test debug compiling freemarker template ftl jbehave report decorated ftl pl pl cp parsed from jar file c m repository org jbehave jbehave core jbehave core jar ftl jbehave report decorated ftl encoding test debug could not find template in cache creating new id ftl sh ftl pl pl cp parsed ,Bug
multiline scenario title is parsed as empty if the scenario title i e the text that follows the keyword scenario is over multiple lines the text is parsed as empty string ,Bug
reports are outputted to ant home lib instead of target dir as reported by ben sullivan when running scenarios via ant cli the reports are being outputted to ant home lib instead of target dir problem stems from the fact that the fileprintstreamfactory uses the scenarioclass getprotectiondomain getcodesource getlocation getfile to identify the output dir the classloading of ant by default must be setting the code source location to ant home lib need to find a way to configure ant classloading or allow explicit setting of the output directory currently only the entire output file of the print stream is configurable which makes it pretty useless for running with multiple scenarios ,Bug
provide default values for keywords when not reading from a i n bundle now that the number of keywords has grown as an alternative to using i nkeywords keywords should also provide a default constructor that builds a map of default values for all keywords these default values should be accessible and usable for those that want to override only part of them ,Improvement
html xml reports should handle better missing or null values from the examples table currently npe can occur in escaping html xml chars when the value for a given header is not found or when a converter returns a null value a check should be added before escaping them ,Improvement
allow to indicate which is the weight of each stepscandidate class used by a scenario class to resolve duplicated methods with the addition of the givenscenarios feature almost often will be necessary to inform more than stepscandidate class for scenario class the problem is that those stepscandidates could have same methods or could be extending the same parent class and sharing same method jbehave will get the first occurrence of method that match textual sentence which not necessarily will be the desired so i would like that jbehave had some way to stablish a weight or an order or maybe indicate a default steps class or anything like that where i could indicate which is the best path it should be taken ,New Feature
improve junit integration as a developer using jbehave running in junit in eclipse i would like to easily determine how many individual scenarios have passed or failed and which steps failures occur in what springs to mind is to wire each scenario up as separate junit testcase rather than the single ' testscenario ' method doing so i would easily be able to drill down to the individually failing scenarios more easily regarding finding out which step failed short of writing a fully fledged plug in this would be a simple matter of retaining the actual failure exception and setting this in junit 's test result the failed step should be in the stack trace reported by junit ,Improvement
allow a step to be reused between scenarios with and without example tables i would like to reuse step classes and its methods in both scenarios that do n't use example tables and also in scenarios that i want to use it for example code this scenario we do n't use example table and its very flexible and reusable given that user is editing suppliers when user input for ranknumber and input for maxvalue then system sends a email to the managers with title ' supplier rank was changed ' code for this work today i just need to create a step method like this code when user inputs value for field alias inputs value for field public void whenuserinputsvalue named field string pfield named value string pvalue code that step method is very reusable indeed a lot of scenarios could use it but if i want to use the benefit of an example table in this scenario maybe i found out others businesse rules that could be treat here too i do n't have this flexibility anymore because example table needs the steps sentence be fixed and table column matching named parameters so i will need to construct other method for the same purpose today example tables need that the column tables match the parameter names,Improvement
gets parsed as a long when defining a step that takes a list double inputs such as etc work fine but throws a classcastexception due to jbehave parsing it as a long it should be parsed as a double ,Bug
standardize and make file directory layout configurable the maven plug in for jbehave works all right but it should default to standard maven archetype layout for test classes and the jbehave team should come up with a standard on where plain text scenarios should live what file extension they should have to make them discoverable and then allow that standard to be overridden the documentation on the jbehave site should clearly present the standard layout and specify how it can be overridden reporting output should be included in the standard and should by default go where maven reports typically go in a sub directory of target ,Improvement
stories should be retrievable from external or remote sources i want to be able to specify my stories in an external or remote source e g a file directory or a wiki the stories resources should then be identifiable via a url or some such of which local class path resources are a special case ,New Feature
jbehave should be more intelligent flexible with regards to prioritisation of steps bdd 's strength relies on being able to write fluent scenarios jbehave 's support for this is very good but there is still room for improvement for example a typical scenario might read quote scenario schedule patient discharge given a medical patient called bob holness who is not medically fit when i change bob 's state to medically fit and select a discharge time of tomorrow morning and select a discharge complexity of color red then bob 's discharge schedule should be displayed on the ward board color quote now in a related scenario let 's say i want to cancel while rescheduling a discharge scenario cancel rescheduling patient discharge quote given a medical patient called bob holness who already has a discharge schedule when i reiterate that bob 's state is medically fit and select a discharge time of tomorrow morning and cancel the discharge schedule color red then bob 's old discharge schedule should be displayed on the ward board color quote the underlying implementation of assserting bob 's actual discharge schedule is the same but i want to emphasise the expression of intent through use of words such as old new still etc jbehave partially supports this through aliases code title mysteps java borderstyle solid then ''' patient discharge schedule should be displayed on the ward board ' ' ' aliases values ''' patient old discharge schedule should be displayed on the ward board ' ' ' public void assertdischargescheduleonwardpage patient patient wardboardpage assertdischargeschedule patient code the trouble is that the above fails because of the way in which jbehave matches and prioritises steps both then and alias steps will match the sentence bob 's old discharge schedule should be displayed on the ward board but then will be prioritised based on it 's declaration order causing the value bob 's old to be passed to the patientparameterconverter since no patient exists with the name bob 's old the parameter converter will return null and the test fails currently the workaround is to reword the steps slightly to prevent both of them matching quote then color red color bob's color red color discharge schedule should be displayed on the ward board then color red color bob's color red color old discharge schedule should be displayed on the ward board quote or quote then bob 's discharge schedule should be displayed on the ward board then bob 's old discharge schedule should color red now color be displayed on the ward board quote but both are inferior to the original a nicer and fairly easy solution would be to base this priortisation on similarity with the string step using something like the levenshtein distance harder but better yet would be to make the prioritsation configurable i 've attached the first solution with lots of printlns so you can see how well the prioriisation works ,New Feature
scenario runner form submission should support both get and post methods post is required for executing very long scenarios and is now the default can be changed via the drop down selection next to the run scenario link ,Improvement
add stepfinder in order to avoid duplication of steps as a story writer i want to find all candidate steps i e methods that match a particular textual step and report them as stepdocs ,New Feature
multiple and steps are not matched regression introduced by jbehave whereby when multiple and steps are encountered only the first is matched while from the second is it marked as pending cause lies in the fact that jbehave introduced concept of previous step for matching purposes but this should be the latest non and step ,Bug
givenscenarios runs called scenario as pending not the implemented version we are trying to use givenscenarios but when the scenario containing it runs it generate the pending steps not the actual steps when the called scenario is run independently it runs fine my step implementation are simply printlns this is just running in eclipse with jbehave core any idea what we could be missing here as a workaround i can embed the steps method for the first scenario before the steps method of the second then it works as expected please see attached source in bdd jar tx warren user logs in successfully given i am not logged in when i log in as liz with a password abc then i should see a message welcome liz output runbeforescenario logged out login for user csm with password abc checkmessage welcome liz runthisafterscenarioany runthisafterscenariosuccess user places an order scenario user logs in and places an order givenscenarios com test examples scenarios user logs in successfully scenario when i place an order then i should see a message order placed output com test examples scenarios user logs in successfully scenario scenario given i am not logged in pending when i log in as service with a password service pending then i should see a message welcome csm not performed placing order checkmessage order placed run user places an order with workaround embedded steps method interesting is that the before and after steps of the first steps class is run in the second as well output runbeforescenario logged out login for user liz with password abc checkmessage welcome liz runthisafterscenarioany runthisafterscenariosuccess runbeforescenario placing order checkmessage order placed runthisafterscenarioany runthisafterscenariosuccess,Bug
rename i nkeywords to localizedkeywords for clarity and drop capital w from keywords where applicable,Improvement
annotation for parameterconverter simplifying adding parameterconverter to steps here 's an example code public class datetimeconverter implements parameterconverter override public boolean accept type type return type equals datetime class override public object convertvalue string value type type return new datetime value code code parameterconverters datetimeconverter class public class personsteps private person person private datetime currentdate steps code the parameterconverters annotation takes an array of typeconverter code retention retentionpolicy runtime target elementtype type public interface parameterconverters class extends parameterconverter value code here is a steps factory code public class parameterconverterstepsfactory public candidatesteps createcandidatesteps object stepsinstances throws instantiationexception illegalaccessexception candidatesteps candidatesteps new candidatesteps stepsinstances length for int i i stepsinstances length i object stepsinstance stepsinstances i stepsconfiguration configuration parameterconverters parameterconverters stepsinstance getclass getannotation parameterconverters class if parameterconverters null configuration createconfiguration parameterconverters else configuration new stepsconfiguration candidatesteps i new steps configuration stepsinstance return candidatesteps private stepsconfiguration createconfiguration parameterconverters annotation throws instantiationexception illegalaccessexception parameterconverter converters new parameterconverter annotation value length for int i i converters length i converters i annotation value i newinstance org jbehave scenario steps parameterconverters converteraggregate new org jbehave scenario steps parameterconverters converters return new stepsconfiguration converteraggregate code ,Improvement
' and ' step andstep ignores candidatestep step type on it states a step starting with and assumes the same meaning of the previous step but this clearly is n't the case in practise nor does it even require any preceeding step type to be defined for example with public class steps extends org jbehave scenario steps steps when the wind blows public void thewindblows system err println when it blows then boom given the wind blows public void thewindblows system err println given it blows then boom scenario test and the wind blows given the wind blows and the wind blows when the wind blows and the wind blows outputs when it blows then boom given it blows then boom when it blows then boom when it blows then boom when it blows then boom obviously you would n't intend to start your scenario with an andstep but it 's easy enough to get there or produce of the other problems if you are copying editing scenarios i think it would be better if andsteps assume the meaning of the previous step as intended according to the web documentation ,Bug
allow per story and per scenario meta information from a development management perspective bdd could be extremely useful in helping to track and understand who is creating specifications and when they are being injected since requirements like this will vary between users it would be a good idea to implement as generically as possible and then provide an example or reference my thoughts on what would be useful in my own situation a way to indicate the author s of a scenario a way to indicate the owner of a story a way to indicate the creation date of a scenario a way to indicate the last update date of a scenario the injection phase of the scenario eg grooming planning development i do n't think these should be included in the grammar as individual specific elements but perhaps the grammar could have a syntax for optional meta information the grammar would allow a word eg meta followed by a category perhaps emphasized with a symbol eg author and then followed by any arbitrary text this would allow interesting things meta author john role product owner created injection backlog grooming or meta author fred role quality engineer created injection sprint planning or meta author colin role developer created injection development being able to say that for instance only of scenarios are created in backlog grooming while another are created in sprint planning and are created during development would be very useful in identifying and resolving process impediments and training product owners and teams to define requirements earlier so they do n't run into velocity impacts when they are discovered late in a sprint allowing meta data would enable scenario management tool development ,New Feature
review mostusefulstoryconfiguration defaults review and update defaults so as to minimise configuration following defaults have been shown to be more useful storypathresolver new underscoredcamelcaseresolver story storyreporter new consoleoutput ,Improvement
regex stackoverflow error with exampletables on windows regex stackoverflow error with exampletables on windows which partially originate from a jdk bug stackoverflow with regex alternation like s the fix that works for me avoid alternation by using dotall and instead of s patternscenarioparser java private pattern patterntopullscenariotableintogroupone keywords keywords configuration keywords string table keywords examplestable return compile table s dotall ,Bug
eclipse plugin for navigating between textual and code steps as an avid user of jbehave i find maintaining steps very laborious so i would like an eclipse plugin with support for opening declarations of steps from the scenario files support for finding usages of steps in scenario files from the declaration support for opening the declaration of failed steps when running junit nice to have refactoring support when editing the annotations scenarios using the step get rewritten,New Feature
allow steps dependencies to be composable via spring add spring support module equivalent to pico 's see jbehave ,New Feature
get rid of trailing whitespaces after the table examplestable java public examplestable string tableasstring this tableasstring tableasstring trim parse ,Improvement
allow candidatesteps methods to be defined in pojos the composition model has a is often preferable to the inheritance model is a candidatesteps methods should be definable in pojos that do not necessarily extend steps rather steps should be able to wrap a steps instance pojo and retrieve the annotated steps methods from it both composition and inheritance models should be supported ,Improvement
dry run scenario to determine that no steps are pending sometimes it is useful to know if all the steps in a scenario have been matched which is fast before attempting to run it which may be very slow for example as we have learnt to use jbehave we have had need to refactor our step definitions our jbehave tests are n't run much more often than daily at the moment and it is n't reasonable to run them all before committing due in both cases to the length of time needed to run them compounding that with other possible fires in the build chain it can take quite some time before we realise that a change to a step definition has broken a scenario what we 'd like is a way to relatively quickly dry run our scenarios to confirm that each step has at least been matched possibility that would allow us to do this would be if the configuration passed into runscenariosteps could provide the initial state i 'm thinking it would then be quite easy for the state to skip running the steps and just determine whether they had been matched ,Improvement
new syntax for given with many parameters a given step might look like code given a person first name bruno last name bieth born in tombouctou living in canada driving miles per year code it can be hard to read passed a certain amount of parameters i suggest the following syntax code given a person first name bruno last name bieth birth date birth country tombouctou country of residency canada miles driven per year code the java code would look like code givendetail a person public void aperson named first name string firstname named last name string lastname named birth date datetime birthdate named birth country string birthcountry named country of residency string countryofresidency named miles driven per year integer milesperyear person new person firstname lastname birthdate birthcountry countryofresidency milesperyear code the factory could use another candidatesteps instance say code public class detailedsteps implements candidatesteps private candidatesteps delegate private stepsconfiguration configuration private object instance public detailedsteps stepsconfiguration configuration candidatesteps delegate object instance this configuration configuration this delegate delegate this instance instance override public candidatestep getsteps return getsteps instance getclass override public candidatestep getsteps class stepsclass list candidatestep steps new arraylist candidatestep arrays aslist delegate getsteps stepsclass for method method stepsclass getmethods givendetail annotation method getannotation givendetail class if annotation null steps add creategivendetail method annotation return steps toarray new candidatestep steps size private candidatestep creategivendetail final method method givendetail annotation return new candidatestep annotation value annotation priority steptype given method instance new steppatternbuilder override public string extractgroupnames string string list string names new arraylist string for annotation annotations method getparameterannotations for annotation annotation annotations if annotation instanceof named names add named annotation value return names toarray new string names size override public pattern buildpattern string matchthis string groups extractgroupnames string pattern matchthis replaceall s for string group groups pattern s s group replaceall s s s return pattern compile pattern configuration getparameterconverters configuration getstartingwordsbytype override public list step runafterscenario return delegate runafterscenario override public list step runafterstory boolean embeddedstory return delegate runafterstory embeddedstory override public list step runbeforescenario return delegate runbeforescenario override public list step runbeforestory boolean embeddedstory return delegate runbeforestory embeddedstory code ,Improvement
should be able to use jbehave without inheriting from a base class currently a jbehave test scenario require inheriting from the base scenario class certain other test frameworks may also require inheritance but multiple inheritance is not allowed in java for this reason configuration of a delegate scenario may be preferred i created a blog entry with the necessary code to accomplish this ,New Feature
allow class loader injection to be optional in scenario classes when running in command line allow the injection of classloader parameter to be optional when run via ant or maven by default it is expected to be injected as required by scenarios to load i n keywords from resource bundles but in many cases the injected class loader may be not required ,Improvement
using givenscenarios causes failed tests to be forgotten we have multiple related scenarios within the same jbehave script this seems to be supported functionality but a major issue came to light earlier using givenscenarios at the start of a later scenario will cause any failed scenarios thus far to be forgotten for example story test showing that using a given scenario skews the overall result scenario fail givenscenarios com example sandpit jbehave noop given i do nothing then i fail scenario succeed givenscenarios com example sandpit jbehave noop given i do nothing then i pass the junit result for running a scenario with the above script is a pass even though the i fail step threw an exception if you remove the givenscenarios line from the succeed case then the junit result is a fail attached is an eclipse project that demonstrates this this is a major issue for us we run the jbehave tests from our build farm in an automated process this bug would give us the green light for the whole build despite tests failing ,Bug
stringlistconverter converts an empty string to a element list instead of an empty list given a textual step code then string is '' code the following test will fail code then string is ' params ' public void empty list string params ensurethat params isempty equalto true code a more likely scenario would be a table example code scenario guess marks as mark given the secret r g y b when i guess guess then i should get mark examples guess mark c c c c b c c c m code where the first row would fail if mark were compared to an empty list ,Bug
improve terminology the distinction between a story and a scenario i think it 's unfortunate that a scenario file contains several other scenarios this leads to some ambiguities in the system such as the meaning of a givenscenario and also in communication is a scenario a collection or a scenario it also is somewhat a violation of the literal meaning of scenario which by definition contains other stories or scenes not scenarios i think while the framework is still relatively young it would be worth addressing this design choice perhaps a scenario should contain stories or something like that the main concern is removing the ambiguity about what a scenario is ,Improvement
add beforestory and afterstory annotations in candidate steps as requested on user list there are usecases when setup tear down steps are required at story level i e for multiple scenarios and not at single scenario level dealt by beforescenario afterscenario annotations equivalent story level annotations beforestory afterstory would address these usecases ,New Feature
regex overflow in using examples table it 's the old windows regex issue that raises its head once more this time in the examples tables it seems to be related to the number of rows and how similar they are amongst each other it also seems to be sensitive to the content of the first couple of columns i e if the first and or second column content differ the problem does not always manifest itself solutions either refactor regex parsing to not use patterns such as x y or provide an alternative implementation or parser based on a pluggable regex impl different from the jdk ,Bug
allow non html file reports to be rendered undecorated with syntax highlighter when rendering non html reports allow option to leave content undecorated by syntax highlighter ,Improvement
add parameterconverter for examplestable to facilitate parsing of table parameters with tabular structure it 's useful to have a parameter converter that takes multi line input and converts it to a examplestable this then allows users to match step such as given the traders name rank larry stooge moe stooge curly stooge using a method with examplestable parameter given the traders traderstable public void thetraders examplestable traderstable use traders table to extract required data ,Improvement
maven runner documentation has incorrect capitalization should be camel case the described configuration is incorrect the various tags need to be camel cased to work e g scenarioincludes instead of scenarioincludes ,Bug
merge story steps configuration story and steps configuration should be merged maintaining what worked well and removing what did not criterias for refactor elements of the configuration should always have default values and should be overridable singularly after instantiation immutability of configuration can be obtained by decorating a configuration and disabling the use methods immutableconfiguration decorator should throw an exception when use method invoked default mostusefulconfiguration should always be available to runners and should not be required as parameters in super invocations ,New Feature
candidate step does not match and steps the candidatestep needs to handle and steps as well as the its corresponding step type to match steps correctly ,Bug
clarify the scenario reporters example and api the example for configuration of ' scenario reporters ' on is not clear the code appear to be outdated and i am not able to use it other point is it really necessary use different classes just to save my reports to a txt file it 's a common task and it will help a lot if it was more simple the classes on examples are scenarionameresolver underscoredcamelcaseresolver propertybasedconfiguration scenariodefiner classpathscenariodefiner patternscenarioparser scenarioreporter scenarioreporterbuilder fileprintstreamfactory i really want to use jbehave but the factory definer builder hell is really boring ,Improvement
improve springstepsfactory to allow delegating the candidatestep creation to other factories change the springstepsfactory so it does n't create candidatesteps but rather return bean instances that way i can have a different way of instanciating candidatesteps code addsteps new parameterconverterstepsfactory createcandidatesteps new springstepsfactory context createstepsinstances code and the simplified springstepsfactory code public class springstepsfactory private final listablebeanfactory parent public springstepsfactory listablebeanfactory parent this parent parent public object createstepsinstances list object steps new arraylist object for string name parent getbeandefinitionnames object bean parent getbean name if containsscenarioannotations bean getclass steps add bean return steps toarray new object steps size private boolean containsscenarioannotations class componentclass for method method componentclass getmethods for annotation annotation method getannotations if annotation annotationtype getname startswith org jbehave scenario annotations return true return false code ,Improvement
stack overflow when parsing a scenario with a very long step a stackoverflowerror occurs when the patternscenarioparser parses a very long step in a scenario this happened to us when writing a given step that included a long table parameter this seems to be caused by the well known regex bug in java the patterntopulloutsteps method specifies a pattern that contains an alternative wrapped in a star specifically s we were able to use the same strategy as that used to fix jbehave note about the included patch the test we 've added to patternscenarioparserbehaviour shouldparsestorywithverylongstep can sometimes pass incorrectly depending on the order in which the tests from that class are run if shouldparselongstorywithkeywordsplitscenarios runs first our test passes even without the fix applied we were n't sure what to do about this but on our machine the tests reliably ran in the order in which they were defined so we just kept that higher up in the file possibly there are deeper issues to consider here moss collum and jim olsen,Bug
allow embedder to generate stories view after running them moving stories view generation concern to the embedder would allow the view to be generated after the stories are run each with their single story report generation we can then avoid the phase process currently in x and have it all performed in a single execution via maven or ant the embedder is also aware of the configuration used to generate the reports so we can reduce need risk of configuration mismatch the view generation should be on by default but with ability to disable via a runtime flag ,Improvement
embedder should be responsible for all configurable aspects of story running in x responsibilities are split between the storyrunner and the ant task maven plugin e g the ability to skip some stories or ignore failure is configured at ant maven level an embedder should instead be responsible for running stories in the same way whatever environment it is embedded in ide cli web the ant maven layer should become wafer thin only responsible for collecting the stories to be run delegating to the embedder ,Improvement
steps methods as parameter converters when annotated by asparameterconverter better starting with an example code given a series name series nav given an investor peter when peter invests shares in series series then code it would be interesting to have the steps definition class also able to provide some converters this is what the code could look like code asparameterconverter public person findbyfirstname string firstname return persondao findbyfirstname firstname when person invests nbshares shares in series series public void invest person person int nbshares series series code i 've attached the parameterconverterstepsfactory as it 's getting bigger ,Improvement
patternscenarioparser should depend on keywords and not configuration patternscenarioparser should depend only on the dependency it strictly requires keywords rather than the whole of the configuration the constructor patternscenarioparser configuration should be deprecated but kept for backward compatibility ,Improvement
adopt builder syntax for story stepsconfiguration as proposed by paul a builder style syntax for configuration objects make for much easier reading ,Improvement
givenscenarios comma separated paths should support newlines between paths in parsing givenscenarios csv of paths csv should support newlines between paths e g givenscenarios very long path another long path currently the presence of newlines will prevent the parsing of the csv ,Improvement
replace named variable annotation by pattern matching of variable names used in step annotation if the named annotation was deprecated and the variable patterns were matched to the steps argument list instead jbehave would be much more usable the named parameter annotations are in essence redundant and they limit usability of jbehave for reasons the parameter names could be parsed directly from the step scenario instead and i wish they were i and my testers have frequently run into the problem of the arguments being in the wrong order an innocent looking step like code given a book book written by author alias author 's book book public void setbookandauthor named author string author named book string book code can lead to great confusion with the arguments getting switched using the step in an example scenario can increase the confusion as can legally write code given a book author written by book code testers and developers alike are also confused that while given a book moby dick written by herman melville works given title written by person does n't see next point they inhibit reusing steps in example scenarios either that or they lead to redundant columns an example to illustrate this given code given a stock named stock public void createstock named stock string stock code i can not reuse this step for colums in an example code scenario client creates stocks given a stock named a and a stock named b examples a b goog aapl code ,Improvement
add narrative elements to story parsing the current domain model captures everything before the first scenario as unstructured text hence the name blurb in the domain module hence not an issue in a plain text report newlines are maintained but becomes less readable in say html we should add an optional narrative element with appropriate keywords so as to be able to distinguish between the various elements of the narrative in order to as a i want to ,New Feature
is there a way to sync scenarios with classes if a scenario gets reworded the wording of the steps class also needs to change is there a way to get eclipse to pick up these changes as refactorings i 'm new to jbehave so this may be a rubbish idea perhaps bas never decide to reword their scenarios or this feature is already available or scenario writers do n't use eclipse ,New Feature
add rename examples events in scenarioreporter as highlighted by the html reporting the examples events reported by the scenarioreporter should become examplestable examplestable beforeexamples examplestable examplestablerow map string string example map string string afterexamples new event renamed events have been deprecated and functionally delegate to new events ,Improvement
abstract scenarios should not be executed automatically exclude scenario classes that are abstract ,Improvement
step parameters should be converted just before the step executes not when the scenario is parsed i should be able to use a paramaterconverter to retrieve an entity from the database e g given an employee called bob when i give bob a pay rise of pounds then bob forgets about his embarrassing law suit code title employeesteps java borderstyle solid given an employee called name public void createemployee string name new employeebuilder name name buildandsave when i give employee a pay rise of amount pounds public void givepayrise employee employee integer amount employee increasesalary amount code code title employeeconverter java borderstyle solid public class employeeconverter implements paramterconverter employeerepository repo public object convertvalue string value type type return repo findbyfirstname value code the parameter converter would be simple to implement but currently wo n't work without shenanigans because the step arguments are converted when the step is created and all the steps in a scenario are created up front before any of them are executed this means that at the time the parameter converter attempts to retrieve the entity from the database it has n't been created to get around the problem i 've created a lazycandidatestep class which only creates the step in the perform or donotperform methods this is n't ideals however because i also have to override steps createcandidatestep i 've attached my workaround as an example ,Improvement
ability to have comments in scenarios ability to have comments in scenarios not before between sceneario steps ,Improvement
allow for multiple aliases for a given step i 've got a machine which outputs messages i 've found different ways of expressing that in steps then the machine should tell me that message then the machine should tell me to message then the machine should say message i 'd like to be able to put more than alias on a step aliases ,New Feature
scenario runner should report before and after story only once when running given scenarios when running a scenario with given scenarios i e when running scenarios embedded in another scenario the scenario runner should only report event beforestory afterstory once ,Improvement
classloader aware spring applicationcontext factory spring 's classpathxmlapplicationcontext does not allow the specification of a classloader to specify the classloader can use a genericapplicationcontext with a resourceloader that is classloader aware ,Improvement
separate step pattern parsing from the matching the steppatternbuilder should become a steppatternparser which produces a stepmatcher which is turn reponsible for the matching of steps be it regex based or otherwise ,Improvement
allow lazy parameter convertion right now the converters are called before running the scenario which prevents using stateful converters the parametrised step with the parameter conversion should be created lazily upon invocation of the step perform method ,Improvement
step failure exception being thrown in printstream reporters prevents the delegating reporter from completing printstream reporters should not throw any exception upon step failures since they prevent the delegating reporter from completing the list of all delegate reporters this may manifest itself as the stats not be being written in general reporters should not throw any exceptions as the the failures are handled by the errorstrategy if does want reporters to throw exceptions on failure may decorate the reporter with the stepfailurescenarioreporterdecorator ,Bug
report embedded status in before after story events pass embeddedstory boolean flag to before afterstory method in scenarioreporter the implementors of the reporter would then decide how to use the status flag methods without status flag are deprecated ,Improvement
allow configuration to be overridden currently to configure a scenario you need to implement an interface and it ties configuration to the scenario author from what i can see the only way to externally override configuration would be to use aop this is n't a very standard way of doing configuration it should use public getter and setter methods so the configuration can be overridden or extended to for instance add in a scenario reporter ideally i should be able to write a sonar plug in for jbehave that can run existing scenarios and capture their output for presentation within sonar to make this work for everyone out of the box i should n't need to resort to using aop or to requiring special per scenario configuration by people who want to get nice reporting in sonar ,Improvement
add method and steps instance information to matching events in stepsmonitor in order to help identify in which steps class a matched method is contained as a developer i want to have method and steps instance information available,Improvement
allow steps dependencies to be composable via guice add guice support module equivalent to pico 's see jbehave ,New Feature
ensure consistency of encoding in order to allow reliable and consistent support for non english languages a consistent encoding needs to be used utf encoding should be mandated for java source and textual story files iso with unicode escaped characters for locale resource bundles the requirements need to be clearly documented with links to tools that allow conversion of native to ascii based unicode tools that can allow users to easily and efficiently specify keywords in their locales a standard set of locales can then be supported and bundled as core resources so that users need only specify new localizedkeywords my locale we may at a later state a further layer of conversion using some of these tools ,Improvement
moved configuration and runner classes to separate packages leave only main core entry point classes at top level package ,Improvement
double nan should be parseable into a double nan used as an error condition in mathematical algorithms should be supported as a double currently nan does not work it throws a parseexception ,Bug
improve documentation on scenario and step configuration provide snippets of configuration code to show how to change only selected elements from the defaults e g how to configure the use of a specific stepsmonitor ,Improvement
xml scenario reporter a scenario reporter that outputs in xml format for machine readable purposes ,New Feature
make column separator configurable in examplestable when trying to read from external sources like a wiki some characters like may be reserved and we need to allow for use of others the parser should allow configuration of other column separators when parsing tables ,Improvement
starting words are not updated when keywords are overridden in steps configuration as posted by cristiano gavi o on list when the steps configuration keywords are overridden post creation the starting words are not updated ,Bug
statistics scenarioreporter a scenario reporter that collects statistics which can be displayed on the reports index page ,New Feature
scenarioreporterbuilder a scenario reporter builder that allows easy instantiation of a delegating scenario reporter for multiple formats e g code new scenarioreporterbuilder new fileprintstreamfactory scenarioclass converter with console with txt with html with xml build code it should provide a default reporter instance for all formats but allow for configurability for each format it should build by default with stats format as this is used by the reporter renderer index but allow for default formats to be changed it should allow for the specification of the report file directory from the default jbehave reports ,New Feature
report renderer should be failure aware if a user wants to run through all scenarios stories and generate a collective view of failure pending success the runner needs to be configured to ignore failure the report rendering should be failure aware so that after rendering the build can fail if any failures occurred the ant and maven entry points should also allow to skip the rendering via a configurable flag ,Improvement
classloader not injected by default when running stories via cli in ant and maven plugin set default value of classloaderinjected false by default the refactors in the story configuration have made class loader injection redundant for most use cases ,Improvement
provide better exception handling when maven ant fails with classloader injected when maven ant execution of a scenario with injected classloader provide better communication of what is happening ,Improvement
create standard human and machine readable reports when you execute jbehave from maven a report or set of reports should be written to a sub directory of the standard maven target directory or target site directory set of reports should be human readable for instance html another set of reports should be machine readable for instance xml both reports should include the same summary and count information about the number of scenarios and steps executed failed pending successful and not executed both reports should contains per scenario and per step content and outcomes this will greatly aid in the creation of plug ins that execute jbehave in ci systems and reporting systems such as hudson bamboo and sonar ,Improvement
allow annotation based configuration annotations based configuration can be preferable to some users investigate and implement annotation based alternatives to programmatic configuration which should always be possible ,New Feature
exclude scm patterns from scenarioclassnamefinder automatically exclude svn and other scm directories from the directory scan ,Improvement
selenium under jbehave control needs to be able to be instansiable at story as well as scenario level fixed in cl seleniumsteps is deprecated seleniumstorysteps and seleniumscenariosteps are new,Improvement
problems with jbehave maven and windows i am attempting to use the maven plugin for jbehave with the project that i have attached after some help from mauro on the users mailing list i am left with the following when i run ' mvn integration test ' c workspace proview mvn integration test info scanning for projects info info building maven quick start archetype info task segment integration test info info resources resources execution default resources info using encoding ' utf ' to copy filtered resources downloading info unable to find resource ' org lunivore tyburn pom ' in repository codehaus downloading info unable to find resource ' org lunivore tyburn pom ' in repository central info compiler compile execution default compile info nothing to compile all classes are up to date info resources testresources execution default testresources info using encoding ' utf ' to copy filtered resources info compiler testcompile execution default testcompile info nothing to compile all classes are up to date info surefire test execution default test info surefire report directory c workspace proview target surefire reports t e s t s running com electrostandards prod apptest tests run failures errors skipped time elapsed sec running com electrostandards prod proviewtest tests run failures errors skipped time elapsed sec results tests run failures errors skipped info jar jar execution default jar info building jar c workspace proview target proview snapshot jar info jbehave run scenarios execution run scenarios found info running scenario com electrostandards prod scenarios proviewstartsinofflinemode warning failure in running scenario com electrostandards prod scenarios proviewstartsinofflinemode org jbehave scenario errors scenarionotfoundexception path ' com electrostandards prod scenarios proview starts in offline mode scenario ' could not be found by classloader org jbehave scenario scenarioclassloader urls c workspace proview target test classes c workspace proview target classes junit dep jar hamcrest core jar freemarker jar jbehave core jar commons lang jar commons collections jar commons io jar swing worker jar filters jar swingx jar tyburn jar at org jbehave scenario parser classpathscenariodefiner loadinputstreamfor classpathscenariodefiner java at org jbehave scenario parser classpathscenariodefiner loadscenariodefinitionsfor classpathscenariodefiner java at org jbehave scenario scenariorunner run scenariorunner java at org jbehave scenario abstractscenario runscenario abstractscenario java at org jbehave scenario junitscenario runscenario junitscenario java at org jbehave mojo scenariorunnermojo execute scenariorunnermojo java at org apache maven plugin defaultpluginmanager executemojo defaultpluginmanager java at org apache maven lifecycle defaultlifecycleexecutor executegoals defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalwithlifecycle defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoal defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalandhandlefailures defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executetasksegments defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor execute defaultlifecycleexecutor java at org apache maven defaultmaven doexecute defaultmaven java at org apache maven defaultmaven execute defaultmaven java at org apache maven cli mavencli main mavencli java at org apache maven cli compat compatiblemain main compatiblemain java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org codehaus classworlds launcher launchenhanced launcher java at org codehaus classworlds launcher launch launcher java at org codehaus classworlds launcher mainwithexitcode launcher java at org codehaus classworlds launcher main launcher java info running scenario com electrostandards prod scenarios userconnectstotarget warning failure in running scenario com electrostandards prod scenarios userconnectstotarget org jbehave scenario errors scenarionotfoundexception path ' com electrostandards prod scenarios user connects to target scenario ' could not be found by classlo ader org jbehave scenario scenarioclassloader urls c workspace proview target test classes c workspace proview target classes junit dep jar hamcrest core jar freemarker jar jbehave core jar commons lang jar commons collections jar commons io jar swing worker jar filters jar swingx jar tyburn jar at org jbehave scenario parser classpathscenariodefiner loadinputstreamfor classpathscenariodefiner java at org jbehave scenario parser classpathscenariodefiner loadscenariodefinitionsfor classpathscenariodefiner java at org jbehave scenario scenariorunner run scenariorunner java at org jbehave scenario abstractscenario runscenario abstractscenario java at org jbehave scenario junitscenario runscenario junitscenario java at org jbehave mojo scenariorunnermojo execute scenariorunnermojo java at org apache maven plugin defaultpluginmanager executemojo defaultpluginmanager java at org apache maven lifecycle defaultlifecycleexecutor executegoals defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalwithlifecycle defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoal defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalandhandlefailures defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executetasksegments defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor execute defaultlifecycleexecutor java at org apache maven defaultmaven doexecute defaultmaven java at org apache maven defaultmaven execute defaultmaven java at org apache maven cli mavencli main mavencli java at org apache maven cli compat compatiblemain main compatiblemain java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org codehaus classworlds launcher launchenhanced launcher java at org codehaus classworlds launcher launch launcher java at org codehaus classworlds launcher mainwithexitcode launcher java at org codehaus classworlds launcher main launcher java info running scenario com electrostandards prod scenarios userselectscommunicationsport warning failure in running scenario com electrostandards prod scenarios userselectscommunicationsport org jbehave scenario errors scenarionotfoundexception path ' com electrostandards prod scenarios user selects communications port scenario ' could not be found by classloader org jbehave scenario scenarioclassloader urls c workspace proview target test classes c workspace proview target classes junit dep jar hamcrest core jar freemarker jar jbehave core jar commons lang jar commons collections jar commons io jar swing worker jar filters jar swingx jar tyburn jar at org jbehave scenario parser classpathscenariodefiner loadinputstreamfor classpathscenariodefiner java at org jbehave scenario parser classpathscenariodefiner loadscenariodefinitionsfor classpathscenariodefiner java at org jbehave scenario scenariorunner run scenariorunner java at org jbehave scenario abstractscenario runscenario abstractscenario java at org jbehave scenario junitscenario runscenario junitscenario java at org jbehave mojo scenariorunnermojo execute scenariorunnermojo java at org apache maven plugin defaultpluginmanager executemojo defaultpluginmanager java at org apache maven lifecycle defaultlifecycleexecutor executegoals defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalwithlifecycle defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoal defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executegoalandhandlefailures defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor executetasksegments defaultlifecycleexecutor java at org apache maven lifecycle defaultlifecycleexecutor execute defaultlifecycleexecutor java at org apache maven defaultmaven doexecute defaultmaven java at org apache maven defaultmaven execute defaultmaven java at org apache maven cli mavencli main mavencli java at org apache maven cli compat compatiblemain main compatiblemain java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org codehaus classworlds launcher launchenhanced launcher java at org codehaus classworlds launcher launch launcher java at org codehaus classworlds launcher mainwithexitcode launcher java at org codehaus classworlds launcher main launcher java info jbehave render reports execution render reports info rendering reports in ' c workspace proview target jbehave reports ' using formats ' txt html xml ' and template properties ' rendereddirectory rendered defaultformats stats ' info rendered reports with scenarios of which failed info info build successful info info total time seconds info finished at fri jun edt info final memory m m i ca n't seem to figure out why jbehave maven ca n't find the classes they appear to be sitting exactly where jbehave maven is looking mauro seems to think it may have to do with windows but i am not sure at this point thank you joe,Bug
composed steps do n't behave like steps in a story when using parameters problem statement when i use a composite step that calls another step which takes parameters the correct step is rejected because it does n't match the patternstring steps to recreate create a step and method that take a parameter ex when i click the button button public void clickbutton string button create a composite step that references step ex when i login composite steps i click the login button actual results the second step will give you a pending method that matches step but they do n't match because of the paramter suggested change found this while debugging in the stepcandidate class on line if stringutils startswith composedstep candidate getstartingword stringutils endswith composedstep candidate getpatternasstring return candidate could be changed to if stringutils startswith composedstep candidate getstartingword stringutils endswith composedstep candidate getpatternasstring candidate matches composedstep return candidate junit test test public void shouldmatchcompositstepswhenstepparamterisprovided compositestepparamtermatching steps new compositestepparamtermatching list stepcandidate candidates steps listcandidates stepcandidate candidate candidates get assertthat candidate iscomposite is true map string string nonamedparameters new hashmap string string list step composedsteps new arraylist step candidate addcomposedsteps composedsteps when i login nonamedparameters candidates assertthat composedsteps size equalto for step step composedsteps step perform null assertthat steps button equalto login static class compositestepparamtermatching extends steps private string button when i login composite steps i click the login button public void whenilogin when i click the button button public void wheniclickthebutton named button string button this button button ,Bug
 retry annotation internetexplorer webdriver is a pretty flaky target for jbehave web if we had a retry upto n times annotation then we might be able to flakiness it seems to use the the step is the canonical place to express a retry if the retry works the previous failures are consumed and not reported instead its reflected in the stats for the job story scenario ,New Feature
make parametrised name delimiters configurable currently parametrised names are conventionally delimited by angle brackets and the matching mechanism does not depend on them by the output step decoration that identifies and highlights parameter values in stepcreator does the parameter name delimeters should be abstracted into a parametercontrols configuration element ,Improvement
when using perscenariowebdriversteps java and givenstories then occurs delegatewebdrivernotfound exception when i use as life cycle steps perscenariowebdriversteps and try to execute scenario which has givenstories section then occurs delegatewebdrivernotfound what happens during executions firefox blank window is opened for top level scenario another firefox windows is opened and executes scenario from givenstories section then this window is closed exceptions occurs how to reproduce checkout examples etsy selenium java spring updated etsy selenium java spring src main resources etsy steps xml with file provided in attachment add stories provided in attachment run stories with mvn clean install dmeta filter givenstories expected each scenario successfully executed in new firefox window actual failing top level scenario console output given i am on etsy com failed org jbehave web selenium delegatingwebdriverprovider delegatewebdrivernotfound webdriver has not been found for this thread please verify you are using the correct webdriverprovider with the appropriate credentials if using remote access e g to saucelabs dsauce username xxxxxx dsauce access key xxx xxxx xxxx xxxx xxx when i want to browse through a treasury gallery not performed when i want to buy something from etsy com not performed when i want to browse the treasury not performed when i choose the first treasury gallery not performed we do n't care for the results just the gallery then results will be displayed in the gallery not performed org jbehave web selenium perscenariowebdriversteps afterscenario failed org jbehave core failures beforeorafterfailed method afterscenario annotated with afterscenario in class org jbehave web selenium perscenariowebdriversteps failed java lang nullpointerexception org jbehave core failures beforeorafterfailed method afterscenario annotated with afterscenario in class org jbehave web selenium perscenariowebdriversteps failed java lang nullpointerexception at org jbehave core steps stepcreator beforeorafterstep perform stepcreator java at org jbehave core steps stepcreator beforeorafterstep donotperform stepcreator java at org jbehave core embedder storyrunner somethinghappened run storyrunner java warning failed to run story etsy browse with givenstories story org jbehave web selenium delegatingwebdriverprovider delegatewebdrivernotfound webdriver has not been found for this thread please verify you are using the correct webdriverprovider with the appropriate credentials if using remote access e g to saucelabs dsauce username xxxxxx dsauce access key xxx xxxx xxxx xxxx xxx at org jbehave web selenium delegatingwebdriverprovider get delegatingwebdriverprovider java at org jbehave web selenium webdriverpage get webdriverpage java at org jbehave tutorials etsy pages home go home java at org jbehave tutorials etsy steps etsydotcomsteps homepageonetsydotcom etsydotcomsteps java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org jbehave core steps stepcreator parameterisedstep perform stepcreator java at org jbehave core embedder storyrunner finesofar run storyrunner java at org jbehave core embedder storyrunner runstepswhilekeepingstate storyrunner java at org jbehave core embedder storyrunner runscenariosteps storyrunner java at org jbehave core embedder storyrunner runcancellable storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storyrunner run storyrunner java at org jbehave core embedder storymanager enqueuedstory call storymanager java at org jbehave core embedder storymanager enqueuedstory call storymanager java at java util concurrent futuretask sync innerrun futuretask java at java util concurrent futuretask run futuretask java at com google common util concurrent moreexecutors samethreadexecutorservice execute moreexecutors java at com google common util concurrent abstractlisteningexecutorservice submit abstractlisteningexecutorservice java at com google common util concurrent abstractlisteningexecutorservice submit abstractlisteningexecutorservice java at org jbehave core embedder storymanager submit storymanager java at org jbehave core embedder storymanager runningstory storymanager java at org jbehave core embedder storymanager filterrunning storymanager java at org jbehave core embedder storymanager runningstoriesaspaths storymanager java at org jbehave core embedder storymanager runstories storymanager java at org jbehave core embedder embedder runstoriesaspaths embedder java at org jbehave core junit junitstories run junitstories java at org jbehave core embedder embedder runasembeddables embedder java at org jbehave mojo runstoriesasembeddables execute runstoriesasembeddables java at org apache maven plugin defaultbuildpluginmanager executemojo defaultbuildpluginmanager java at org apache maven lifecycle internal mojoexecutor execute mojoexecutor java at org apache maven lifecycle internal mojoexecutor execute mojoexecutor java at org apache maven lifecycle internal mojoexecutor execute mojoexecutor java at org apache maven lifecycle internal lifecyclemodulebuilder buildproject lifecyclemodulebuilder java at org apache maven lifecycle internal lifecyclemodulebuilder buildproject lifecyclemodulebuilder java at org apache maven lifecycle internal lifecyclestarter singlethreadedbuild lifecyclestarter java at org apache maven lifecycle internal lifecyclestarter execute lifecyclestarter java at org apache maven defaultmaven doexecute defaultmaven java at org apache maven defaultmaven execute defaultmaven java at org apache maven cli mavencli execute mavencli java at org apache maven cli mavencli domain mavencli java at org apache maven cli mavencli main mavencli java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org codehaus plexus classworlds launcher launcher launchenhanced launcher java at org codehaus plexus classworlds launcher launcher launch launcher java at org codehaus plexus classworlds launcher launcher mainwithexitcode launcher java at org codehaus plexus classworlds additional info double execution of scenario included in givenstories is connected to jbehave ,Bug
jbehave web selenium fails with firefox selenium included in web fails to start firefox please update to this even affects the unit tests for jbehave web themselves,Bug
parser skips lines from story if keyword is separated from text without space char given aaa bbb ccc and tab tab ddd eee then fff line staring with and is skipped if there is no space character between and and ddd probable fix regexstoryparser java initialstartingwords s z followingstartingwords n initialstartingwords s s z followingstartingwords n ,Bug
minor change to function parsescenario in regexstoryparser problem statement when the regexstoryparser parses out a scenario it attempts to remove the title from the step to get the scenario without title but the function does n't account for scenario n before the title i do n't think this will affect anything and i do n't think anything was broken initally i just noticed as debugging that it did n't strip out the actual title because of the scenario keyword newline and space before it actual code regexstoryparser line string scenariowithouttitle removestart scenarioastext title recommended fix string scenariowithouttitle removestart scenarioastext keywords scenario n title where n can be replaced with whatever new line character is being used plus the space ,Improvement
meta filter on scenario level for ' story navigator ' there is a meta information filter in ' story navigator ' but it works only on story level while meta information is also available on single scenario level so it would be great to filter also by scenario meta information ,Improvement
add a storyreporter method before starting each individual example i would like to write a storyreporter that graphs the run time of each scenario in rrd e g run a use case after login and show how the reponse time varies over time this should work well with the beforescenario afterscenario methods if the scenarios are executed i e do not use an examples table if a scenario however uses an example table the individual before after events are not reported so the only way to do this is to count the success failure calls which looks kind of error prone to me can we add a beforeexamplescenario method to the storyreporter ,Improvement
dynamic selection of input data i am using examples to in put data for the jbehave scenarios eg examples stories test table i have test table and test table i need to select tset table or test table according to a condition how it can be possible in jbehave ,Improvement
check status of a previous jbehave scenario in jbehave how can we check whether the previous scenario was success ,Improvement
codelocationfrompath breaks for paths with spaces i discovered this in the guice examples but it 's not a problem limited to guice take this code that searches for stories new storyfinder findpaths codelocations codelocationfrompath resources getfile aslist story null if the resources folder resides in a base path that contains a space the storyfinder will fail to locate the stories this is because codelocationfrompath uses a java net url object under the hood to url encode the path converting spaces to thus jbehave will look here c jbehave folder with spaces resources for stories located here c jbehave folder with spaces resources this is also a problem for reports if relative paths are used in any form when jbehave converts them to full paths the paths are url encoded this in turn causes our hudson builds to fail because it can not locate the reports the workaround for this is to not use codelocations to locate stories and to use a hudson project with no spaces but jbehave really should support paths with spaces this occurs on both windows and linux ,Bug
jenkins and hudson plugins are almost identical pom name and package path are the only differences this could be merged the files for jbehave jenkins plugin and jbehave hudson plugin are identical except for the pom the name in a few places and the package path for the java files this could be merged into ci plugin project and then have jenkins and hudson as sub projects ,Improvement
examples table parser can be improved to allow a comment as the first line i tried to format a examples table in the following way however the examples table parser requires the table to start with the header it can not start with a comment to allow it i just did the following patch just consider changes in examplestable and examplestablebehaviour ,Improvement
junit test per example in parametrized tests using annotatedpathrunner springannotatedpathrunner allow to get junit test per story which is much more friendly than big run test it would useful to get reporting per example in parametrized tests something looking like in junitparams on attached screenshot btw junitparams which allows to create parametrized tests in junit uses custom runner which source code could be useful to review junit related part of the implementation of that feature ,Improvement
decorated txt reports get broken if the text contains script script tags when text reports contains script tags the closing script to be exact the decorator breaks since the browser parses the script tags before the cdata xml tag e g if you have a step like quote when i enter script test script then something else quote the resulting txt html file looks like this quote script type syntaxhighlighter class brush text cdata when i enter script test script then something else script quote the browser will stop parsing the script tag at the first script the fix changes the cdata tag to html encoding if the text contains script in all other cases wrapping the text in cdata is correct ,Bug
templateableoutput does not handle properly parametrised scenarios the output scenario context is reset at every execution of a parametrised scenario leading to the same scenario being repeated ,Bug
better integration into junit problem statement as has been stated in miscellaneous other issues it would be nice to have better integration into junit by jbehave recommended code change add variables to the mostusefulconfiguration to hold runnotifier and the other to hold the testdescriptions increase the junit description depth by parsing out the scenarios and steps when creating the story descriptions in annotatedpathrunner add a storyreporter that reports to the runnotifier using the provided storydescription ,Improvement
named parameters sorrounded by quotes are not handled properly wnen using jbehave with named parameters order is not respected in parameter injection if the named parameters are sorrounded with non white characters for example quotes here is a simple test code public class quotenamedparametersstory extends junitstory public static class quotnamedparameterssteps then foo then bar public void otherorderquotes named bar string bar named foo string foo assertthat foo equalto foo assertthat bar equalto bar override public configuration configuration return new mostusefulconfiguration usestoryreporterbuilder new storyreporterbuilder withformats format console withfailuretrace true override public list candidatesteps candidatesteps return new instancestepsfactory configuration new quotnamedparameterssteps createcandidatesteps code and the corresponding quote named parameters story story noformat scenario quotes on named parameters are problematic then foo then bar noformat i was able to fix it and pass the above test successfully by changing org jbehave core parsers regexprefixcapturingpatternparser parameter to code private class parameter private final int start private final int end private final string whitespaceifany private final string name public parameter string pattern int start int end string whitespaceifany this start start this end end this whitespaceifany whitespaceifany this name pattern substring start prefix length end whitespaceifany length trim code ,Bug
when named parameter matches name in example table it might be injected for steps that do not reference it when a step with named parameters is used in a scenario that uses an example table for some of its steps but for this specific step is given some explicit value then if the parameter name is not fully surrounded with whitespace and it matches a name from the examples table then the given value is ignored instead the value from the examples table is injected if the parameter name is unrelated to anything in the examples table then all is fine even when the parameter is not fully surrounded with whitespace this is slightly related to for example all fine code given i have a and b public void givenaandb named a string mya named b string myb assertthat mya isequalto this assertthat myb isequalto that when i do a public void whenidoa named a string mya assertthat mya isequalto this then i see b public void theniseeb named b string myb assertthat myb isequalto that x not surrounded by all whitespace but x not known in examples table all fine when i did ' x ' public void whenididx named x string myx assertthat myx isequalto foo code but wrong code b not surrounded by all whitespace and b also known in examples table then i saw ' b ' public void thenisawb named b string myb will fail is assigned that from examples table instead assertthat myb isequalto bar code when used with code given i have a and b when i did ' foo ' and i do a then i see b and i saw ' bar ' examples a b this that code ,Bug
add an optional storyfinder class element to usingpaths annotation currently usingpaths is using fixed instance of storyfinder class in order to use a custom storyfinder class with the annotation i would like to include an optional storyfinder element in the usingpaths annotation ,Improvement
add maven web archetypes add archetypes using jbehave web selenium ,New Feature
 named annotation does n't work in scenario when examples table and metainfo is used please take a look at below scenario meta supported type a b c given message with supported type when received with field field then message is stored examples field action named annotation does n't work when i want to inject supported type and also ' field ' example value for this scenario i guess problem is in storyrunner class lines memthod addmetaparameters is not called when scenario is parametrized can we invoke this method also for parametrized scenarios ,Bug
crossreference not creating givenstories hierarchy in xref json problem the reportbuilder does n't create html pages for givenstories crossreference xref json file only output the information of the givenstory and not the main story it only happens when having givenstories within a story file and crossreference without givenstories it shows correctly for example story file test story scenario test givenstories another test story then check something in cofiguration class i have crossreference crossreference new crossreference withjsononly withoutputaftereachstory true excludingstorieswithnoexecutedscenarios true contextview contextview new localframecontextview sized seleniumcontext seleniumcontext new seleniumcontext seleniumstepmonitor stepmonitor new seleniumstepmonitor contextview seleniumcontext crossreference getstepmonitor format formats new format new seleniumcontextoutput seleniumcontext console web driver html storyreporterbuilder reporterbuilder new storyreporterbuilder withcodelocation codelocations codelocationfromclass embeddableclass withfailuretrace false withfailuretracecompression true withdefaultformats withformats formats withcrossreference crossreference override public configuration configuration return new seleniumconfiguration useseleniumcontext seleniumcontext usewebdriverprovider driverprovider usefailurestrategy new failinguponpendingstep usestorycontrols new storycontrols dodryrun false doskipscenariosafterfailure false usestepmonitor stepmonitor usestoryloader new loadfromclasspath embeddableclass getclassloader usepathcalculator new relativepathcalculator usestoryreporterbuilder reporterbuilder target jbehave view it does n't create a path to another story html page for the givenstory another story story afterstories html afterstories stats html beforestories html index html beforestories stats html path to test html path to test stats html navigator html reports html xref json inside xref json it has the information only of the given story another test story it means that story navigator only show the givenstory also as the given story does n't have an html page it shows the broken link xref whenmade createdby jbehave metafilter meta project basicui stories description narrative in order to test planmill instance excerpt u aas a user u ai want to login with my credentials u a name bdd login to planmill instance story path path to another test story html path to another test html meta project basicui u a scenarios scenario test passed true started duration ,Bug
web runner results leak between invocations take a story that passes noformat scenario given a threshold of when the stock is traded at then the alert status should be off when the stock is traded at then the alert status should be on noformat confirm it passes change it so that it does not pass in this case change to the re run note that it fails as expected change it back to the ' passing ' grammar again and re run note that it apparently fails any repeated clicking of the ' run ' button shows the failed results again and again ,Bug
add a beforestep method in the storyreporter there should be a beforestep method in the storyreporter to allow users to implement there own code before each step starts the existing successful failed etc behave like an afterstep method already ,Improvement
when i am executing mvn integration test my project get compiled and generates the specified directories in target folder but it does not launch my application through browser when i am executing mvn integration test my project get compiled and generates the specified directories successfully inside target folder but it does not launch my application through browser after coping the stories files inside respective classes folder even all get ran successfully through eclipse,Bug
allow meta filters to ignore stories listed in givenstories running tests with meta filtering exclude scenarios from givenstories if they do not matches meta filters it forces to put in dependent stories scenarios the same meta words as in top level scenario that causes double executions of those scenarios first time because they are in givenstories and second time because they march meta filter should be givenstories override meta filters actual meta filters override givenstories how to reproduce create story file with some scenario without any meta words create another story file with some scenario in givenstories add dependency to story file from add some meta filter run test with meta filtering expected executed scenario from story file and actual executed scenario from story file and skipped scenario from story file in attachment i have putted example story files put them in jbehahve example eatsy selenium java spring and run test with maven command mvn clean install dmeta filter givenstories ,Improvement
loadfromrelativefile break on windows when using maven traversal when invoking loadfromrelativefile and passing in a traversal substitution stories are not found because the substitution is not applied this is due to the difference in the storyfilepath which forces path separators to be ' ' when the loadfromrelativefile code gets the absolute path of location file separators are converted to ' ' this keeps the locationpath replace code from working i m invoking the code as public configuration configuration return new mostusefulconfiguration where to find the stories usestoryloader new loadfromrelativefile codelocations codelocationfromclass getclass loadfromrelativefile mavenmoduleteststoryfilepath src test resources jbehave usestoryreporterbuilder new storyreporterbuilder withdefaultformats withformats format console format txt the code that breaks in loadfromrelativefile that break is string locationpath new file codelocations getpathfromurl location getabsolutepath for storyfilepath traversal traversals string filepath locationpath replace traversal toremove traversal relativepath resourcepath locationpath would have all ' ' converted to ' ' by getabsolutepath on windows machines maybe the following line should be inserted after the definition of locationpath locationpath locationpath replace ,Bug
empty lines in example tables should be ignored i tried to improve the layout of an example table in story by adding newlines before each comment line to improve the legibility a bit however it turns out that an empty line in the table gives a list of empty parameters in the examples e g when you have parameters i think it would be better if empty lines are ignored unless i 'm missing something if that is ok i can write a patch ,Improvement
swedish language support swedish language file attached ,Improvement
documentation to configure maven plugin should be updated when introducing jbehave into our project i 've run into some challenges luckily most have been searchable and resolved we have to separate tests in pom xml and the docs does not say scope test scope in the plugin configuration which makes it harder to get started using jbehave for some projects we also need to be able to run without tests and use the standard maven flag dskiptests the maven plugin docs does not mention how to get this right but this worked for us ,Improvement
change of examplestablefactory constructor in patch release with jbehave the constructor public examplestablefactory keywords keywords resourceloader resourceloader parameterconverters parameterconverters was changed to public examplestablefactory keywords keywords resourceloader resourceloader parameterconverters parameterconverters tabletransformers tabletranformers when the tabletransformers feature was introduced this is a backwards incompatible change and should not have been included like that in a patch revision with only the last digit of the version number changed as it breaks existing code including mine when going up to the latest version i suggest adding back the original constructor with a sensible default behavior a pull request on github will be sent ,Bug
some unit tests fail on windows due to cr lf encoding when building jbehave core on windows unit tests fail because the files are compared with cr lf line endings this may depend on the git default setting for text files but the actual test results contain lf line endings only since the text is never written or read i ignored that until now with skiptests true i assume nobody else uses windows to build jbehave if you want i can fix the tests ,Bug
story reports not being published via hudson plugin when the jbehave xunit plugin kicks in after our stories have executed it fails to copy the reports with the following error quote xunit info starting to record xunit info processing jbehave x xunit info jbehave x test report file s were found with the pattern ' jbehave xml ' relative to ' c bin hudson hudson home jobs convergencepilotintegrationtests workspace ' for the testing framework ' jbehave x ' xunit error the result file ' c bin hudson hudson home jobs convergencepilotintegrationtests workspace convergenceplayermanagementintegrationtests target jbehave beforestories xml ' for the metric ' jbehave ' is empty the result file has been skipped xunit warning all test reports are empty xunit info check ' failed tests ' threshold xunit info check ' skipped tests ' threshold xunit info setting the build status to success xunit info stopping recording quote i have confirmed that all xml files are indeed generated see attached ,Bug
a tree based story runner that separates creation of performable steps from execution in x the storyrunner creates and executes the steps for each story and scenario while keeping state we want to separate the creation of performable steps from their execution and build a tree of performable objects the state should not be held any more as a member variable but in a shared run context the result of execution of the performable tree should be serialisable and consumable by any reporting ui layer independent of the storyreporters ,New Feature
empty lines in an example table are processed as tests i commented some lines from an example and inserted an empty line in between like this header header value value value value this causes an empty set of parameters to be processed after the active lines are processed i assume that the empty lines are processed as tests as well if i remove the empty line again the empty test run disappears ,Bug
spaces in path breaks storyfinder findpaths constructions like list string storypaths new storyfinder findpaths codelocationfromclass getclass story examples story or list string storypaths new storyfinder findpaths codelocationfrompath somepath story examples story does n't work when there are spaces in a path which are replaced to an issue similar to jbehave ,Bug
allow comments between scenarios in jbehave story files hi our story file contains aprox scenarios they are logically divided into groups we would like to have possibility to split those groups in story files using comments so after every scenarios we would like to add comments indicating that new section has begun i 've played little bit with jbehave regexstoryparser and all that need to be done is change of public story parsestory string storyastext string storypath method please see attached code snippet from overridedn regexstoryparser,Improvement
support spring annotationconfigapplicationcontext a patch for jbehave spring that allows for java annotation based spring configurations included are examples using annotations based configuration,Improvement
after updating jbehave to x failing test is shown as passing how to reproduce please open below maven project run clean install everything passes change jbehave spring version to run clean install test fails in point new version of jbehave is showing that failing test is passing even when there is explicit fail then c d and d failed java lang assertionerror expected is c got d another thing is issue with whitespaces when you remove mystepmatcherthatignoreswhitespaces from configuration then story will fail as well first issue is critical for us if we want to be up to date with jbehave second is also important to remove amount of our code thx,Bug
current path is converted to file home when accessing codelocationfromclass from inside a jar i have tried to build a complete jbehave test into a jar file by maven assembly and then to run the test on another machine that does n't have the dev system installed e g java cp lib org junit runner junitcore de vodafone jbehave rrd runner runner the reporter tries to create the files in a path that contains pwd file pwd lib jbehave view so i assume the path is converted from the jar location to an url which then is used as a regular path this does n't work on windows or creates a directory file in linux in linux it is possible to work around this by creating a symlink from to file i 'll try to attach an example project if i can narrow this down,Bug
parsing recursive composite steps fail if the composite steps do n't use any parameters problem statement when i have a composite step that takes parameters for some of the steps but not others then the stepcreator does n't take that into account and the matcher throws and illegalstate exception because it has no groups steps to reproduce see attached testcase recommended change only changes in the stepcreator class matchedparameters method move the hashmap creation to the beginning of the method and put an if statement around the stepmatcher find statement see altered method also attached ,Bug
 afterstories is run before all stories have finished to reproduce go to tutorial etsy spring for either ' stable ' profile or the main change core to beta run that note the existence of webdriver has not been found for this thread exception in the log and shortened run for either ' stable ' profile or the main change core to beta the release before run that note the exception in is not seen thus the bug regression was introduced between the the beta and beta releases of core note you will have to comment out some of lifecyclesteps java to do this experiment ,Bug
allow givenstories to be parametrised by examples in a scenario context h introduction jbehave supports parameterizing scenarios to allow repeating tests e g as shown in the documentation noformat given a stock of symbol and a threshold when the stock is traded at price then the alert status should be status examples symbol threshold price status stk off stk on noformat it would be desirable if this convention could be extended to be used in combination with a given story to demonstrate by means of an extension to the documentation example suppose there is a requirement to select a specific stock exchange before executing each of the tests above rather than building this into the story we might opt for reuse purposes to use a given story to first select the stock exchange now the first example would be ' nasdaq ' and the second ' ftse ' the hypothetical configuration might then be noformat givenstories acme givenstories selectastockexchange story given a stock of symbol and a threshold when the stock is traded at price then the alert status should be status examples stockexchange symbol threshold price status nasdaq stk off ftse stk on noformat h current behaviour unfortunately the example above will not work as desired the ' givenstory ' selectastockexchange story does not inherit the parameterized variables as night be expected nor does the obvious supporting feature anchor tags help because only a specific row number can be specified in the anchor tag e g noformat givenstories acme givenstories selectastockexchange story noformat h suggested behaviour the given story should be considered part of the be parametrised scenario context and inherit the parameters of the row currently being executed referencing previous response from mauro on the dev mail thread as i understand it you 'd like the givenstories to be considered as part of the parametrised scenario context and be passed the row of parameters that is being processed as part of a parametrised scenario i guess we could make that the default behaviour and any parameters passed to the given stories could be overridden by the execution of the given story ,Improvement
allow directives to support multiple step pattern variant to get more natural german story texts it would be very helpful if the steps listcandidates method could be amended this would allow for automatically generating slight variations of the texts without having to specify them all as aliases currently i am doing this then soll foo bar with xyz aliases values foo bar with xyz soll foo bar xyz foo bar xyz the word soll is made optional this way the reasoning behind this is that when using and it is more natural to write then soll something else and foo bar with xyz instead of then soll something else and soll foo bar with xyz it would be very nice to not have define aliases for all these variants because it makes the code harder to maintain instead i though i 'd add this dynamically the same way annotated aliases are but it seems this functionality would require providing a new subclass of org jbehave core steps steps which i can not see how to do i suggest a change like this in org jbehave core steps steps add another call in listcandidates after each of the addcandidatesfromaliases like addcustomderivedcandidates with the same signature and a protected empty default implementation allow configuration to specify a custom subclass of org jbehave core steps steps in there custom additions to the candidates list could be made like the i described ,New Feature
numberformat instance in parameterconverters numberconverter is not threadsafe i have submitted a pull request for jbehave core to make numberformat threadsafe ,Bug
allow non programmatic configuration of executorservice currently the executorservice can be specified programmatically via the embedder to allow a non programmatic configuration we can introduce an interface code public interface executorservicefactory executorservice create embeddercontrols controls code and provide multiple implementations e g fixedthreadexecutors and samethreadexecutors the implementation class must support a default constructor so it can be instantiated from its class name configured via maven or ant each implementation may require different parameters from the embeddercontrols ,Improvement
' story navigator ' does not show stories with no meta information on story level i have stories with no meta information on story level in other words some of my stories begins with just color blue meta color color blue narrative color unfortunately i do n't see those stories in ' story navigator ' even if ' meta ' filter is set to ' all ' i think that they should be visible there ,Bug
reportscount is counting files that are n't stories in the story count problem statement when running the jbehave tests the reportscount that is output to the junit console is counting non story reports example this is what the code currently returns org jbehave core embedder embedder runningstoriesfailed failures in running stories reportscount stories storiesnotallowed storiespending scenarios scenariosfailed scenariosnotallowed scenariospending stepsfailed proposed change change line of the templateviewgenerator to use a method that filters out reports that do n't have any scenarios current int stories reports size proposed int stories storycount private int storycount int storycount for report report reports if report getstats containskey scenarios if report getstats get scenarios storycount return storycount results after change org jbehave core embedder embedder runningstoriesfailed failures in running stories reportscount stories storiesnotallowed storiespending scenarios scenariosfailed scenariosnotallowed scenariospending stepsfailed ,Bug
allow parametrisation of scenarios by delimited names i 'm working on a simplification of the current parameterized scenario solution with this i want to avoid the need of defining different patterns for steps for normal scenarios and another for parameterized scenarios be able to use column names in examples tables that differ from the parameter names that were specified in the step annotation avoid having to annotate fields with named in parameterized step methods take the following steps and scenario for example code title parameterizedstory java public class parameterizedstory extends junitstory public static class paramssteps private string user private set string products null means no cart beforescenario public void init user null products null given user is logged in public void loggedin string user this user user given customer has a cart public void acustomerhasacart string customer assertthat user notnullvalue assertthat customer equalto user if products null products new treeset string when a product is added to the cart public void aproductisaddedtocart string product assertthat products notnullvalue products add product then cart contains product public void cartcontains string product assertthat products notnullvalue asserttrue products contains product public parameterizedstory making sure this does n't output to the build while it 's running useconfiguration new mostusefulconfiguration usestoryreporterbuilder new storyreporterbuilder withformats format console withfailuretrace true withfailuretracecompression false usependingstepstrategy new failinguponpendingstep usefailurestrategy new rethrowingfailure override public list candidatesteps candidatesteps return new instancestepsfactory configuration new paramssteps createcandidatesteps code code title parameterized story story scenario use flexible parameters with examples table given client is logged in and client has a cart when a item is added to the cart then cart contains item examples client item rui chocolate figueira car code the given user is logged in step pattern will match given client is logged in and user parameter will be set to client column values the main idea is that client instead of represent a named parameter represents a placeholder and that placeholder should be replaced with whether value exists for it in the examples table then after replacing the placeholder with the corresponding value it will then match with the given step pattern and user will be set to the correct value i have a working version available at that can be used to test the scenario above ,Improvement
allow freemarker templateprocessor to specifiy class for template loading in order to load a custom template from a different module we need to be able to specify in the freemarker configuration a different class for template loading ,Improvement
norwegian language support out of the box i 've added a property file here in ansi encoding with unix line endings and escaped unicode characters as requested btw would be cool if you linked to this tool which does the conversion smoothly ,Improvement
too many columns in an example table give indexoutofboundsexception when writing an example table that contains a vertical bar in a value i got an indexoutofboundsexception this somehow hangs the execution of the scenario the log only says beforestories and never gets to start the story but the firefox from selenium stays open it would be better if a proper error message or warning is printed and the story is marked as failed or not executed a preliminary test to show the error is this i 'll look a bit further into the problem maybe tomorrow noformat test public void shouldcatcherrorwrongnumberofcolumns string tablewithwrongcolumn a b n a b c n examplestable table new examplestable tablewithwrongcolumn ,Bug
enable override of configured properties with values specified as table properties i have noticed a problem in my story where i need to change the exampletableseperatorvalue since a webpage title contains a vertical bar this could be easily configured if the separator could be changed for an individual table like trim false e g code ignorableseparator headerseparator valueseparator url title a comment code ,Improvement
numberformatexception when trying to convert parameters to bigdecimal with german locale when using a german localized number with group separators and decimals a conversion to bigdecimal fails with a numberformatexception for german group separators are dots decimal separator is a comma just the other way round of the us version in the following test class the first case is green the second fails with noformat org jbehave core steps parameterconverters parameterconvertionfailed at org jbehave core steps parameterconverters numberconverter convertvalue parameterconverters java at de westlb jets xce jbehave tools numberformattest jbehaveconverter numberformattest java at sun reflect nativemethodaccessorimpl invoke native method at sun reflect nativemethodaccessorimpl invoke nativemethodaccessorimpl java at sun reflect delegatingmethodaccessorimpl invoke delegatingmethodaccessorimpl java at java lang reflect method invoke method java at org junit internal runners testmethodrunner executemethodbody testmethodrunner java at org eclipse jdt internal junit runner remotetestrunner main remotetestrunner java caused by java lang numberformatexception at java math bigdecimal init bigdecimal java at java math bigdecimal init bigdecimal java at org jbehave core steps parameterconverters numberconverter convertvalue parameterconverters java more noformat putting a breakpoint in the bigdecimal constructor reveals it is fed a string which is obviously wrong i suspect the canonicalization of the original string breaks it code title test java public class numberformattest private static final bigdecimal expected new bigdecimal private final string localizedstring private decimalformat germannumbers before public void setup germannumbers decimalformat decimalformat getnumberinstance locale german germannumbers setparsebigdecimal true test public void plainconverter throws exception number parse germannumbers parse localizedstring assertequals expected parse test public void jbehaveconverter throws exception parameterconverters numberconverter numberconverter new parameterconverters numberconverter germannumbers object v numberconverter convertvalue localizedstring bigdecimal class assertequals expected v code ,Bug
numberconverter not threadsafe jeff caswell 's patch applied we have been having a number of issues with story parameter conversion and number format errors in a multithreaded environment this was tracked back to the java text numberformat instance held by the parameterconverters numberconverter inner class the constructor is only run once when a number of stories are launched and the instance is used by all the stories in the run i suspect there may be other issues affecting this however by converting the numberformat to threadlocal storage has solved the problem here the patch is pretty much self explanitory the only aspect that may not immediately seem obvious is that the numberformat passed in on the constructor was itself constructed with the users preferred locale it is for this reason that i have treated it as the ' preferred format ' and cloned it for the thread local copy also i did not issue an explicit remove since tests are run as a relatively short lived batch job and i did not feel that there was any reason to worry about an associated memory leak ,Bug
allow transformation of example tables by using exampletable i would use this format header value header value header value currently we can only use this way header header header value value value thks,Improvement
if include instruction are alone then the included steps are ignored hello in my stories some scenarios are factored in included files with no parameters it is just a simple way to avoiding duplicates steps examples use case share between ' create ' and ' update ' stories when the include instruction are alone then jbehave does nt execute the steps of included file when the include instruction is followed by simple a comment then jbehave execute the included steps regards thomas montembault example fail sc nario tester les champs d' dition etant donn les histoires stories personne include personneedit include succes sc nario tester les champs d' dition etant donn les histoires stories personne include personneedit include un commentaire pour permettre prise en charge du sc nario inclu personneedit include sc nario test trigramme quand l'utilisateur saisit '' dans le champ ' trigramme ' quand l'utilisateur clique sur le bouton ' enregistrer ' alors la page doit afficher un message de validation ' trigramme une donn e est requise ' quand l'utilisateur saisit ' txt ' dans le champ ' trigramme ' quand l'utilisateur clique sur le bouton ' enregistrer ' alors la page doit afficher un message de validation ' trigramme la donn e doit comporter au moins caract res ' quand l'utilisateur saisit ' txt ' dans le champ ' trigramme ' quand l'utilisateur clique sur le bouton ' enregistrer ' alors la page doit afficher un message de validation ' trigramme la donn e a plus que les caract res maximum autoris s ' quand l'utilisateur saisit ' txt ' dans le champ ' trigramme ' idem pour tout les champs de saisies,Bug
improve table usage on steps in parameterized scenarios the namedparameters from the examples section of a parameterized scenario can be use to replace values in a table used in a step in that scenario the current replacement scheme is to replace the value whereever it appears in the table data this improvement is to offer an option to replace table data where the value matches the named parameter as the whole value it is also to change the algorithm on all replacement to process the named parameters in a sorted order largest to smallest in length so as to avoid replacement where parameeter name is part of another parameter name the default behaviour is to do full replacement as is currently the case this behaviour can be overridden via parametercontrols a replacewholewordvalue property or on a per table basis with replacewholewordvalue true false an updated parameterised table story is attached with expected behaviour ,Improvement
allow givenstories to be specified at story level givenstories at story level should be executed regardless of the content of any particular scenario but require at least scenario to be present identified by its keyword ,Improvement
pending steps methods should remove even more characters following up on jbehave i noticed that even more characters should be removed when creating the method name e g i have changed the method name filter to use isjavaidentifierpart and added a unit test to check for all characters,Bug
